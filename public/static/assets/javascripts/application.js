(()=>{var qs=Object.defineProperty,Ui=r=>{throw TypeError(r)},zs=(r,e,t)=>e in r?qs(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,Ne=(r,e,t)=>zs(r,typeof e!="symbol"?e+"":e,t),qi=(r,e,t)=>e.has(r)||Ui("Cannot "+t),he=(r,e,t)=>(qi(r,e,"read from private field"),t?t.call(r):e.get(r)),Ci=(r,e,t)=>e.has(r)?Ui("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(r):e.set(r,t),ki=(r,e,t,n)=>(qi(r,e,"write to private field"),n?n.call(r,t):e.set(r,t),t),zi=`(function(){"use strict";const d=new TextEncoder;function p(e){return[...new Uint8Array(e)].map(t=>t.toString(16).padStart(2,"0")).join("")}async function b(e,t,r){if(typeof crypto>"u"||!("subtle"in crypto)||!("digest"in crypto.subtle))throw new Error("Web Crypto is not available. Secure context is required (https://developer.mozilla.org/en-US/docs/Web/Security/Secure_Contexts).");return p(await crypto.subtle.digest(r.toUpperCase(),d.encode(e+t)))}function w(e,t,r="SHA-256",n=1e6,s=0){const o=new AbortController,a=Date.now();return{promise:(async()=>{for(let c=s;c<=n;c+=1){if(o.signal.aborted)return null;if(await b(t,c,r)===e)return{number:c,took:Date.now()-a}}return null})(),controller:o}}function h(e){const t=atob(e),r=new Uint8Array(t.length);for(let n=0;n<t.length;n++)r[n]=t.charCodeAt(n);return r}function g(e,t=12){const r=new Uint8Array(t);for(let n=0;n<t;n++)r[n]=e%256,e=Math.floor(e/256);return r}async function m(e,t="",r=1e6,n=0){const s="AES-GCM",o=new AbortController,a=Date.now(),l=async()=>{for(let u=n;u<=r;u+=1){if(o.signal.aborted||!c||!y)return null;try{const f=await crypto.subtle.decrypt({name:s,iv:g(u)},c,y);if(f)return{clearText:new TextDecoder().decode(f),took:Date.now()-a}}catch{}}return null};let c=null,y=null;try{y=h(e);const u=await crypto.subtle.digest("SHA-256",d.encode(t));c=await crypto.subtle.importKey("raw",u,s,!1,["decrypt"])}catch{return{promise:Promise.reject(),controller:o}}return{promise:l(),controller:o}}let i;onmessage=async e=>{const{type:t,payload:r,start:n,max:s}=e.data;let o=null;if(t==="abort")i==null||i.abort(),i=void 0;else if(t==="work"){if("obfuscated"in r){const{key:a,obfuscated:l}=r||{};o=await m(l,a,s,n)}else{const{algorithm:a,challenge:l,salt:c}=r||{};o=w(l,c,a,s,n)}i=o.controller,o.promise.then(a=>{self.postMessage(a&&{...a,worker:!0})})}}})();
`,Ti=typeof self<"u"&&self.Blob&&new Blob([zi],{type:"text/javascript;charset=utf-8"});function Hs(r){let e;try{if(e=Ti&&(self.URL||self.webkitURL).createObjectURL(Ti),!e)throw"";let t=new Worker(e,{name:r?.name});return t.addEventListener("error",()=>{(self.URL||self.webkitURL).revokeObjectURL(e)}),t}catch{return new Worker("data:text/javascript;charset=utf-8,"+encodeURIComponent(zi),{name:r?.name})}finally{e&&(self.URL||self.webkitURL).revokeObjectURL(e)}}var Ws="5",Mi;typeof window<"u"&&((Mi=window.__svelte??(window.__svelte={})).v??(Mi.v=new Set)).add(Ws);var Gs=1,Zs=4,Js=8,Ys=16,Xs=1,Qs=2,on="[",Hi="[!",Wi="]",Ot={},se=Symbol(),ea="http://www.w3.org/1999/xhtml",ta=!1;function Gi(r){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}var Zi=Array.isArray,ra=Array.prototype.indexOf,na=Array.from,gr=Object.keys,zt=Object.defineProperty,lt=Object.getOwnPropertyDescriptor,ia=Object.getOwnPropertyDescriptors,oa=Object.prototype,sa=Array.prototype,Ji=Object.getPrototypeOf,Ni=Object.isExtensible,Ct=()=>{};function Yi(r){for(var e=0;e<r.length;e++)r[e]()}function aa(r,e,t=!1){return r===void 0?t?e():e:r}var Ee=2,Xi=4,Ar=8,sn=16,Re=32,ht=64,vr=128,fe=256,mr=512,ae=1024,Ie=2048,dt=4096,kt=8192,xr=16384,la=32768,an=65536,ca=1<<19,Qi=1<<20,Zr=1<<21,Ut=Symbol("$state"),eo=Symbol("legacy props"),ua=Symbol("");function ha(r){throw new Error("https://svelte.dev/e/effect_in_teardown")}function da(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function fa(r){throw new Error("https://svelte.dev/e/effect_orphan")}function pa(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function ga(){throw new Error("https://svelte.dev/e/hydration_failed")}function va(r){throw new Error("https://svelte.dev/e/props_invalid_value")}function ma(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function ba(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function ya(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}function $r(r){console.warn("https://svelte.dev/e/hydration_mismatch")}var B=!1;function $t(r){B=r}var _;function Ze(r){if(r===null)throw $r(),Ot;return _=r}function Tt(){return Ze(Xe(_))}function Z(r){if(B){if(Xe(_)!==null)throw $r(),Ot;_=r}}function wa(){for(var r=0,e=_;;){if(e.nodeType===8){var t=e.data;if(t===Wi){if(r===0)return e;r-=1}else(t===on||t===Hi)&&(r+=1)}var n=Xe(e);e.remove(),e=n}}var Ea=!1;function We(r){if(typeof r!="object"||r===null||Ut in r)return r;let e=Ji(r);if(e!==oa&&e!==sa)return r;var t=new Map,n=Zi(r),i=I(0),s=F,c=l=>{var u=F;De(s);var d=l();return De(u),d};return n&&t.set("length",I(r.length)),new Proxy(r,{defineProperty(l,u,d){(!("value"in d)||d.configurable===!1||d.enumerable===!1||d.writable===!1)&&ma();var g=t.get(u);return g===void 0?(g=c(()=>I(d.value)),t.set(u,g)):w(g,c(()=>We(d.value))),!0},deleteProperty(l,u){var d=t.get(u);if(d===void 0)u in l&&(t.set(u,c(()=>I(se))),Hr(i));else{if(n&&typeof u=="string"){var g=t.get("length"),m=Number(u);Number.isInteger(m)&&m<g.v&&w(g,m)}w(d,se),Hr(i)}return!0},get(l,u,d){var g;if(u===Ut)return r;var m=t.get(u),b=u in l;if(m===void 0&&(!b||(g=lt(l,u))!=null&&g.writable)&&(m=c(()=>I(We(b?l[u]:se))),t.set(u,m)),m!==void 0){var y=a(m);return y===se?void 0:y}return Reflect.get(l,u,d)},getOwnPropertyDescriptor(l,u){var d=Reflect.getOwnPropertyDescriptor(l,u);if(d&&"value"in d){var g=t.get(u);g&&(d.value=a(g))}else if(d===void 0){var m=t.get(u),b=m?.v;if(m!==void 0&&b!==se)return{enumerable:!0,configurable:!0,value:b,writable:!0}}return d},has(l,u){var d;if(u===Ut)return!0;var g=t.get(u),m=g!==void 0&&g.v!==se||Reflect.has(l,u);if(g!==void 0||S!==null&&(!m||(d=lt(l,u))!=null&&d.writable)){g===void 0&&(g=c(()=>I(m?We(l[u]):se)),t.set(u,g));var b=a(g);if(b===se)return!1}return m},set(l,u,d,g){var m,b=t.get(u),y=u in l;if(n&&u==="length")for(var N=d;N<b.v;N+=1){var R=t.get(N+"");R!==void 0?w(R,se):N in l&&(R=c(()=>I(se)),t.set(N+"",R))}b===void 0?(!y||(m=lt(l,u))!=null&&m.writable)&&(b=c(()=>I(void 0)),w(b,c(()=>We(d))),t.set(u,b)):(y=b.v!==se,w(b,c(()=>We(d))));var K=Reflect.getOwnPropertyDescriptor(l,u);if(K!=null&&K.set&&K.set.call(g,d),!y){if(n&&typeof u=="string"){var q=t.get("length"),oe=Number(u);Number.isInteger(oe)&&oe>=q.v&&w(q,oe+1)}Hr(i)}return!0},ownKeys(l){a(i);var u=Reflect.ownKeys(l).filter(m=>{var b=t.get(m);return b===void 0||b.v!==se});for(var[d,g]of t)g.v!==se&&!(d in l)&&u.push(d);return u},setPrototypeOf(){ba()}})}function Hr(r,e=1){w(r,r.v+e)}var Fi,to,ro,no;function Jr(){if(Fi===void 0){Fi=window,to=/Firefox/.test(navigator.userAgent);var r=Element.prototype,e=Node.prototype,t=Text.prototype;ro=lt(e,"firstChild").get,no=lt(e,"nextSibling").get,Ni(r)&&(r.__click=void 0,r.__className=void 0,r.__attributes=null,r.__style=void 0,r.__e=void 0),Ni(t)&&(t.__t=void 0)}}function Or(r=""){return document.createTextNode(r)}function ve(r){return ro.call(r)}function Xe(r){return no.call(r)}function J(r,e){if(!B)return ve(r);var t=ve(_);return t===null&&(t=_.appendChild(Or())),Ze(t),t}function jt(r,e){if(!B){var t=ve(r);return t instanceof Comment&&t.data===""?Xe(t):t}return _}function Y(r,e=1,t=!1){let n=B?_:r;for(var i;e--;)i=n,n=Xe(n);if(!B)return n;var s=n?.nodeType;if(t&&s!==3){var c=Or();return n===null?i?.after(c):n.before(c),Ze(c),c}return Ze(n),n}function Aa(r){r.textContent=""}function io(r){return r===this.v}function oo(r,e){return r!=r?e==e:r!==e||r!==null&&typeof r=="object"||typeof r=="function"}function ln(r){return!oo(r,this.v)}function Cr(r){var e=Ee|Ie,t=F!==null&&(F.f&Ee)!==0?F:null;return S===null||t!==null&&(t.f&fe)!==0?e|=fe:S.f|=Qi,{ctx:ie,deps:null,effects:null,equals:io,f:e,fn:r,reactions:null,rv:0,v:null,wv:0,parent:t??S}}function Pt(r){let e=Cr(r);return yo(e),e}function xa(r){let e=Cr(r);return e.equals=ln,e}function so(r){var e=r.effects;if(e!==null){r.effects=null;for(var t=0;t<e.length;t+=1)Je(e[t])}}function $a(r){for(var e=r.parent;e!==null;){if((e.f&Ee)===0)return e;e=e.parent}return null}function ao(r){var e,t=S;Ye($a(r));try{so(r),e=xo(r)}finally{Ye(t)}return e}function lo(r){var e=ao(r),t=(Ge||(r.f&fe)!==0)&&r.deps!==null?dt:ae;Ae(r,t),r.equals(e)||(r.v=e,r.wv=Eo())}function Oa(r){S===null&&F===null&&fa(),F!==null&&(F.f&fe)!==0&&S===null&&da(),Zt&&ha()}function Ca(r,e){var t=e.last;t===null?e.last=e.first=r:(t.next=r,r.prev=t,e.last=r)}function ft(r,e,t,n=!0){var i=S,s={ctx:ie,deps:null,nodes_start:null,nodes_end:null,f:r|Ie,first:null,fn:e,last:null,next:null,parent:i,prev:null,teardown:null,transitions:null,wv:0};if(t)try{fn(s),s.f|=la}catch(u){throw Je(s),u}else e!==null&&Tr(s);var c=t&&s.deps===null&&s.first===null&&s.nodes_start===null&&s.teardown===null&&(s.f&(Qi|vr))===0;if(!c&&n&&(i!==null&&Ca(s,i),F!==null&&(F.f&Ee)!==0)){var l=F;(l.effects??(l.effects=[])).push(s)}return s}function cn(r){let e=ft(Ar,null,!1);return Ae(e,ae),e.teardown=r,e}function Yr(r){Oa();var e=S!==null&&(S.f&Re)!==0&&ie!==null&&!ie.m;if(e){var t=ie;(t.e??(t.e=[])).push({fn:r,effect:S,reaction:F})}else{var n=un(r);return n}}function ka(r){let e=ft(ht,r,!0);return()=>{Je(e)}}function Ta(r){let e=ft(ht,r,!0);return(t={})=>new Promise(n=>{t.outro?Qr(e,()=>{Je(e),n(void 0)}):(Je(e),n(void 0))})}function un(r){return ft(Xi,r,!1)}function hn(r){return ft(Ar,r,!0)}function Fe(r,e=[],t=Cr){let n=e.map(t);return co(()=>r(...n.map(a)))}function co(r,e=0){return ft(Ar|sn|e,r,!0)}function Xr(r,e=!0){return ft(Ar|Re,r,!0,e)}function uo(r){var e=r.teardown;if(e!==null){let t=Zt,n=F;Li(!0),De(null);try{e.call(null)}finally{Li(t),De(n)}}}function ho(r,e=!1){var t=r.first;for(r.first=r.last=null;t!==null;){var n=t.next;(t.f&ht)!==0?t.parent=null:Je(t,e),t=n}}function Ma(r){for(var e=r.first;e!==null;){var t=e.next;(e.f&Re)===0&&Je(e),e=t}}function Je(r,e=!0){var t=!1;(e||(r.f&ca)!==0)&&r.nodes_start!==null&&(fo(r.nodes_start,r.nodes_end),t=!0),ho(r,e&&!t),Er(r,0),Ae(r,xr);var n=r.transitions;if(n!==null)for(let s of n)s.stop();uo(r);var i=r.parent;i!==null&&i.first!==null&&po(r),r.next=r.prev=r.teardown=r.ctx=r.deps=r.fn=r.nodes_start=r.nodes_end=null}function fo(r,e){for(;r!==null;){var t=r===e?null:Xe(r);r.remove(),r=t}}function po(r){var e=r.parent,t=r.prev,n=r.next;t!==null&&(t.next=n),n!==null&&(n.prev=t),e!==null&&(e.first===r&&(e.first=n),e.last===r&&(e.last=t))}function Qr(r,e){var t=[];go(r,t,!0),Na(t,()=>{Je(r),e&&e()})}function Na(r,e){var t=r.length;if(t>0){var n=()=>--t||e();for(var i of r)i.out(n)}else e()}function go(r,e,t){if((r.f&kt)===0){if(r.f^=kt,r.transitions!==null)for(let c of r.transitions)(c.is_global||t)&&e.push(c);for(var n=r.first;n!==null;){var i=n.next,s=(n.f&an)!==0||(n.f&Re)!==0;go(n,e,s?t:!1),n=i}}}function Si(r){vo(r,!0)}function vo(r,e){if((r.f&kt)!==0){r.f^=kt,(r.f&ae)===0&&(r.f^=ae),Jt(r)&&(Ae(r,Ie),Tr(r));for(var t=r.first;t!==null;){var n=t.next,i=(t.f&an)!==0||(t.f&Re)!==0;vo(t,i?e:!1),t=n}if(r.transitions!==null)for(let s of r.transitions)(s.is_global||e)&&s.in()}}var Fa=typeof requestIdleCallback>"u"?r=>setTimeout(r,1):requestIdleCallback,Ht=[],Wt=[];function mo(){var r=Ht;Ht=[],Yi(r)}function bo(){var r=Wt;Wt=[],Yi(r)}function dn(r){Ht.length===0&&queueMicrotask(mo),Ht.push(r)}function Sa(r){Wt.length===0&&Fa(bo),Wt.push(r)}function La(){Ht.length>0&&mo(),Wt.length>0&&bo()}var dr=!1,br=!1,yr=null,ct=!1,Zt=!1;function Li(r){Zt=r}var qt=[],F=null,Se=!1;function De(r){F=r}var S=null;function Ye(r){S=r}var me=null;function yo(r){F!==null&&F.f&Zr&&(me===null?me=[r]:me.push(r))}var ne=null,de=0,ge=null;function Ia(r){ge=r}var wo=1,wr=0,Ge=!1;function Eo(){return++wo}function Jt(r){var e,t=r.f;if((t&Ie)!==0)return!0;if((t&dt)!==0){var n=r.deps,i=(t&fe)!==0;if(n!==null){var s,c,l=(t&mr)!==0,u=i&&S!==null&&!Ge,d=n.length;if(l||u){var g=r,m=g.parent;for(s=0;s<d;s++)c=n[s],(l||!((e=c?.reactions)!=null&&e.includes(g)))&&(c.reactions??(c.reactions=[])).push(g);l&&(g.f^=mr),u&&m!==null&&(m.f&fe)===0&&(g.f^=fe)}for(s=0;s<d;s++)if(c=n[s],Jt(c)&&lo(c),c.wv>r.wv)return!0}(!i||S!==null&&!Ge)&&Ae(r,ae)}return!1}function Da(r,e){for(var t=e;t!==null;){if((t.f&vr)!==0)try{t.fn(r);return}catch{t.f^=vr}t=t.parent}throw dr=!1,r}function Ii(r){return(r.f&xr)===0&&(r.parent===null||(r.parent.f&vr)===0)}function kr(r,e,t,n){if(dr){if(t===null&&(dr=!1),Ii(e))throw r;return}if(t!==null&&(dr=!0),Da(r,e),Ii(e))throw r}function Ao(r,e,t=!0){var n=r.reactions;if(n!==null)for(var i=0;i<n.length;i++){var s=n[i];me!=null&&me.includes(r)||((s.f&Ee)!==0?Ao(s,e,!1):e===s&&(t?Ae(s,Ie):(s.f&ae)!==0&&Ae(s,dt),Tr(s)))}}function xo(r){var e,t=ne,n=de,i=ge,s=F,c=Ge,l=me,u=ie,d=Se,g=r.f;ne=null,de=0,ge=null,Ge=(g&fe)!==0&&(Se||!ct||F===null),F=(g&(Re|ht))===0?r:null,me=null,Di(r.ctx),Se=!1,wr++,r.f|=Zr;try{var m=(0,r.fn)(),b=r.deps;if(ne!==null){var y;if(Er(r,de),b!==null&&de>0)for(b.length=de+ne.length,y=0;y<ne.length;y++)b[de+y]=ne[y];else r.deps=b=ne;if(!Ge)for(y=de;y<b.length;y++)((e=b[y]).reactions??(e.reactions=[])).push(r)}else b!==null&&de<b.length&&(Er(r,de),b.length=de);if(Mo()&&ge!==null&&!Se&&b!==null&&(r.f&(Ee|dt|Ie))===0)for(y=0;y<ge.length;y++)Ao(ge[y],r);return s!==null&&s!==r&&(wr++,ge!==null&&(i===null?i=ge:i.push(...ge))),m}finally{ne=t,de=n,ge=i,F=s,Ge=c,me=l,Di(u),Se=d,r.f^=Zr}}function _a(r,e){let t=e.reactions;if(t!==null){var n=ra.call(t,r);if(n!==-1){var i=t.length-1;i===0?t=e.reactions=null:(t[n]=t[i],t.pop())}}t===null&&(e.f&Ee)!==0&&(ne===null||!ne.includes(e))&&(Ae(e,dt),(e.f&(fe|mr))===0&&(e.f^=mr),so(e),Er(e,0))}function Er(r,e){var t=r.deps;if(t!==null)for(var n=e;n<t.length;n++)_a(r,t[n])}function fn(r){var e=r.f;if((e&xr)===0){Ae(r,ae);var t=S,n=ie,i=ct;S=r,ct=!0;try{(e&sn)!==0?Ma(r):ho(r),uo(r);var s=xo(r);r.teardown=typeof s=="function"?s:null,r.wv=wo;var c=r.deps,l;ta&&Ea&&r.f&Ie}catch(u){kr(u,r,t,n||r.ctx)}finally{ct=i,S=t}}}function Ba(){try{pa()}catch(r){if(yr!==null)kr(r,yr,null);else throw r}}function $o(){var r=ct;try{var e=0;for(ct=!0;qt.length>0;){e++>1e3&&Ba();var t=qt,n=t.length;qt=[];for(var i=0;i<n;i++){var s=Va(t[i]);Ra(s)}Gt.clear()}}finally{br=!1,ct=r,yr=null}}function Ra(r){var e=r.length;if(e!==0)for(var t=0;t<e;t++){var n=r[t];if((n.f&(xr|kt))===0)try{Jt(n)&&(fn(n),n.deps===null&&n.first===null&&n.nodes_start===null&&(n.teardown===null?po(n):n.fn=null))}catch(i){kr(i,n,null,n.ctx)}}}function Tr(r){br||(br=!0,queueMicrotask($o));for(var e=yr=r;e.parent!==null;){e=e.parent;var t=e.f;if((t&(ht|Re))!==0){if((t&ae)===0)return;e.f^=ae}}qt.push(e)}function Va(r){for(var e=[],t=r;t!==null;){var n=t.f,i=(n&(Re|ht))!==0,s=i&&(n&ae)!==0;if(!s&&(n&kt)===0){if((n&Xi)!==0)e.push(t);else if(i)t.f^=ae;else try{Jt(t)&&fn(t)}catch(u){kr(u,t,null,t.ctx)}var c=t.first;if(c!==null){t=c;continue}}var l=t.parent;for(t=t.next;t===null&&l!==null;)t=l.next,l=l.parent}return e}function x(r){for(var e;;){if(La(),qt.length===0)return e;br=!0,$o()}}async function Wr(){await Promise.resolve(),x()}function a(r){var e=r.f,t=(e&Ee)!==0;if(F!==null&&!Se){if(!(me!=null&&me.includes(r))){var n=F.deps;r.rv<wr&&(r.rv=wr,ne===null&&n!==null&&n[de]===r?de++:ne===null?ne=[r]:(!Ge||!ne.includes(r))&&ne.push(r))}}else if(t&&r.deps===null&&r.effects===null){var i=r,s=i.parent;s!==null&&(s.f&fe)===0&&(i.f^=fe)}return t&&(i=r,Jt(i)&&lo(i)),Zt&&Gt.has(r)?Gt.get(r):r.v}function ut(r){var e=Se;try{return Se=!0,r()}finally{Se=e}}var ja=-7169;function Ae(r,e){r.f=r.f&ja|e}var Gt=new Map;function Oo(r,e){var t={f:0,v:r,reactions:null,equals:io,rv:0,wv:0};return t}function I(r,e){let t=Oo(r);return yo(t),t}function pn(r,e=!1){let t=Oo(r);return e||(t.equals=ln),t}function w(r,e,t=!1){F!==null&&!Se&&Mo()&&(F.f&(Ee|sn))!==0&&!(me!=null&&me.includes(r))&&ya();let n=t?We(e):e;return Pa(r,n)}function Pa(r,e){if(!r.equals(e)){var t=r.v;Zt?Gt.set(r,e):Gt.set(r,t),r.v=e,(r.f&Ee)!==0&&((r.f&Ie)!==0&&ao(r),Ae(r,(r.f&fe)===0?ae:dt)),r.wv=Eo(),Co(r,Ie),S!==null&&(S.f&ae)!==0&&(S.f&(Re|ht))===0&&(ge===null?Ia([r]):ge.push(r))}return e}function Co(r,e){var t=r.reactions;if(t!==null)for(var n=t.length,i=0;i<n;i++){var s=t[i],c=s.f;(c&Ie)===0&&(Ae(s,e),(c&(ae|fe))!==0&&((c&Ee)!==0?Co(s,dt):Tr(s)))}}var ie=null;function Di(r){ie=r}function ko(r,e=!1,t){var n=ie={p:ie,c:null,d:!1,e:null,m:!1,s:r,x:null,l:null};cn(()=>{n.d=!0})}function To(r){let e=ie;if(e!==null){r!==void 0&&(e.x=r);let c=e.e;if(c!==null){var t=S,n=F;e.e=null;try{for(var i=0;i<c.length;i++){var s=c[i];Ye(s.effect),De(s.reaction),un(s.fn)}}finally{Ye(t),De(n)}}ie=e.p,e.m=!0}return r||{}}function Mo(){return!0}var Ka=["touchstart","touchmove"];function Ua(r){return Ka.includes(r)}function qa(r,e){if(e){let t=document.body;r.autofocus=!0,dn(()=>{document.activeElement===t&&r.focus()})}}var _i=!1;function No(){_i||(_i=!0,document.addEventListener("reset",r=>{Promise.resolve().then(()=>{var e;if(!r.defaultPrevented)for(let t of r.target.elements)(e=t.__on_r)==null||e.call(t)})},{capture:!0}))}function Fo(r){var e=F,t=S;De(null),Ye(null);try{return r()}finally{De(e),Ye(t)}}function za(r,e,t,n=t){r.addEventListener(e,()=>Fo(t));let i=r.__on_r;i?r.__on_r=()=>{i(),n(!0)}:r.__on_r=()=>n(!0),No()}var So=new Set,en=new Set;function Ha(r,e,t,n={}){function i(s){if(n.capture||Kt.call(e,s),!s.cancelBubble)return Fo(()=>t?.call(this,s))}return r.startsWith("pointer")||r.startsWith("touch")||r==="wheel"?dn(()=>{e.addEventListener(r,i,n)}):e.addEventListener(r,i,n),i}function ze(r,e,t,n,i){var s={capture:n,passive:i},c=Ha(r,e,t,s);(e===document.body||e===window||e===document)&&cn(()=>{e.removeEventListener(r,c,s)})}function Wa(r){for(var e=0;e<r.length;e++)So.add(r[e]);for(var t of en)t(r)}function Kt(r){var e,t=this,n=t.ownerDocument,i=r.type,s=((e=r.composedPath)==null?void 0:e.call(r))||[],c=s[0]||r.target,l=0,u=r.__root;if(u){var d=s.indexOf(u);if(d!==-1&&(t===document||t===window)){r.__root=t;return}var g=s.indexOf(t);if(g===-1)return;d<=g&&(l=d)}if(c=s[l]||r.target,c!==t){zt(r,"currentTarget",{configurable:!0,get(){return c||n}});var m=F,b=S;De(null),Ye(null);try{for(var y,N=[];c!==null;){var R=c.assignedSlot||c.parentNode||c.host||null;try{var K=c["__"+i];if(K!=null&&(!c.disabled||r.target===c))if(Zi(K)){var[q,...oe]=K;q.apply(c,[r,...oe])}else K.call(c,r)}catch(T){y?N.push(T):y=T}if(r.cancelBubble||R===t||R===null)break;c=R}if(y){for(let T of N)queueMicrotask(()=>{throw T});throw y}}finally{r.__root=t,delete r.currentTarget,De(m),Ye(b)}}}function gn(r){var e=document.createElement("template");return e.innerHTML=r,e.content}function Le(r,e){var t=S;t.nodes_start===null&&(t.nodes_start=r,t.nodes_end=e)}function xe(r,e){var t=(e&Xs)!==0,n=(e&Qs)!==0,i,s=!r.startsWith("<!>");return()=>{if(B)return Le(_,null),_;i===void 0&&(i=gn(s?r:"<!>"+r),t||(i=ve(i)));var c=n||to?document.importNode(i,!0):i.cloneNode(!0);if(t){var l=ve(c),u=c.lastChild;Le(l,u)}else Le(c,c);return c}}function Mr(r,e,t="svg"){var n=!r.startsWith("<!>"),i=`<${t}>${n?r:"<!>"+r}</${t}>`,s;return()=>{if(B)return Le(_,null),_;if(!s){var c=gn(i),l=ve(c);s=ve(l)}var u=s.cloneNode(!0);return Le(u,u),u}}function cr(){if(B)return Le(_,null),_;var r=document.createDocumentFragment(),e=document.createComment(""),t=Or();return r.append(e,t),Le(e,t),r}function U(r,e){if(B){S.nodes_end=_,Tt();return}r!==null&&r.before(e)}function Ga(r,e){var t=e==null?"":typeof e=="object"?e+"":e;t!==(r.__t??(r.__t=r.nodeValue))&&(r.__t=t,r.nodeValue=t+"")}function Lo(r,e){return Io(r,e)}function Za(r,e){Jr(),e.intro=e.intro??!1;let t=e.target,n=B,i=_;try{for(var s=ve(t);s&&(s.nodeType!==8||s.data!==on);)s=Xe(s);if(!s)throw Ot;$t(!0),Ze(s),Tt();let c=Io(r,{...e,anchor:s});if(_===null||_.nodeType!==8||_.data!==Wi)throw $r(),Ot;return $t(!1),c}catch(c){if(c===Ot)return e.recover===!1&&ga(),Jr(),Aa(t),$t(!1),Lo(r,e);throw c}finally{$t(n),Ze(i)}}var At=new Map;function Io(r,{target:e,anchor:t,props:n={},events:i,context:s,intro:c=!0}){Jr();var l=new Set,u=m=>{for(var b=0;b<m.length;b++){var y=m[b];if(!l.has(y)){l.add(y);var N=Ua(y);e.addEventListener(y,Kt,{passive:N});var R=At.get(y);R===void 0?(document.addEventListener(y,Kt,{passive:N}),At.set(y,1)):At.set(y,R+1)}}};u(na(So)),en.add(u);var d=void 0,g=Ta(()=>{var m=t??e.appendChild(Or());return Xr(()=>{if(s){ko({});var b=ie;b.c=s}i&&(n.$$events=i),B&&Le(m,null),d=r(m,n)||{},B&&(S.nodes_end=_),s&&To()}),()=>{var b;for(var y of l){e.removeEventListener(y,Kt);var N=At.get(y);--N===0?(document.removeEventListener(y,Kt),At.delete(y)):At.set(y,N)}en.delete(u),m!==t&&((b=m.parentNode)==null||b.removeChild(m))}});return tn.set(d,g),d}var tn=new WeakMap;function Ja(r,e){let t=tn.get(r);return t?(tn.delete(r),t(e)):Promise.resolve()}function X(r,e,[t,n]=[0,0]){B&&t===0&&Tt();var i=r,s=null,c=null,l=se,u=t>0?an:0,d=!1;let g=(b,y=!0)=>{d=!0,m(y,b)},m=(b,y)=>{if(l===(l=b))return;let N=!1;if(B&&n!==-1){if(t===0){let K=i.data;K===on?n=0:K===Hi?n=1/0:(n=parseInt(K.substring(1)),n!==n&&(n=l?1/0:-1))}let R=n>t;!!l===R&&(i=wa(),Ze(i),$t(!1),N=!0,n=-1)}l?(s?Si(s):y&&(s=Xr(()=>y(i))),c&&Qr(c,()=>{c=null})):(c?Si(c):y&&(c=Xr(()=>y(i,[t+1,n]))),s&&Qr(s,()=>{s=null})),N&&$t(!0)};co(()=>{d=!1,e(g),d||m(null,null)},u),B&&(i=_)}function at(r,e,t=!1,n=!1,i=!1){var s=r,c="";Fe(()=>{var l=S;if(c===(c=e()??"")){B&&Tt();return}if(l.nodes_start!==null&&(fo(l.nodes_start,l.nodes_end),l.nodes_start=l.nodes_end=null),c!==""){if(B){_.data;for(var u=Tt(),d=u;u!==null&&(u.nodeType!==8||u.data!=="");)d=u,u=Xe(u);if(u===null)throw $r(),Ot;Le(_,d),s=Ze(u);return}var g=c+"";t?g=`<svg>${g}</svg>`:n&&(g=`<math>${g}</math>`);var m=gn(g);if((t||n)&&(m=ve(m)),Le(ve(m),m.lastChild),t||n)for(;ve(m);)s.before(ve(m));else s.before(m)}})}function Ya(r,e,t,n,i){var s;B&&Tt();var c=(s=e.$$slots)==null?void 0:s[t],l=!1;c===!0&&(c=e.children,l=!0),c===void 0||c(r,l?()=>n:n)}var Bi=[...` 	
\r\f\xA0\v\uFEFF`];function Xa(r,e,t){var n=""+r;if(t){for(var i in t)if(t[i])n=n?n+" "+i:i;else if(n.length)for(var s=i.length,c=0;(c=n.indexOf(i,c))>=0;){var l=c+s;(c===0||Bi.includes(n[c-1]))&&(l===n.length||Bi.includes(n[l]))?n=(c===0?"":n.substring(0,c))+n.substring(l+1):c=l}}return n===""?null:n}function Qa(r,e,t,n,i,s){var c=r.__className;if(B||c!==t||c===void 0){var l=Xa(t,n,s);(!B||l!==r.getAttribute("class"))&&(l==null?r.removeAttribute("class"):r.className=l),r.__className=t}else if(s&&i!==s)for(var u in s){var d=!!s[u];(i==null||d!==!!i[u])&&r.classList.toggle(u,d)}return s}var el=Symbol("is custom element"),tl=Symbol("is html");function Ri(r){if(B){var e=!1,t=()=>{if(!e){if(e=!0,r.hasAttribute("value")){var n=r.value;M(r,"value",null),r.value=n}if(r.hasAttribute("checked")){var i=r.checked;M(r,"checked",null),r.checked=i}}};r.__on_r=t,Sa(t),No()}}function rl(r,e){var t=Do(r);t.value===(t.value=e??void 0)||r.value===e&&(e!==0||r.nodeName!=="PROGRESS")||(r.value=e??"")}function M(r,e,t,n){var i=Do(r);B&&(i[e]=r.getAttribute(e),e==="src"||e==="srcset"||e==="href"&&r.nodeName==="LINK")||i[e]!==(i[e]=t)&&(e==="loading"&&(r[ua]=t),t==null?r.removeAttribute(e):typeof t!="string"&&nl(r).includes(e)?r[e]=t:r.setAttribute(e,t))}function Do(r){return r.__attributes??(r.__attributes={[el]:r.nodeName.includes("-"),[tl]:r.namespaceURI===ea})}var Vi=new Map;function nl(r){var e=Vi.get(r.nodeName);if(e)return e;Vi.set(r.nodeName,e=[]);for(var t,n=r,i=Element.prototype;i!==n;){t=ia(n);for(var s in t)t[s].set&&e.push(s);n=Ji(n)}return e}function il(r,e,t=e){za(r,"change",n=>{var i=n?r.defaultChecked:r.checked;t(i)}),(B&&r.defaultChecked!==r.checked||ut(e)==null)&&t(r.checked),hn(()=>{var n=e();r.checked=!!n})}function ji(r,e){return r===e||r?.[Ut]===e}function ur(r={},e,t,n){return un(()=>{var i,s;return hn(()=>{i=s,s=[],ut(()=>{r!==t(...s)&&(e(r,...s),i&&ji(t(...i),r)&&e(null,...i))})}),()=>{dn(()=>{s&&ji(t(...s),r)&&e(null,...s)})}}),r}function _o(r){ie===null&&Gi(),Yr(()=>{let e=ut(r);if(typeof e=="function")return e})}function ol(r){ie===null&&Gi(),_o(()=>()=>ut(r))}function Bo(r,e,t){if(r==null)return e(void 0),Ct;let n=ut(()=>r.subscribe(e,t));return n.unsubscribe?()=>n.unsubscribe():n}var xt=[];function sl(r,e=Ct){let t=null,n=new Set;function i(l){if(oo(r,l)&&(r=l,t)){let u=!xt.length;for(let d of n)d[1](),xt.push(d,r);if(u){for(let d=0;d<xt.length;d+=2)xt[d][0](xt[d+1]);xt.length=0}}}function s(l){i(l(r))}function c(l,u=Ct){let d=[l,u];return n.add(d),n.size===1&&(t=e(i,s)||Ct),l(r),()=>{n.delete(d),n.size===0&&t&&(t(),t=null)}}return{set:i,update:s,subscribe:c}}function fr(r){let e;return Bo(r,t=>e=t)(),e}var hr=!1,rn=Symbol();function al(r,e,t){let n=t[e]??(t[e]={store:null,source:pn(void 0),unsubscribe:Ct});if(n.store!==r&&!(rn in t))if(n.unsubscribe(),n.store=r??null,r==null)n.source.v=void 0,n.unsubscribe=Ct;else{var i=!0;n.unsubscribe=Bo(r,s=>{i?n.source.v=s:w(n.source,s)}),i=!1}return r&&rn in t?fr(r):a(n.source)}function ll(){let r={};function e(){cn(()=>{for(var t in r)r[t].unsubscribe();zt(r,rn,{enumerable:!1,value:!0})})}return[r,e]}function cl(r){var e=hr;try{return hr=!1,[r(),hr]}finally{hr=e}}function Pi(r){var e;return((e=r.ctx)==null?void 0:e.d)??!1}function $(r,e,t,n){var i,s=(t&Gs)!==0,c=!0,l=(t&Js)!==0,u=(t&Ys)!==0,d=!1,g;l?[g,d]=cl(()=>r[e]):g=r[e];var m=Ut in r||eo in r,b=l&&(((i=lt(r,e))==null?void 0:i.set)??(m&&e in r&&(P=>r[e]=P)))||void 0,y=n,N=!0,R=!1,K=()=>(R=!0,N&&(N=!1,u?y=ut(n):y=n),y);g===void 0&&n!==void 0&&(b&&c&&va(),g=K(),b&&b(g));var q;if(q=()=>{var P=r[e];return P===void 0?K():(N=!0,R=!1,P)},(t&Zs)===0)return q;if(b){var oe=r.$$legacy;return function(P,le){return arguments.length>0?((!le||oe||d)&&b(le?q():P),P):q()}}var T=!1,$e=pn(g),ee=Cr(()=>{var P=q(),le=a($e);return T?(T=!1,le):$e.v=P});return l&&a(ee),s||(ee.equals=ln),function(P,le){if(arguments.length>0){let Oe=le?a(ee):l?We(P):P;if(!ee.equals(Oe)){if(T=!0,w($e,Oe),R&&y!==void 0&&(y=Oe),Pi(ee))return P;ut(()=>a(ee))}return P}return Pi(ee)?ee.v:a(ee)}}function ul(r){return new nn(r)}var He,we,nn=class{constructor(e){Ci(this,He),Ci(this,we);var t,n=new Map,i=(c,l)=>{var u=pn(l);return n.set(c,u),u};let s=new Proxy({...e.props||{},$$events:{}},{get(c,l){return a(n.get(l)??i(l,Reflect.get(c,l)))},has(c,l){return l===eo?!0:(a(n.get(l)??i(l,Reflect.get(c,l))),Reflect.has(c,l))},set(c,l,u){return w(n.get(l)??i(l,u),u),Reflect.set(c,l,u)}});ki(this,we,(e.hydrate?Za:Lo)(e.component,{target:e.target,anchor:e.anchor,props:s,context:e.context,intro:e.intro??!1,recover:e.recover})),(!((t=e?.props)!=null&&t.$$host)||e.sync===!1)&&x(),ki(this,He,s.$$events);for(let c of Object.keys(he(this,we)))c==="$set"||c==="$destroy"||c==="$on"||zt(this,c,{get(){return he(this,we)[c]},set(l){he(this,we)[c]=l},enumerable:!0});he(this,we).$set=c=>{Object.assign(s,c)},he(this,we).$destroy=()=>{Ja(he(this,we))}}$set(e){he(this,we).$set(e)}$on(e,t){he(this,He)[e]=he(this,He)[e]||[];let n=(...i)=>t.call(this,...i);return he(this,He)[e].push(n),()=>{he(this,He)[e]=he(this,He)[e].filter(i=>i!==n)}}$destroy(){he(this,we).$destroy()}};He=new WeakMap,we=new WeakMap;var Ro;typeof HTMLElement=="function"&&(Ro=class extends HTMLElement{constructor(r,e,t){super(),Ne(this,"$$ctor"),Ne(this,"$$s"),Ne(this,"$$c"),Ne(this,"$$cn",!1),Ne(this,"$$d",{}),Ne(this,"$$r",!1),Ne(this,"$$p_d",{}),Ne(this,"$$l",{}),Ne(this,"$$l_u",new Map),Ne(this,"$$me"),this.$$ctor=r,this.$$s=e,t&&this.attachShadow({mode:"open"})}addEventListener(r,e,t){if(this.$$l[r]=this.$$l[r]||[],this.$$l[r].push(e),this.$$c){let n=this.$$c.$on(r,e);this.$$l_u.set(e,n)}super.addEventListener(r,e,t)}removeEventListener(r,e,t){if(super.removeEventListener(r,e,t),this.$$c){let n=this.$$l_u.get(e);n&&(n(),this.$$l_u.delete(e))}}async connectedCallback(){if(this.$$cn=!0,!this.$$c){let r=function(n){return i=>{let s=document.createElement("slot");n!=="default"&&(s.name=n),U(i,s)}};if(await Promise.resolve(),!this.$$cn||this.$$c)return;let e={},t=hl(this);for(let n of this.$$s)n in t&&(n==="default"&&!this.$$d.children?(this.$$d.children=r(n),e.default=!0):e[n]=r(n));for(let n of this.attributes){let i=this.$$g_p(n.name);i in this.$$d||(this.$$d[i]=pr(i,n.value,this.$$p_d,"toProp"))}for(let n in this.$$p_d)!(n in this.$$d)&&this[n]!==void 0&&(this.$$d[n]=this[n],delete this[n]);this.$$c=ul({component:this.$$ctor,target:this.shadowRoot||this,props:{...this.$$d,$$slots:e,$$host:this}}),this.$$me=ka(()=>{hn(()=>{var n;this.$$r=!0;for(let i of gr(this.$$c)){if(!((n=this.$$p_d[i])!=null&&n.reflect))continue;this.$$d[i]=this.$$c[i];let s=pr(i,this.$$d[i],this.$$p_d,"toAttribute");s==null?this.removeAttribute(this.$$p_d[i].attribute||i):this.setAttribute(this.$$p_d[i].attribute||i,s)}this.$$r=!1})});for(let n in this.$$l)for(let i of this.$$l[n]){let s=this.$$c.$on(n,i);this.$$l_u.set(i,s)}this.$$l={}}}attributeChangedCallback(r,e,t){var n;this.$$r||(r=this.$$g_p(r),this.$$d[r]=pr(r,t,this.$$p_d,"toProp"),(n=this.$$c)==null||n.$set({[r]:this.$$d[r]}))}disconnectedCallback(){this.$$cn=!1,Promise.resolve().then(()=>{!this.$$cn&&this.$$c&&(this.$$c.$destroy(),this.$$me(),this.$$c=void 0)})}$$g_p(r){return gr(this.$$p_d).find(e=>this.$$p_d[e].attribute===r||!this.$$p_d[e].attribute&&e.toLowerCase()===r)||r}});function pr(r,e,t,n){var i;let s=(i=t[r])==null?void 0:i.type;if(e=s==="Boolean"&&typeof e!="boolean"?e!=null:e,!n||!t[r])return e;if(n==="toAttribute")switch(s){case"Object":case"Array":return e==null?null:JSON.stringify(e);case"Boolean":return e?"":null;case"Number":return e??null;default:return e}else switch(s){case"Object":case"Array":return e&&JSON.parse(e);case"Boolean":return e;case"Number":return e!=null?+e:e;default:return e}}function hl(r){let e={};return r.childNodes.forEach(t=>{e[t.slot||"default"]=!0}),e}function dl(r,e,t,n,i,s){let c=class extends Ro{constructor(){super(r,t,i),this.$$p_d=e}static get observedAttributes(){return gr(e).map(l=>(e[l].attribute||l).toLowerCase())}};return gr(e).forEach(l=>{zt(c.prototype,l,{get(){return this.$$c&&l in this.$$c?this.$$c[l]:this.$$d[l]},set(u){var d;u=pr(l,u,e),this.$$d[l]=u;var g=this.$$c;if(g){var m=(d=lt(g,l))==null?void 0:d.get;m?g[l]=u:g.$set({[l]:u})}}})}),n.forEach(l=>{zt(c.prototype,l,{get(){var u;return(u=this.$$c)==null?void 0:u[l]}})}),r.element=c,c}var Vo=new TextEncoder;function fl(r){return[...new Uint8Array(r)].map(e=>e.toString(16).padStart(2,"0")).join("")}async function pl(r,e="SHA-256",t=1e5){let n=Date.now().toString(16);r||(r=Math.round(Math.random()*t));let i=await jo(n,r,e);return{algorithm:e,challenge:i,salt:n,signature:""}}async function jo(r,e,t){if(typeof crypto>"u"||!("subtle"in crypto)||!("digest"in crypto.subtle))throw new Error("Web Crypto is not available. Secure context is required (https://developer.mozilla.org/en-US/docs/Web/Security/Secure_Contexts).");return fl(await crypto.subtle.digest(t.toUpperCase(),Vo.encode(r+e)))}function gl(r,e,t="SHA-256",n=1e6,i=0){let s=new AbortController,c=Date.now();return{promise:(async()=>{for(let l=i;l<=n;l+=1){if(s.signal.aborted)return null;if(await jo(e,l,t)===r)return{number:l,took:Date.now()-c}}return null})(),controller:s}}function Ki(){try{return Intl.DateTimeFormat().resolvedOptions().timeZone}catch{}}function vl(r){let e=atob(r),t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}function ml(r,e=12){let t=new Uint8Array(e);for(let n=0;n<e;n++)t[n]=r%256,r=Math.floor(r/256);return t}async function bl(r,e="",t=1e6,n=0){let i="AES-GCM",s=new AbortController,c=Date.now(),l=async()=>{for(let g=n;g<=t;g+=1){if(s.signal.aborted||!u||!d)return null;try{let m=await crypto.subtle.decrypt({name:i,iv:ml(g)},u,d);if(m)return{clearText:new TextDecoder().decode(m),took:Date.now()-c}}catch{}}return null},u=null,d=null;try{d=vl(r);let g=await crypto.subtle.digest("SHA-256",Vo.encode(e));u=await crypto.subtle.importKey("raw",g,i,!1,["decrypt"])}catch{return{promise:Promise.reject(),controller:s}}return{promise:l(),controller:s}}var A=(r=>(r.CODE="code",r.ERROR="error",r.VERIFIED="verified",r.VERIFYING="verifying",r.UNVERIFIED="unverified",r.EXPIRED="expired",r))(A||{}),Q=(r=>(r.ERROR="error",r.LOADING="loading",r.PLAYING="playing",r.PAUSED="paused",r.READY="ready",r))(Q||{});globalThis.altchaPlugins=globalThis.altchaPlugins||[];globalThis.altchaI18n=globalThis.altchaI18n||{get:r=>fr(globalThis.altchaI18n.store)[r],set:(r,e)=>{Object.assign(fr(globalThis.altchaI18n.store),{[r]:e}),globalThis.altchaI18n.store.set(fr(globalThis.altchaI18n.store))},store:sl({})};var yl={ariaLinkLabel:"Visit Altcha.org",enterCode:"Enter code",enterCodeAria:"Enter code you hear. Press Space to play audio.",error:"Verification failed. Try again later.",expired:"Verification expired. Try again.",footer:'Protected by <a href="https://altcha.org/" target="_blank" aria-label="Visit Altcha.org">ALTCHA</a>',getAudioChallenge:"Get an audio challenge",label:"I'm not a robot",loading:"Loading...",reload:"Reload",verify:"Verify",verificationRequired:"Verification required!",verified:"Verified",verifying:"Verifying...",waitAlert:"Verifying... please wait."};globalThis.altchaI18n.set("en",yl);var Gr=(r,e)=>{let t=xa(()=>aa(e?.(),24));var n=xl();Fe(()=>{M(n,"width",a(t)),M(n,"height",a(t))}),U(r,n)};function wl(r,e){r.code==="Space"&&(r.preventDefault(),r.stopImmediatePropagation(),e())}function El(r,e){r.preventDefault(),e()}function Al(r,e,t,n,i,s,c,l){var u;[A.UNVERIFIED,A.ERROR,A.EXPIRED,A.CODE].includes(a(e))?t()!==!1&&((u=a(n))==null?void 0:u.reportValidity())===!1?w(i,!1):s()?c():l():w(i,!0)}var xl=Mr('<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" class="altcha-spinner"><path d="M12,1A11,11,0,1,0,23,12,11,11,0,0,0,12,1Zm0,19a8,8,0,1,1,8-8A8,8,0,0,1,12,20Z" fill="currentColor" opacity=".25"></path><path d="M12,4a8,8,0,0,1,7.89,6.7A1.53,1.53,0,0,0,21.38,12h0a1.5,1.5,0,0,0,1.48-1.75,11,11,0,0,0-21.72,0A1.5,1.5,0,0,0,2.62,12h0a1.53,1.53,0,0,0,1.49-1.3A8,8,0,0,1,12,4Z" fill="currentColor"></path></svg>'),$l=xe('<input type="hidden">'),Ol=xe('<div><a target="_blank" class="altcha-logo" aria-hidden="true"><svg width="22" height="22" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M2.33955 16.4279C5.88954 20.6586 12.1971 21.2105 16.4279 17.6604C18.4699 15.947 19.6548 13.5911 19.9352 11.1365L17.9886 10.4279C17.8738 12.5624 16.909 14.6459 15.1423 16.1284C11.7577 18.9684 6.71167 18.5269 3.87164 15.1423C1.03163 11.7577 1.4731 6.71166 4.8577 3.87164C8.24231 1.03162 13.2883 1.4731 16.1284 4.8577C16.9767 5.86872 17.5322 7.02798 17.804 8.2324L19.9522 9.01429C19.7622 7.07737 19.0059 5.17558 17.6604 3.57212C14.1104 -0.658624 7.80283 -1.21043 3.57212 2.33956C-0.658625 5.88958 -1.21046 12.1971 2.33955 16.4279Z" fill="currentColor"></path><path d="M3.57212 2.33956C1.65755 3.94607 0.496389 6.11731 0.12782 8.40523L2.04639 9.13961C2.26047 7.15832 3.21057 5.25375 4.8577 3.87164C8.24231 1.03162 13.2883 1.4731 16.1284 4.8577L13.8302 6.78606L19.9633 9.13364C19.7929 7.15555 19.0335 5.20847 17.6604 3.57212C14.1104 -0.658624 7.80283 -1.21043 3.57212 2.33956Z" fill="currentColor"></path><path d="M7 10H5C5 12.7614 7.23858 15 10 15C12.7614 15 15 12.7614 15 10H13C13 11.6569 11.6569 13 10 13C8.3431 13 7 11.6569 7 10Z" fill="currentColor"></path></svg></a></div>'),Cl=Mr('<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M12.8659 3.00017L22.3922 19.5002C22.6684 19.9785 22.5045 20.5901 22.0262 20.8662C21.8742 20.954 21.7017 21.0002 21.5262 21.0002H2.47363C1.92135 21.0002 1.47363 20.5525 1.47363 20.0002C1.47363 19.8246 1.51984 19.6522 1.60761 19.5002L11.1339 3.00017C11.41 2.52187 12.0216 2.358 12.4999 2.63414C12.6519 2.72191 12.7782 2.84815 12.8659 3.00017ZM10.9999 16.0002V18.0002H12.9999V16.0002H10.9999ZM10.9999 9.00017V14.0002H12.9999V9.00017H10.9999Z"></path></svg>'),kl=Mr('<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M15 7C15 6.44772 15.4477 6 16 6C16.5523 6 17 6.44772 17 7V17C17 17.5523 16.5523 18 16 18C15.4477 18 15 17.5523 15 17V7ZM7 7C7 6.44772 7.44772 6 8 6C8.55228 6 9 6.44772 9 7V17C9 17.5523 8.55228 18 8 18C7.44772 18 7 17.5523 7 17V7Z"></path></svg>'),Tl=Mr('<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M4 12H7C8.10457 12 9 12.8954 9 14V19C9 20.1046 8.10457 21 7 21H4C2.89543 21 2 20.1046 2 19V12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12V19C22 20.1046 21.1046 21 20 21H17C15.8954 21 15 20.1046 15 19V14C15 12.8954 15.8954 12 17 12H20C20 7.58172 16.4183 4 12 4C7.58172 4 4 7.58172 4 12Z"></path></svg>'),Ml=xe('<button type="button" class="altcha-code-challenge-audio"><!></button>'),Nl=xe("<audio hidden autoplay><source></audio>"),Fl=xe('<div class="altcha-code-challenge" role="dialog"><div class="altcha-code-challenge-arrow"></div> <form data-code-challenge-form="1"><img class="altcha-code-challenge-image" alt=""> <input type="text" autocomplete="off" name="code" class="altcha-code-challenge-input" required> <div class="altcha-code-challenge-buttons"><div class="altcha-code-challenge-buttons-left"><!> <button type="button" class="altcha-code-challenge-reload"><svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M2 12C2 17.5228 6.47715 22 12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2V4C16.4183 4 20 7.58172 20 12C20 16.4183 16.4183 20 12 20C7.58172 20 4 16.4183 4 12C4 9.25022 5.38734 6.82447 7.50024 5.38451L7.5 8H9.5V2L3.5 2V4L5.99918 3.99989C3.57075 5.82434 2 8.72873 2 12Z"></path></svg></button></div> <button type="submit" class="altcha-code-challenge-verify"><!> </button></div> <!></form></div>'),Sl=xe("<div><!></div>"),Ll=xe("<div><!></div>"),Il=xe('<div class="altcha-error"><svg width="14" height="14" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true"><path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12"></path></svg> <!></div>'),Dl=xe('<div class="altcha-footer"><div><!></div></div>'),_l=xe('<div class="altcha-anchor-arrow"></div>'),Bl=xe('<!> <div class="altcha"><div class="altcha-main"><div><!> <input type="checkbox"></div> <label class="altcha-label"><!></label> <!> <!> <!></div> <!> <!> <!></div>',1);function Rl(r,e){var t,n;ko(e,!0);let[i,s]=ll(),c=()=>al(ns,"$altchaI18nStore",i),l=$(e,"auto",7,void 0),u=$(e,"blockspam",7,void 0),d=$(e,"challengeurl",7,void 0),g=$(e,"challengejson",7,void 0),m=$(e,"credentials",7,void 0),b=$(e,"customfetch",7,void 0),y=$(e,"debug",7,!1),N=$(e,"delay",7,0),R=$(e,"disableautofocus",7,!1),K=$(e,"refetchonexpire",7,!0),q=$(e,"disablerefetchonexpire",23,()=>!K()),oe=$(e,"expire",7,void 0),T=$(e,"floating",7,void 0),$e=$(e,"floatinganchor",7,void 0),ee=$(e,"floatingoffset",7,void 0),P=$(e,"floatingpersist",7,!1),le=$(e,"hidefooter",7,!1),Oe=$(e,"hidelogo",7,!1),Rr=$(e,"id",7,void 0),er=$(e,"language",7,void 0),Qe=$(e,"name",7,"altcha"),et=$(e,"maxnumber",7,1e6),Nt=$(e,"mockerror",7,!1),je=$(e,"obfuscated",7,void 0),be=$(e,"overlay",7,void 0),Ft=$(e,"overlaycontent",7,void 0),tr=$(e,"plugins",7,void 0),tt=$(e,"sentinel",7,void 0),Ce=$(e,"spamfilter",7,!1),pt=$(e,"strings",7,void 0),pe=$(e,"test",7,!1),te=$(e,"verifyurl",7,void 0),gt=$(e,"workers",23,()=>Math.min(16,navigator.hardwareConcurrency||8)),St=$(e,"workerurl",7,void 0),{altchaI18n:rs}=globalThis,ns=rs.store,Un=["SHA-256","SHA-384","SHA-512"],is="https://altcha.org/",Pe=(o,h)=>{e.$$host.dispatchEvent(new CustomEvent(o,{detail:h}))},qn=(n=(t=document.documentElement.lang)==null?void 0:t.split("-"))==null?void 0:n[0],Vr=Pt(()=>{var o;return d()&&new URL(d(),location.origin).host.endsWith(".altcha.org")&&!!((o=d())!=null&&o.includes("apiKey=ckey_"))}),rr=Pt(()=>g()?oi(g()):void 0),os=Pt(()=>pt()?oi(pt()):{}),D=Pt(()=>({...Gn(c()),...a(os)})),zn=Pt(()=>`${Rr()||Qe()}_checkbox_${Math.round(Math.random()*1e8)}`),rt=I(null),Lt=I(!1),z=I(null),O=I(We(A.UNVERIFIED)),V=I(void 0),It=I(null),Ke=I(null),ce=I(null),jr=I(null),vt=I(null),L=I(null),Dt=I(null),nt=I(null),ke=null,H=I(null),it=I(!1),Ue=[],Pr=I(!1),Te=I(null);Yr(()=>{bs(a(nt))}),Yr(()=>{ys(a(O))}),ol(()=>{ss(),w(Dt,null),a(L)&&(a(L).removeEventListener("submit",ei),a(L).removeEventListener("reset",ti),a(L).removeEventListener("focusin",Qn),w(L,null)),ke&&(clearTimeout(ke),ke=null),document.removeEventListener("click",Yn),document.removeEventListener("scroll",Xn),window.removeEventListener("resize",ii)}),_o(()=>{var o;C("mounted","2.2.3"),C("workers",gt()),us(),C("plugins",Ue.length?Ue.map(h=>h.constructor.pluginName).join(", "):"none"),pe()&&C("using test mode"),oe()&&Kr(oe()),l()!==void 0&&C("auto",l()),T()!==void 0&&ci(T()),w(L,(o=a(V))==null?void 0:o.closest("form"),!0),a(L)&&(a(L).addEventListener("submit",ei,{capture:!0}),a(L).addEventListener("reset",ti),(l()==="onfocus"||P()==="focus")&&a(L).addEventListener("focusin",Qn)),be()&&ui(!0),l()==="onload"&&(je()?_t():Be()),a(Vr)&&(le()||Oe())&&C("Attributes hidefooter and hidelogo ignored because usage with free API Keys requires attribution."),requestAnimationFrame(()=>{Pe("load")})});function nr(o,h){return btoa(JSON.stringify({algorithm:o.algorithm,challenge:o.challenge,number:h.number,salt:o.salt,signature:o.signature,test:pe()?!0:void 0,took:h.took}))}function ss(){for(let o of Ue)o.destroy()}function Hn(){d()&&!q()&&a(O)===A.VERIFIED?Be():ot(A.EXPIRED,a(D).expired)}async function as(){if(Nt())throw C("mocking error"),new Error("Mocked error.");if(a(rr))return C("using provided json data"),si(a(rr).salt),a(rr);if(pe())return C("generating test challenge",{test:pe()}),pl(typeof pe()!="boolean"?+pe():void 0);{if(!d()&&a(L)){let f=a(L).getAttribute("action");f!=null&&f.includes("/form/")&&d(f+"/altcha")}if(!d())throw new Error("Attribute challengeurl not set.");C("fetching challenge from",d());let o={credentials:typeof m()=="boolean"?"include":m(),headers:Ce()!==!1?{"x-altcha-spam-filter":"1"}:{}},h=await Wn()(d(),o);if(!h||!(h instanceof Response))throw new Error("Custom fetch function did not return a response.");if(h.status!==200)throw new Error(`Server responded with ${h.status}.`);let p=h.headers.get("X-Altcha-Config"),v=await h.json();if(si(v.salt),p)try{let f=JSON.parse(p);f&&typeof f=="object"&&(f.verifyurl&&!f.verifyurl.startsWith("fn:")&&(f.verifyurl=Jn(f.verifyurl)),fi(f))}catch(f){C("unable to configure from X-Altcha-Config",f)}return v}}function ls(o){var h,p;let v=(h=a(L))==null?void 0:h.querySelector(typeof o=="string"?`input[name="${o}"]`:'input[type="email"]:not([data-no-spamfilter])');return((p=v?.value)==null?void 0:p.slice(v.value.indexOf("@")))||void 0}function Wn(){let o=fetch;if(b())if(C("using customfetch"),typeof b()=="string"){if(o=globalThis[b()]||null,!o)throw new Error(`Custom fetch function not found: ${b()}`)}else o=b();return o}function Gn(o,h=[er()||"",document.documentElement.lang||"",...navigator.languages]){let p=Object.keys(o).map(f=>f.toLowerCase()),v=h.reduce((f,E)=>(E=E.toLowerCase(),f||(o[E]?E:null)||p.find(k=>E.split("-")[0]===k.split("-")[0])||null),null);return o[v||"en"]}function cs(){return Ce()==="ipAddress"?{blockedCountries:void 0,classifier:void 0,disableRules:void 0,email:!1,expectedCountries:void 0,expectedLanguages:void 0,fields:!1,ipAddress:void 0,text:void 0,timeZone:void 0}:typeof Ce()=="object"?Ce():{blockedCountries:void 0,classifier:void 0,disableRules:void 0,email:void 0,expectedCountries:void 0,expectedLanguages:void 0,fields:void 0,ipAddress:void 0,text:void 0,timeZone:void 0}}function Zn(o){var h;return[...((h=a(L))==null?void 0:h.querySelectorAll(o!=null&&o.length?o.map(p=>`input[name="${p}"]`).join(", "):'input[type="text"]:not([data-no-spamfilter]), textarea:not([data-no-spamfilter])'))||[]].reduce((p,v)=>{let f=v.name,E=v.value;return f&&E&&(p[f]=/\n/.test(E)?E.replace(new RegExp("(?<!\\r)\\n","g"),`\r
`):E),p},{})}function Jn(o,h){let p=new URL(d()||location.origin),v=new URL(o,p);if(v.search||(v.search=p.search),h)for(let f in h)h[f]!==void 0&&h[f]!==null&&v.searchParams.set(f,h[f]);return v.toString()}function us(){let o=tr()!==void 0?tr().split(","):void 0;for(let h of globalThis.altchaPlugins)(!o||o.includes(h.pluginName))&&Ue.push(new h({el:a(V),clarify:_t,dispatch:Pe,getConfiguration:pi,getFloatingAnchor:gi,getState:vi,log:C,reset:ot,solve:di,setState:Me,setFloatingAnchor:mi,verify:Be}))}function C(...o){(y()||o.some(h=>h instanceof Error))&&console[o[0]instanceof Error?"error":"log"]("ALTCHA",`[name=${Qe()}]`,...o)}function hs(){w(H,Q.PAUSED,!0)}function ds(o){w(H,Q.ERROR,!0)}function fs(){w(H,Q.READY,!0)}function ps(){w(H,Q.LOADING,!0)}function gs(){w(H,Q.PLAYING,!0)}function vs(){w(H,Q.PAUSED,!0)}function ms(o){var h;if(o.preventDefault(),o.stopPropagation(),a(z)){let p=new FormData(o.target),v=String(p.get("code"));if((h=te())!=null&&h.startsWith("fn:")){let f=te().replace(/^fn:/,"");if(C(`calling ${f} function instead of verifyurl`),!(f in globalThis))throw new Error(`Global function "${f}" is undefined.`);return globalThis[f]({challenge:a(z).challenge,code:v,solution:a(z).solution})}w(it,!0),ai(nr(a(z).challenge,a(z).solution),v).then(({reason:f,verified:E})=>{E?(w(z,null),Me(A.VERIFIED),C("verified"),Wr().then(()=>{var k;(k=a(jr))==null||k.focus(),Pe("verified",{payload:a(Te)}),l()==="onsubmit"?li(a(Dt)):be()&&Bt()})):(ot(),w(nt,f||"Verification failed",!0))}).catch(f=>{w(z,null),Me(A.ERROR,f),C("sentinel verification failed:",f)}).finally(()=>{w(it,!1)})}}function Yn(o){var h;let p=o.target;T()&&p&&!a(V).contains(p)&&(a(O)===A.VERIFIED&&P()===!1||a(O)===A.VERIFIED&&P()==="focus"&&!((h=a(L))!=null&&h.matches(":focus-within"))||l()==="off"&&a(O)===A.UNVERIFIED)&&Bt()}function Xn(){T()&&a(O)!==A.UNVERIFIED&&Rt()}function bs(o){for(let h of Ue)typeof h.onErrorChange=="function"&&h.onErrorChange(a(nt))}function Qn(o){a(O)===A.UNVERIFIED?Be():T()&&P()==="focus"&&a(O)===A.VERIFIED&&ir()}function ei(o){var h;let p=o.target;p!=null&&p.hasAttribute("data-code-challenge-form")||(w(Dt,o.submitter,!0),a(L)&&l()==="onsubmit"?((h=a(Dt))==null||h.blur(),a(O)===A.UNVERIFIED?(o.preventDefault(),o.stopPropagation(),Be().then(()=>{li(a(Dt))})):a(O)!==A.VERIFIED&&(o.preventDefault(),o.stopPropagation(),a(O)===A.VERIFYING&&ri())):a(L)&&T()&&l()==="off"&&a(O)===A.UNVERIFIED&&(o.preventDefault(),o.stopPropagation(),ir()))}function ti(){ot()}function ri(){a(O)===A.VERIFYING&&a(D).waitAlert&&alert(a(D).waitAlert)}function ni(){a(Ke)?a(Ke).paused?(a(Ke).currentTime=0,a(Ke).play()):a(Ke).pause():(w(Pr,!0),requestAnimationFrame(()=>{var o;(o=a(Ke))==null||o.play()}))}function ys(o){for(let h of Ue)typeof h.onStateChange=="function"&&h.onStateChange(a(O));T()&&a(O)!==A.UNVERIFIED&&requestAnimationFrame(()=>{Rt()}),w(Lt,a(O)===A.VERIFIED),be()&&a(ce)&&(a(O)!==A.UNVERIFIED?ir():Bt())}function ii(){T()&&Rt()}function oi(o){return JSON.parse(o)}function si(o){var h;let p=new URLSearchParams((h=o.split("?"))==null?void 0:h[1]),v=p.get("expires")||p.get("expire");if(v){let f=new Date(+v*1e3),E=isNaN(f.getTime())?0:f.getTime()-Date.now();E>0&&Kr(E)}else ke&&(clearTimeout(ke),ke=null)}async function ws(o){if(!te())throw new Error("Attribute verifyurl not set.");C("requesting server verification from",te());let h={payload:o};if(Ce()!==!1){let{blockedCountries:f,classifier:E,disableRules:k,email:j,expectedLanguages:re,expectedCountries:W,fields:ue,ipAddress:qe,text:bt,timeZone:ar}=cs();h.blockedCountries=f,h.classifier=E,h.disableRules=k,h.email=j===!1?void 0:ls(j),h.expectedCountries=W,h.expectedLanguages=re||(qn?[qn]:void 0),h.fields=ue===!1?void 0:Zn(ue),h.ipAddress=qe===!1?void 0:qe||"auto",h.text=bt,h.timeZone=ar===!1?void 0:ar||Ki()}let p=await Wn()(te(),{body:JSON.stringify(h),headers:{"content-type":"application/json"},method:"POST"});if(!p||!(p instanceof Response))throw new Error("Custom fetch function did not return a response.");if(p.status!==200)throw new Error(`Server responded with ${p.status}.`);let v=await p.json();if(v!=null&&v.payload&&w(Te,v.payload,!0),Pe("serververification",v),u()&&v.classification==="BAD")throw new Error("SpamFilter returned negative classification.")}async function ai(o,h){if(!te())throw new Error("Attribute verifyurl not set.");C("requesting sentinel verification from",te());let p={code:h,payload:o};tt()&&(p.fields=tt().fields?Zn():void 0,p.timeZone=tt().timeZone?Ki():void 0);let v=await fetch(te(),{body:JSON.stringify(p),headers:{"content-type":"application/json"},method:"POST"});if(!v||!(v instanceof Response))throw new Error("Fetch function did not return a response.");if(v.status!==200)throw new Error(`Server responded with ${v.status}.`);let f=await v.json();return f!=null&&f.payload&&w(Te,f.payload,!0),Pe("sentinelverification",f),f}function li(o){var h;a(L)&&"requestSubmit"in a(L)?a(L).requestSubmit(o):(h=a(L))!=null&&h.reportValidity()&&(o?o.click():a(L).submit())}function Kr(o){C("expire",o),ke&&(clearTimeout(ke),ke=null),o<1?Hn():ke=setTimeout(Hn,o)}function ci(o){C("floating",o),T()!==o&&(a(V).style.left="",a(V).style.top=""),T(o===!0||o===""?"auto":o===!1||o==="false"?void 0:T()),T()?(l()||l("onsubmit"),document.addEventListener("scroll",Xn),document.addEventListener("click",Yn),window.addEventListener("resize",ii)):l()==="onsubmit"&&l(void 0)}function ui(o){var h,p;if(C("overlay",o),be(o),o){if(l()||l("onsubmit"),a(ce)&&a(V).parentElement&&a(ce).replaceWith(a(V).parentElement),(p=(h=a(V))==null?void 0:h.parentElement)!=null&&p.parentElement){w(ce,document.createElement("div"),!0),a(V).parentElement.parentElement.appendChild(a(ce));let v=document.createElement("div"),f=document.createElement("button");f.type="button",f.innerHTML="&times;",f.addEventListener("click",E=>{E.preventDefault(),ot()}),a(ce).classList.add("altcha-overlay-backdrop"),f.classList.add("altcha-overlay-close-button"),v.classList.add("altcha-overlay"),a(ce).append(v),v.append(f),Ft()&&v.append(...document.querySelectorAll(Ft())),v.append(a(V).parentElement)}}else a(ce)&&a(V).parentElement&&(a(ce).replaceWith(a(V).parentElement),a(V).style.display="block")}function hi(o){if(!o.algorithm)throw new Error("Invalid challenge. Property algorithm is missing.");if(o.signature===void 0)throw new Error("Invalid challenge. Property signature is missing.");if(!Un.includes(o.algorithm.toUpperCase()))throw new Error(`Unknown algorithm value. Allowed values: ${Un.join(", ")}`);if(!o.challenge||o.challenge.length<40)throw new Error("Challenge is too short. Min. 40 chars.");if(!o.salt||o.salt.length<10)throw new Error("Salt is too short. Min. 10 chars.")}async function di(o){let h=null,p=null;if("Worker"in window){try{h=Es(o,o.maxNumber||o.maxnumber||et()),w(rt,h.controller,!0),p=await h.promise}catch(v){C(v)}finally{w(rt,null)}if(p===null||p?.number!==void 0||"obfuscated"in o)return{data:o,solution:p}}if("obfuscated"in o){let v=await bl(o.obfuscated,o.key,o.maxNumber||o.maxnumber);return{data:o,solution:await v.promise}}h=gl(o.challenge,o.salt,o.algorithm,o.maxNumber||o.maxnumber||et()),w(rt,h.controller,!0);try{p=await h.promise}catch(v){C(v)}finally{w(rt,null)}return{data:o,solution:p}}function Es(o,h=typeof pe()=="number"?pe():o.maxNumber||o.maxnumber||et(),p=Math.ceil(gt())){let v=new AbortController,f=[];p=Math.min(16,h,Math.max(1,p));for(let k=0;k<p;k++)f.push(altchaCreateWorker(St()));let E=Math.ceil(h/p);return{promise:(async()=>{let k=await Promise.all(f.map((j,re)=>{let W=re*E;return v.signal.addEventListener("abort",()=>{j.postMessage({type:"abort"})}),new Promise(ue=>{j.addEventListener("message",qe=>{if(qe.data)for(let bt of f)bt!==j&&bt.postMessage({type:"abort"});ue(qe.data)}),j.postMessage({payload:o,max:W+E,start:W,type:"work"})})}));for(let j of f)j.terminate();return k.find(j=>!!j)||null})(),controller:v}}async function _t(){if(!je()){Me(A.ERROR);return}let o=Ue.find(h=>h.constructor.pluginName==="obfuscation");if(!o||!("clarify"in o)){Me(A.ERROR),C("Plugin `obfuscation` not found. Import `altcha/plugins/obfuscation` to load it.");return}if("clarify"in o&&typeof o.clarify=="function")return o.clarify()}function fi(o){o.obfuscated!==void 0&&je(o.obfuscated),o.auto!==void 0&&(l(o.auto),l()==="onload"&&(je()?_t():Be())),o.blockspam!==void 0&&u(!!o.blockspam),o.customfetch!==void 0&&b(o.customfetch),o.floatinganchor!==void 0&&$e(o.floatinganchor),o.delay!==void 0&&N(o.delay),o.floatingoffset!==void 0&&ee(o.floatingoffset),o.floating!==void 0&&ci(o.floating),o.expire!==void 0&&(Kr(o.expire),oe(o.expire)),o.challenge&&(g(typeof o.challenge=="string"?o.challenge:JSON.stringify(o.challenge)),hi(a(rr))),o.challengeurl!==void 0&&d(o.challengeurl),o.debug!==void 0&&y(!!o.debug),o.hidefooter!==void 0&&le(!!o.hidefooter),o.hidelogo!==void 0&&Oe(!!o.hidelogo),o.language!==void 0&&pt(Gn(c(),[o.language])),o.maxnumber!==void 0&&et(+o.maxnumber),o.mockerror!==void 0&&Nt(!!o.mockerror),o.name!==void 0&&Qe(o.name),o.overlaycontent!==void 0&&Ft(o.overlaycontent),o.overlay!==void 0&&ui(o.overlay),o.refetchonexpire!==void 0&&q(!o.refetchonexpire),o.disablerefetchonexpire!==void 0&&q(!o.disablerefetchonexpire),o.sentinel!==void 0&&typeof o.sentinel=="object"&&tt(o.sentinel),o.spamfilter!==void 0&&Ce(typeof o.spamfilter=="object"?o.spamfilter:!!o.spamfilter),o.strings&&pt(typeof o.strings=="string"?o.strings:JSON.stringify(o.strings)),o.test!==void 0&&pe(typeof o.test=="number"?o.test:!!o.test),o.verifyurl!==void 0&&te(o.verifyurl),o.workers!==void 0&&gt(+o.workers),o.workerurl!==void 0&&St(o.workerurl)}function pi(){return{auto:l(),blockspam:u(),challengeurl:d(),debug:y(),delay:N(),disableautofocus:R(),disablerefetchonexpire:q(),expire:oe(),floating:T(),floatinganchor:$e(),floatingoffset:ee(),hidefooter:le(),hidelogo:Oe(),name:Qe(),maxnumber:et(),mockerror:Nt(),obfuscated:je(),overlay:be(),refetchonexpire:!q(),spamfilter:Ce(),strings:a(D),test:pe(),verifyurl:te(),workers:gt(),workerurl:St()}}function gi(){return a(vt)}function As(o){return Ue.find(h=>h.constructor.pluginName===o)}function vi(){return a(O)}function Bt(){a(V).style.display="none",be()&&a(ce)&&(a(ce).style.display="none")}function Rt(o=20){var h;if(a(V))if(a(vt)||w(vt,($e()?document.querySelector($e()):(h=a(L))==null?void 0:h.querySelector('input[type="submit"], button[type="submit"], button:not([type="button"]):not([type="reset"])'))||a(L),!0),a(vt)){let p=parseInt(ee(),10)||12,v=a(vt).getBoundingClientRect(),f=a(V).getBoundingClientRect(),E=document.documentElement.clientHeight,k=document.documentElement.clientWidth,j=T()==="auto"?v.bottom+f.height+p+o>E:T()==="top",re=Math.max(o,Math.min(k-o-f.width,v.left+v.width/2-f.width/2));if(j?a(V).style.top=`${v.top-(f.height+p)}px`:a(V).style.top=`${v.bottom+p}px`,a(V).style.left=`${re}px`,a(V).setAttribute("data-floating",j?"top":"bottom"),a(It)){let W=a(It).getBoundingClientRect();a(It).style.left=v.left-re+v.width/2-W.width/2+"px"}}else C("unable to find floating anchor element")}function ot(o=A.UNVERIFIED,h=null){a(rt)&&(a(rt).abort(),w(rt,null)),w(Lt,!1),w(Te,null),w(z,null),w(Pr,!1),w(H,null),Me(o,h)}function mi(o){w(vt,o,!0)}function Me(o,h=null){w(O,o,!0),w(nt,h,!0),Pe("statechange",{payload:a(Te),state:a(O)})}function ir(){a(V).style.display="block",T()&&Rt(),be()&&a(ce)&&(a(ce).style.display="flex")}async function Be(){return ot(A.VERIFYING),await new Promise(o=>setTimeout(o,N()||0)),as().then(o=>(hi(o),C("challenge",o),di(o))).then(({data:o,solution:h})=>{var p;if(C("solution",h),!h||o&&"challenge"in o&&!("clearText"in h)){if(h?.number!==void 0&&"challenge"in o)if(te()&&"codeChallenge"in o)["INPUT","BUTTON","SELECT","TEXTAREA"].includes(((p=document.activeElement)==null?void 0:p.tagName)||"")&&R()===!1&&document.activeElement.blur(),w(z,{challenge:o,solution:h},!0);else{if(te()&&tt()!==void 0)return ai(nr(o,h));if(te())return ws(nr(o,h));w(Te,nr(o,h),!0),C("payload",a(Te))}else if(a(O)!==A.EXPIRED)throw C("Unable to find a solution. Ensure that the 'maxnumber' attribute is greater than the randomly generated number."),new Error("Unexpected result returned.")}}).then(()=>{a(z)?(Me(A.CODE),Wr().then(()=>{Pe("code",{codeChallenge:a(z)})})):a(Te)&&(Me(A.VERIFIED),C("verified"),Wr().then(()=>{Pe("verified",{payload:a(Te)}),be()&&Bt()}))}).catch(o=>{C(o),Me(A.ERROR,o.message)})}var bi=Bl(),yi=jt(bi);Ya(yi,e,"default",{});var mt=Y(yi,2),Ur=J(mt),or=J(Ur);let wi;var Ei=J(or);{var xs=o=>{Gr(o)};X(Ei,o=>{a(O)===A.VERIFYING&&o(xs)})}var st=Y(Ei,2);Ri(st),st.__change=[Al,O,Ce,L,Lt,je,_t,Be],ur(st,o=>w(jr,o),()=>a(jr)),Z(or);var sr=Y(or,2),$s=J(sr);{var Os=o=>{var h=cr(),p=jt(h);at(p,()=>a(D).verified),U(o,h)},Cs=(o,h)=>{{var p=f=>{var E=cr(),k=jt(E);at(k,()=>a(D).verifying),U(f,E)},v=(f,E)=>{{var k=re=>{var W=cr(),ue=jt(W);at(ue,()=>a(D).verificationRequired),U(re,W)},j=re=>{var W=cr(),ue=jt(W);at(ue,()=>a(D).label),U(re,W)};X(f,re=>{a(O)===A.CODE?re(k):re(j,!1)},E)}};X(o,f=>{a(O)===A.VERIFYING?f(p):f(v,!1)},h)}};X($s,o=>{a(O)===A.VERIFIED?o(Os):o(Cs,!1)})}Z(sr);var Ai=Y(sr,2);{var ks=o=>{var h=$l();Ri(h),Fe(()=>{M(h,"name",Qe()),rl(h,a(Te))}),U(o,h)};X(Ai,o=>{a(O)===A.VERIFIED&&o(ks)})}var xi=Y(Ai,2);{var Ts=o=>{var h=Ol(),p=J(h);M(p,"href",is),Z(h),Fe(()=>M(p,"aria-label",a(D).ariaLinkLabel)),U(o,h)};X(xi,o=>{(Oe()!==!0||a(Vr))&&o(Ts)})}var Ms=Y(xi,2);{var Ns=o=>{var h=Fl(),p=Y(J(h),2),v=J(p),f=Y(v,2);qa(f,!R()),f.__keydown=[wl,ni];var E=Y(f,2),k=J(E),j=J(k);{var re=ye=>{var G=Ml();G.__click=ni;var lr=J(G);{var Vt=yt=>{Gr(yt,()=>20)},Rs=(yt,Vs)=>{{var js=wt=>{var qr=Cl();U(wt,qr)},Ps=(wt,qr)=>{{var Ks=Et=>{var zr=kl();U(Et,zr)},Us=Et=>{var zr=Tl();U(Et,zr)};X(wt,Et=>{a(H)===Q.PLAYING?Et(Ks):Et(Us,!1)},qr)}};X(yt,wt=>{a(H)===Q.ERROR?wt(js):wt(Ps,!1)},Vs)}};X(lr,yt=>{a(H)===Q.LOADING?yt(Vt):yt(Rs,!1)})}Z(G),Fe(()=>{M(G,"title",a(D).getAudioChallenge),G.disabled=a(H)===Q.LOADING||a(H)===Q.ERROR||a(it),M(G,"aria-label",a(H)===Q.LOADING?a(D).loading:a(D).getAudioChallenge)}),U(ye,G)};X(j,ye=>{a(z).challenge.codeChallenge.audio&&ye(re)})}var W=Y(j,2);W.__click=[El,Be],Z(k);var ue=Y(k,2),qe=J(ue);{var bt=ye=>{Gr(ye,()=>16)};X(qe,ye=>{a(it)&&ye(bt)})}var ar=Y(qe);Z(ue),Z(E);var _s=Y(E,2);{var Bs=ye=>{var G=Nl(),lr=J(G);Z(G),ur(G,Vt=>w(Ke,Vt),()=>a(Ke)),Fe(Vt=>M(lr,"src",Vt),[()=>Jn(a(z).challenge.codeChallenge.audio,{language:er()})]),ze("loadstart",G,ps),ze("canplay",G,fs),ze("pause",G,vs),ze("playing",G,gs),ze("ended",G,hs),ze("error",lr,ds),U(ye,G)};X(_s,ye=>{a(z).challenge.codeChallenge.audio&&a(Pr)&&ye(Bs)})}Z(p),Z(h),Fe(()=>{M(h,"aria-label",a(D).verificationRequired),M(v,"src",a(z).challenge.codeChallenge.image),M(f,"minlength",a(z).challenge.codeChallenge.length||1),M(f,"maxlength",a(z).challenge.codeChallenge.length),M(f,"placeholder",a(D).enterCode),M(f,"aria-label",a(H)===Q.LOADING?a(D).loading:a(H)===Q.PLAYING?"":a(D).enterCodeAria),M(f,"aria-live",a(H)?"assertive":"polite"),M(f,"aria-busy",a(H)===Q.LOADING),f.disabled=a(it),M(W,"aria-label",a(D).reload),M(W,"title",a(D).reload),W.disabled=a(it),ue.disabled=a(it),M(ue,"aria-label",a(D).verify),Ga(ar,` ${a(D).verify??""}`)}),ze("submit",p,ms,!0),U(o,h)};X(Ms,o=>{var h;(h=a(z))!=null&&h.challenge.codeChallenge&&o(Ns)})}Z(Ur);var $i=Y(Ur,2);{var Fs=o=>{var h=Il(),p=Y(J(h),2);{var v=E=>{var k=Sl(),j=J(k);at(j,()=>a(D).expired),Z(k),Fe(()=>M(k,"title",a(nt))),U(E,k)},f=E=>{var k=Ll(),j=J(k);at(j,()=>a(D).error),Z(k),Fe(()=>M(k,"title",a(nt))),U(E,k)};X(p,E=>{a(O)===A.EXPIRED?E(v):E(f,!1)})}Z(h),U(o,h)};X($i,o=>{(a(nt)||a(O)===A.EXPIRED)&&o(Fs)})}var Oi=Y($i,2);{var Ss=o=>{var h=Dl(),p=J(h),v=J(p);at(v,()=>a(D).footer),Z(p),Z(h),U(o,h)};X(Oi,o=>{a(D).footer&&(le()!==!0||a(Vr))&&o(Ss)})}var Ls=Y(Oi,2);{var Is=o=>{var h=_l();ur(h,p=>w(It,p),()=>a(It)),U(o,h)};X(Ls,o=>{T()&&o(Is)})}Z(mt),ur(mt,o=>w(V,o),()=>a(V)),Fe(o=>{M(mt,"data-state",a(O)),M(mt,"data-floating",T()),M(mt,"data-overlay",be()),wi=Qa(or,1,"altcha-checkbox",null,wi,o),M(st,"id",a(zn)),st.required=l()!=="onsubmit"&&(!T()||l()!=="off"),M(sr,"for",a(zn))},[()=>({"altcha-checkbox-verifying":a(O)===A.VERIFYING})]),ze("invalid",st,ri),il(st,()=>a(Lt),o=>w(Lt,o)),U(r,bi);var Ds=To({clarify:_t,configure:fi,getConfiguration:pi,getFloatingAnchor:gi,getPlugin:As,getState:vi,hide:Bt,repositionFloating:Rt,reset:ot,setFloatingAnchor:mi,setState:Me,show:ir,verify:Be,get auto(){return l()},set auto(o=void 0){l(o),x()},get blockspam(){return u()},set blockspam(o=void 0){u(o),x()},get challengeurl(){return d()},set challengeurl(o=void 0){d(o),x()},get challengejson(){return g()},set challengejson(o=void 0){g(o),x()},get credentials(){return m()},set credentials(o=void 0){m(o),x()},get customfetch(){return b()},set customfetch(o=void 0){b(o),x()},get debug(){return y()},set debug(o=!1){y(o),x()},get delay(){return N()},set delay(o=0){N(o),x()},get disableautofocus(){return R()},set disableautofocus(o=!1){R(o),x()},get refetchonexpire(){return K()},set refetchonexpire(o=!0){K(o),x()},get disablerefetchonexpire(){return q()},set disablerefetchonexpire(o=!K){q(o),x()},get expire(){return oe()},set expire(o=void 0){oe(o),x()},get floating(){return T()},set floating(o=void 0){T(o),x()},get floatinganchor(){return $e()},set floatinganchor(o=void 0){$e(o),x()},get floatingoffset(){return ee()},set floatingoffset(o=void 0){ee(o),x()},get floatingpersist(){return P()},set floatingpersist(o=!1){P(o),x()},get hidefooter(){return le()},set hidefooter(o=!1){le(o),x()},get hidelogo(){return Oe()},set hidelogo(o=!1){Oe(o),x()},get id(){return Rr()},set id(o=void 0){Rr(o),x()},get language(){return er()},set language(o=void 0){er(o),x()},get name(){return Qe()},set name(o="altcha"){Qe(o),x()},get maxnumber(){return et()},set maxnumber(o=1e6){et(o),x()},get mockerror(){return Nt()},set mockerror(o=!1){Nt(o),x()},get obfuscated(){return je()},set obfuscated(o=void 0){je(o),x()},get overlay(){return be()},set overlay(o=void 0){be(o),x()},get overlaycontent(){return Ft()},set overlaycontent(o=void 0){Ft(o),x()},get plugins(){return tr()},set plugins(o=void 0){tr(o),x()},get sentinel(){return tt()},set sentinel(o=void 0){tt(o),x()},get spamfilter(){return Ce()},set spamfilter(o=!1){Ce(o),x()},get strings(){return pt()},set strings(o=void 0){pt(o),x()},get test(){return pe()},set test(o=!1){pe(o),x()},get verifyurl(){return te()},set verifyurl(o=void 0){te(o),x()},get workers(){return gt()},set workers(o=Math.min(16,navigator.hardwareConcurrency||8)){gt(o),x()},get workerurl(){return St()},set workerurl(o=void 0){St(o),x()}});return s(),Ds}Wa(["change","keydown","click"]);customElements.define("altcha-widget",dl(Rl,{blockspam:{type:"Boolean"},debug:{type:"Boolean"},delay:{type:"Number"},disableautofocus:{type:"Boolean"},disablerefetchonexpire:{type:"Boolean"},expire:{type:"Number"},floatingoffset:{type:"Number"},hidefooter:{type:"Boolean"},hidelogo:{type:"Boolean"},maxnumber:{type:"Number"},mockerror:{type:"Boolean"},refetchonexpire:{type:"Boolean"},test:{type:"Boolean"},workers:{type:"Number"},auto:{},challengeurl:{},challengejson:{},credentials:{},customfetch:{},floating:{},floatinganchor:{},floatingpersist:{},id:{},language:{},name:{},obfuscated:{},overlay:{},overlaycontent:{},plugins:{},sentinel:{},spamfilter:{},strings:{},verifyurl:{},workerurl:{}},["default"],["clarify","configure","getConfiguration","getFloatingAnchor","getPlugin","getState","hide","repositionFloating","reset","setFloatingAnchor","setState","show","verify"],!1));var Po='@keyframes overlay-slidein{to{opacity:1;top:50%}}@keyframes altcha-spinner{to{transform:rotate(360deg)}}.altcha{background:var(--altcha-color-base, transparent);border:var(--altcha-border-width, 1px) solid var(--altcha-color-border, #a0a0a0);border-radius:var(--altcha-border-radius, 3px);color:var(--altcha-color-text, currentColor);display:flex;flex-direction:column;max-width:var(--altcha-max-width, 260px);position:relative}.altcha:focus-within{border-color:var(--altcha-color-border-focus, currentColor)}.altcha[data-floating]{background:var(--altcha-color-base, white);display:none;filter:drop-shadow(3px 3px 6px rgba(0,0,0,.2));left:-100%;position:fixed;top:-100%;width:var(--altcha-max-width, 260px);z-index:999999}.altcha[data-floating=top] .altcha-anchor-arrow{border-bottom-color:transparent;border-top-color:var(--altcha-color-border, #a0a0a0);bottom:-12px;top:auto}.altcha[data-floating=bottom]:focus-within::after{border-bottom-color:var(--altcha-color-border-focus, currentColor)}.altcha[data-floating=top]:focus-within::after{border-top-color:var(--altcha-color-border-focus, currentColor)}.altcha[data-floating]:not([data-state=unverified]){display:block}.altcha-anchor-arrow{border:6px solid transparent;border-bottom-color:var(--altcha-color-border, #a0a0a0);content:"";height:0;left:12px;position:absolute;top:-12px;width:0}.altcha-main{align-items:center;display:flex;gap:.4rem;padding:.7rem;position:relative}.altcha-code-challenge{background:var(--altcha-color-base, white);border:1px solid var(--altcha-color-border-focus, currentColor);border-radius:var(--altcha-border-radius, 3px);filter:drop-shadow(3px 3px 6px rgba(0,0,0,.2));padding:.5rem;position:absolute;top:2.5rem;z-index:9999999}.altcha-code-challenge>form{display:flex;flex-direction:column;gap:.5rem}.altcha-code-challenge-input{border:1px solid currentColor;border-radius:3px;box-sizing:border-box;outline:0;font-size:16px;padding:.35rem;width:220px}.altcha-code-challenge-input:focus{outline:2px solid color-mix(in srgb,var(--altcha-color-active, #1D1DC9) 20%,transparent)}.altcha-code-challenge-input:disabled{opacity:.7}.altcha-code-challenge-image{background-color:#fff;border:1px solid currentColor;border-radius:3px;box-sizing:border-box;object-fit:contain;height:50px;width:220px}.altcha-code-challenge-audio,.altcha-code-challenge-reload{background:color-mix(in srgb,var(--altcha-color-text, currentColor) 10%,transparent);border:0;border-radius:3px;color:var(--altcha-color-text, currentColor);cursor:pointer;display:flex;align-items:center;justify-content:center;padding:.35rem}.altcha-code-challenge-audio:disabled,.altcha-code-challenge-reload:disabled,.altcha-code-challenge-verify:disabled{opacity:.7;pointer-events:none}.altcha-code-challenge-audio>*,.altcha-code-challenge-reload>*{height:20px;width:20px}.altcha-code-challenge-buttons{display:flex;justify-content:space-between}.altcha-code-challenge-buttons-left{display:flex;gap:.25rem}.altcha-code-challenge-verify{align-items:center;background:var(--altcha-color-active, #1D1DC9);border:0;border-radius:3px;color:#fff;cursor:pointer;display:flex;gap:.5rem;font-size:100%;padding:.35rem 1rem}.altcha-code-challenge-arrow{border:6px solid transparent;border-bottom-color:var(--altcha-color-border, currentColor);content:"";height:0;left:.15rem;position:absolute;top:-12px;width:0}.altcha[data-floating=top] .altcha-code-challenge{top:-150px}.altcha[data-floating=top] .altcha-code-challenge-arrow{border-bottom-color:transparent;border-top-color:var(--altcha-color-border, currentColor);bottom:-12px;top:auto}.altcha-label{cursor:pointer;flex-grow:1}.altcha-logo{color:currentColor!important;opacity:.7}.altcha-footer:hover,.altcha-logo:hover{opacity:1}.altcha-error{color:var(--altcha-color-error-text, #f23939);display:flex;font-size:.85rem;gap:.3rem;padding:0 .7rem .7rem}.altcha-footer{align-items:center;background-color:var(--altcha-color-footer-bg, transparent);display:flex;font-size:.75rem;opacity:.7;justify-content:end;padding:.2rem .7rem}.altcha-footer a{color:currentColor}.altcha-checkbox{display:flex;align-items:center;justify-content:center;height:24px;position:relative;width:24px}.altcha-checkbox .altcha-spinner{bottom:0;left:0;position:absolute;right:0;top:0}.altcha-checkbox input{width:18px;height:18px;margin:0}.altcha-checkbox-verifying input{appearance:none;opacity:0;pointer-events:none}.altcha-spinner{animation:altcha-spinner .75s infinite linear;transform-origin:center}.altcha-overlay{--altcha-color-base:#fff;--altcha-color-text:#000;animation:overlay-slidein .5s forwards;display:flex;flex-direction:column;gap:.5rem;left:50%;width:260px;opacity:0;position:fixed;top:45%;transform:translate(-50%,-50%)}.altcha-overlay-backdrop{background:rgba(0,0,0,.5);bottom:0;display:none;left:0;position:fixed;right:0;top:0;z-index:99999999}.altcha-overlay-close-button{align-self:flex-end;background:0 0;border:0;padding:.25rem;cursor:pointer;color:currentColor;font-size:130%;line-height:1;opacity:.7}@media (max-height:450px){.altcha-overlay{top:10%!important;transform:translate(-50%,0)}}';function Ko(r,e="__altcha-css"){if(!document.getElementById(e)){let t=document.createElement("style");t.id=e,t.textContent=r,document.head.appendChild(t)}}globalThis.altchaCreateWorker=r=>r?new Worker(new URL(r)):new Hs;Ko(Po);Ko(Po);var Nr=()=>{};function Vl(r,e){return r!=r?e==e:r!==e||r!==null&&typeof r=="object"||typeof r=="function"}var vn=!1;function jl(r){var e=vn;try{return vn=!0,r()}finally{vn=e}}function Pl(r,e,t){if(r==null)return e(void 0),Nr;let n=jl(()=>r.subscribe(e,t));return n.unsubscribe?()=>n.unsubscribe():n}var Mt=[];function Kl(r,e=Nr){let t=null,n=new Set;function i(l){if(Vl(r,l)&&(r=l,t)){let u=!Mt.length;for(let d of n)d[1](),Mt.push(d,r);if(u){for(let d=0;d<Mt.length;d+=2)Mt[d][0](Mt[d+1]);Mt.length=0}}}function s(l){i(l(r))}function c(l,u=Nr){let d=[l,u];return n.add(d),n.size===1&&(t=e(i,s)||Nr),l(r),()=>{n.delete(d),n.size===0&&t&&(t(),t=null)}}return{set:i,update:s,subscribe:c}}function mn(r){let e;return Pl(r,t=>e=t)(),e}globalThis.altchaPlugins=globalThis.altchaPlugins||[];globalThis.altchaI18n=globalThis.altchaI18n||{get:r=>mn(globalThis.altchaI18n.store)[r],set:(r,e)=>{Object.assign(mn(globalThis.altchaI18n.store),{[r]:e}),globalThis.altchaI18n.store.set(mn(globalThis.altchaI18n.store))},store:Kl({})};var Ul={ariaLinkLabel:"Visitez Altcha.org",enterCode:"Entrez le code",enterCodeAria:"Entrez le code que vous entendez. Appuyez sur Espace pour \xE9couter l'audio.",error:"\xC9chec de la v\xE9rification. Essayez \xE0 nouveau plus tard.",expired:"La v\xE9rification a expir\xE9. Essayez \xE0 nouveau.",verificationRequired:"V\xE9rification requise !",footer:'Prot\xE9g\xE9 par <a href="https://altcha.org/" target="_blank" aria-label="Visitez Altcha.org">ALTCHA</a>',getAudioChallenge:"Obtenir un d\xE9fi audio",label:"Pas un robot",loading:"Chargement...",reload:"Recharger",verify:"V\xE9rifier",verified:"V\xE9rifi\xE9",verifying:"V\xE9rification en cours...",waitAlert:"V\xE9rification en cours... veuillez patienter."};globalThis.altchaI18n.set("fr-fr",Ul);var bn=class{constructor(e,t,n){this.eventTarget=e,this.eventName=t,this.eventOptions=n,this.unorderedBindings=new Set}connect(){this.eventTarget.addEventListener(this.eventName,this,this.eventOptions)}disconnect(){this.eventTarget.removeEventListener(this.eventName,this,this.eventOptions)}bindingConnected(e){this.unorderedBindings.add(e)}bindingDisconnected(e){this.unorderedBindings.delete(e)}handleEvent(e){let t=ql(e);for(let n of this.bindings){if(t.immediatePropagationStopped)break;n.handleEvent(t)}}hasBindings(){return this.unorderedBindings.size>0}get bindings(){return Array.from(this.unorderedBindings).sort((e,t)=>{let n=e.index,i=t.index;return n<i?-1:n>i?1:0})}};function ql(r){if("immediatePropagationStopped"in r)return r;{let{stopImmediatePropagation:e}=r;return Object.assign(r,{immediatePropagationStopped:!1,stopImmediatePropagation(){this.immediatePropagationStopped=!0,e.call(this)}})}}var yn=class{constructor(e){this.application=e,this.eventListenerMaps=new Map,this.started=!1}start(){this.started||(this.started=!0,this.eventListeners.forEach(e=>e.connect()))}stop(){this.started&&(this.started=!1,this.eventListeners.forEach(e=>e.disconnect()))}get eventListeners(){return Array.from(this.eventListenerMaps.values()).reduce((e,t)=>e.concat(Array.from(t.values())),[])}bindingConnected(e){this.fetchEventListenerForBinding(e).bindingConnected(e)}bindingDisconnected(e,t=!1){this.fetchEventListenerForBinding(e).bindingDisconnected(e),t&&this.clearEventListenersForBinding(e)}handleError(e,t,n={}){this.application.handleError(e,`Error ${t}`,n)}clearEventListenersForBinding(e){let t=this.fetchEventListenerForBinding(e);t.hasBindings()||(t.disconnect(),this.removeMappedEventListenerFor(e))}removeMappedEventListenerFor(e){let{eventTarget:t,eventName:n,eventOptions:i}=e,s=this.fetchEventListenerMapForEventTarget(t),c=this.cacheKey(n,i);s.delete(c),s.size==0&&this.eventListenerMaps.delete(t)}fetchEventListenerForBinding(e){let{eventTarget:t,eventName:n,eventOptions:i}=e;return this.fetchEventListener(t,n,i)}fetchEventListener(e,t,n){let i=this.fetchEventListenerMapForEventTarget(e),s=this.cacheKey(t,n),c=i.get(s);return c||(c=this.createEventListener(e,t,n),i.set(s,c)),c}createEventListener(e,t,n){let i=new bn(e,t,n);return this.started&&i.connect(),i}fetchEventListenerMapForEventTarget(e){let t=this.eventListenerMaps.get(e);return t||(t=new Map,this.eventListenerMaps.set(e,t)),t}cacheKey(e,t){let n=[e];return Object.keys(t).sort().forEach(i=>{n.push(`${t[i]?"":"!"}${i}`)}),n.join(":")}},zl={stop({event:r,value:e}){return e&&r.stopPropagation(),!0},prevent({event:r,value:e}){return e&&r.preventDefault(),!0},self({event:r,value:e,element:t}){return e?t===r.target:!0}},Hl=/^(?:(?:([^.]+?)\+)?(.+?)(?:\.(.+?))?(?:@(window|document))?->)?(.+?)(?:#([^:]+?))(?::(.+))?$/;function Wl(r){let t=r.trim().match(Hl)||[],n=t[2],i=t[3];return i&&!["keydown","keyup","keypress"].includes(n)&&(n+=`.${i}`,i=""),{eventTarget:Gl(t[4]),eventName:n,eventOptions:t[7]?Zl(t[7]):{},identifier:t[5],methodName:t[6],keyFilter:t[1]||i}}function Gl(r){if(r=="window")return window;if(r=="document")return document}function Zl(r){return r.split(":").reduce((e,t)=>Object.assign(e,{[t.replace(/^!/,"")]:!/^!/.test(t)}),{})}function Jl(r){if(r==window)return"window";if(r==document)return"document"}function Pn(r){return r.replace(/(?:[_-])([a-z0-9])/g,(e,t)=>t.toUpperCase())}function wn(r){return Pn(r.replace(/--/g,"-").replace(/__/g,"_"))}function Xt(r){return r.charAt(0).toUpperCase()+r.slice(1)}function Xo(r){return r.replace(/([A-Z])/g,(e,t)=>`-${t.toLowerCase()}`)}function Yl(r){return r.match(/[^\s]+/g)||[]}function Uo(r){return r!=null}function En(r,e){return Object.prototype.hasOwnProperty.call(r,e)}var qo=["meta","ctrl","alt","shift"],An=class{constructor(e,t,n,i){this.element=e,this.index=t,this.eventTarget=n.eventTarget||e,this.eventName=n.eventName||Xl(e)||Fr("missing event name"),this.eventOptions=n.eventOptions||{},this.identifier=n.identifier||Fr("missing identifier"),this.methodName=n.methodName||Fr("missing method name"),this.keyFilter=n.keyFilter||"",this.schema=i}static forToken(e,t){return new this(e.element,e.index,Wl(e.content),t)}toString(){let e=this.keyFilter?`.${this.keyFilter}`:"",t=this.eventTargetName?`@${this.eventTargetName}`:"";return`${this.eventName}${e}${t}->${this.identifier}#${this.methodName}`}shouldIgnoreKeyboardEvent(e){if(!this.keyFilter)return!1;let t=this.keyFilter.split("+");if(this.keyFilterDissatisfied(e,t))return!0;let n=t.filter(i=>!qo.includes(i))[0];return n?(En(this.keyMappings,n)||Fr(`contains unknown key filter: ${this.keyFilter}`),this.keyMappings[n].toLowerCase()!==e.key.toLowerCase()):!1}shouldIgnoreMouseEvent(e){if(!this.keyFilter)return!1;let t=[this.keyFilter];return!!this.keyFilterDissatisfied(e,t)}get params(){let e={},t=new RegExp(`^data-${this.identifier}-(.+)-param$`,"i");for(let{name:n,value:i}of Array.from(this.element.attributes)){let s=n.match(t),c=s&&s[1];c&&(e[Pn(c)]=Ql(i))}return e}get eventTargetName(){return Jl(this.eventTarget)}get keyMappings(){return this.schema.keyMappings}keyFilterDissatisfied(e,t){let[n,i,s,c]=qo.map(l=>t.includes(l));return e.metaKey!==n||e.ctrlKey!==i||e.altKey!==s||e.shiftKey!==c}},zo={a:()=>"click",button:()=>"click",form:()=>"submit",details:()=>"toggle",input:r=>r.getAttribute("type")=="submit"?"click":"input",select:()=>"change",textarea:()=>"input"};function Xl(r){let e=r.tagName.toLowerCase();if(e in zo)return zo[e](r)}function Fr(r){throw new Error(r)}function Ql(r){try{return JSON.parse(r)}catch{return r}}var xn=class{constructor(e,t){this.context=e,this.action=t}get index(){return this.action.index}get eventTarget(){return this.action.eventTarget}get eventOptions(){return this.action.eventOptions}get identifier(){return this.context.identifier}handleEvent(e){let t=this.prepareActionEvent(e);this.willBeInvokedByEvent(e)&&this.applyEventModifiers(t)&&this.invokeWithEvent(t)}get eventName(){return this.action.eventName}get method(){let e=this.controller[this.methodName];if(typeof e=="function")return e;throw new Error(`Action "${this.action}" references undefined method "${this.methodName}"`)}applyEventModifiers(e){let{element:t}=this.action,{actionDescriptorFilters:n}=this.context.application,{controller:i}=this.context,s=!0;for(let[c,l]of Object.entries(this.eventOptions))if(c in n){let u=n[c];s=s&&u({name:c,value:l,event:e,element:t,controller:i})}else continue;return s}prepareActionEvent(e){return Object.assign(e,{params:this.action.params})}invokeWithEvent(e){let{target:t,currentTarget:n}=e;try{this.method.call(this.controller,e),this.context.logDebugActivity(this.methodName,{event:e,target:t,currentTarget:n,action:this.methodName})}catch(i){let{identifier:s,controller:c,element:l,index:u}=this,d={identifier:s,controller:c,element:l,index:u,event:e};this.context.handleError(i,`invoking action "${this.action}"`,d)}}willBeInvokedByEvent(e){let t=e.target;return e instanceof KeyboardEvent&&this.action.shouldIgnoreKeyboardEvent(e)||e instanceof MouseEvent&&this.action.shouldIgnoreMouseEvent(e)?!1:this.element===t?!0:t instanceof Element&&this.element.contains(t)?this.scope.containsElement(t):this.scope.containsElement(this.action.element)}get controller(){return this.context.controller}get methodName(){return this.action.methodName}get element(){return this.scope.element}get scope(){return this.context.scope}},Sr=class{constructor(e,t){this.mutationObserverInit={attributes:!0,childList:!0,subtree:!0},this.element=e,this.started=!1,this.delegate=t,this.elements=new Set,this.mutationObserver=new MutationObserver(n=>this.processMutations(n))}start(){this.started||(this.started=!0,this.mutationObserver.observe(this.element,this.mutationObserverInit),this.refresh())}pause(e){this.started&&(this.mutationObserver.disconnect(),this.started=!1),e(),this.started||(this.mutationObserver.observe(this.element,this.mutationObserverInit),this.started=!0)}stop(){this.started&&(this.mutationObserver.takeRecords(),this.mutationObserver.disconnect(),this.started=!1)}refresh(){if(this.started){let e=new Set(this.matchElementsInTree());for(let t of Array.from(this.elements))e.has(t)||this.removeElement(t);for(let t of Array.from(e))this.addElement(t)}}processMutations(e){if(this.started)for(let t of e)this.processMutation(t)}processMutation(e){e.type=="attributes"?this.processAttributeChange(e.target,e.attributeName):e.type=="childList"&&(this.processRemovedNodes(e.removedNodes),this.processAddedNodes(e.addedNodes))}processAttributeChange(e,t){this.elements.has(e)?this.delegate.elementAttributeChanged&&this.matchElement(e)?this.delegate.elementAttributeChanged(e,t):this.removeElement(e):this.matchElement(e)&&this.addElement(e)}processRemovedNodes(e){for(let t of Array.from(e)){let n=this.elementFromNode(t);n&&this.processTree(n,this.removeElement)}}processAddedNodes(e){for(let t of Array.from(e)){let n=this.elementFromNode(t);n&&this.elementIsActive(n)&&this.processTree(n,this.addElement)}}matchElement(e){return this.delegate.matchElement(e)}matchElementsInTree(e=this.element){return this.delegate.matchElementsInTree(e)}processTree(e,t){for(let n of this.matchElementsInTree(e))t.call(this,n)}elementFromNode(e){if(e.nodeType==Node.ELEMENT_NODE)return e}elementIsActive(e){return e.isConnected!=this.element.isConnected?!1:this.element.contains(e)}addElement(e){this.elements.has(e)||this.elementIsActive(e)&&(this.elements.add(e),this.delegate.elementMatched&&this.delegate.elementMatched(e))}removeElement(e){this.elements.has(e)&&(this.elements.delete(e),this.delegate.elementUnmatched&&this.delegate.elementUnmatched(e))}},Lr=class{constructor(e,t,n){this.attributeName=t,this.delegate=n,this.elementObserver=new Sr(e,this)}get element(){return this.elementObserver.element}get selector(){return`[${this.attributeName}]`}start(){this.elementObserver.start()}pause(e){this.elementObserver.pause(e)}stop(){this.elementObserver.stop()}refresh(){this.elementObserver.refresh()}get started(){return this.elementObserver.started}matchElement(e){return e.hasAttribute(this.attributeName)}matchElementsInTree(e){let t=this.matchElement(e)?[e]:[],n=Array.from(e.querySelectorAll(this.selector));return t.concat(n)}elementMatched(e){this.delegate.elementMatchedAttribute&&this.delegate.elementMatchedAttribute(e,this.attributeName)}elementUnmatched(e){this.delegate.elementUnmatchedAttribute&&this.delegate.elementUnmatchedAttribute(e,this.attributeName)}elementAttributeChanged(e,t){this.delegate.elementAttributeValueChanged&&this.attributeName==t&&this.delegate.elementAttributeValueChanged(e,t)}};function ec(r,e,t){Qo(r,e).add(t)}function tc(r,e,t){Qo(r,e).delete(t),rc(r,e)}function Qo(r,e){let t=r.get(e);return t||(t=new Set,r.set(e,t)),t}function rc(r,e){let t=r.get(e);t!=null&&t.size==0&&r.delete(e)}var Ve=class{constructor(){this.valuesByKey=new Map}get keys(){return Array.from(this.valuesByKey.keys())}get values(){return Array.from(this.valuesByKey.values()).reduce((t,n)=>t.concat(Array.from(n)),[])}get size(){return Array.from(this.valuesByKey.values()).reduce((t,n)=>t+n.size,0)}add(e,t){ec(this.valuesByKey,e,t)}delete(e,t){tc(this.valuesByKey,e,t)}has(e,t){let n=this.valuesByKey.get(e);return n!=null&&n.has(t)}hasKey(e){return this.valuesByKey.has(e)}hasValue(e){return Array.from(this.valuesByKey.values()).some(n=>n.has(e))}getValuesForKey(e){let t=this.valuesByKey.get(e);return t?Array.from(t):[]}getKeysForValue(e){return Array.from(this.valuesByKey).filter(([t,n])=>n.has(e)).map(([t,n])=>t)}};var $n=class{constructor(e,t,n,i){this._selector=t,this.details=i,this.elementObserver=new Sr(e,this),this.delegate=n,this.matchesByElement=new Ve}get started(){return this.elementObserver.started}get selector(){return this._selector}set selector(e){this._selector=e,this.refresh()}start(){this.elementObserver.start()}pause(e){this.elementObserver.pause(e)}stop(){this.elementObserver.stop()}refresh(){this.elementObserver.refresh()}get element(){return this.elementObserver.element}matchElement(e){let{selector:t}=this;if(t){let n=e.matches(t);return this.delegate.selectorMatchElement?n&&this.delegate.selectorMatchElement(e,this.details):n}else return!1}matchElementsInTree(e){let{selector:t}=this;if(t){let n=this.matchElement(e)?[e]:[],i=Array.from(e.querySelectorAll(t)).filter(s=>this.matchElement(s));return n.concat(i)}else return[]}elementMatched(e){let{selector:t}=this;t&&this.selectorMatched(e,t)}elementUnmatched(e){let t=this.matchesByElement.getKeysForValue(e);for(let n of t)this.selectorUnmatched(e,n)}elementAttributeChanged(e,t){let{selector:n}=this;if(n){let i=this.matchElement(e),s=this.matchesByElement.has(n,e);i&&!s?this.selectorMatched(e,n):!i&&s&&this.selectorUnmatched(e,n)}}selectorMatched(e,t){this.delegate.selectorMatched(e,t,this.details),this.matchesByElement.add(t,e)}selectorUnmatched(e,t){this.delegate.selectorUnmatched(e,t,this.details),this.matchesByElement.delete(t,e)}},On=class{constructor(e,t){this.element=e,this.delegate=t,this.started=!1,this.stringMap=new Map,this.mutationObserver=new MutationObserver(n=>this.processMutations(n))}start(){this.started||(this.started=!0,this.mutationObserver.observe(this.element,{attributes:!0,attributeOldValue:!0}),this.refresh())}stop(){this.started&&(this.mutationObserver.takeRecords(),this.mutationObserver.disconnect(),this.started=!1)}refresh(){if(this.started)for(let e of this.knownAttributeNames)this.refreshAttribute(e,null)}processMutations(e){if(this.started)for(let t of e)this.processMutation(t)}processMutation(e){let t=e.attributeName;t&&this.refreshAttribute(t,e.oldValue)}refreshAttribute(e,t){let n=this.delegate.getStringMapKeyForAttribute(e);if(n!=null){this.stringMap.has(e)||this.stringMapKeyAdded(n,e);let i=this.element.getAttribute(e);if(this.stringMap.get(e)!=i&&this.stringMapValueChanged(i,n,t),i==null){let s=this.stringMap.get(e);this.stringMap.delete(e),s&&this.stringMapKeyRemoved(n,e,s)}else this.stringMap.set(e,i)}}stringMapKeyAdded(e,t){this.delegate.stringMapKeyAdded&&this.delegate.stringMapKeyAdded(e,t)}stringMapValueChanged(e,t,n){this.delegate.stringMapValueChanged&&this.delegate.stringMapValueChanged(e,t,n)}stringMapKeyRemoved(e,t,n){this.delegate.stringMapKeyRemoved&&this.delegate.stringMapKeyRemoved(e,t,n)}get knownAttributeNames(){return Array.from(new Set(this.currentAttributeNames.concat(this.recordedAttributeNames)))}get currentAttributeNames(){return Array.from(this.element.attributes).map(e=>e.name)}get recordedAttributeNames(){return Array.from(this.stringMap.keys())}},Ir=class{constructor(e,t,n){this.attributeObserver=new Lr(e,t,this),this.delegate=n,this.tokensByElement=new Ve}get started(){return this.attributeObserver.started}start(){this.attributeObserver.start()}pause(e){this.attributeObserver.pause(e)}stop(){this.attributeObserver.stop()}refresh(){this.attributeObserver.refresh()}get element(){return this.attributeObserver.element}get attributeName(){return this.attributeObserver.attributeName}elementMatchedAttribute(e){this.tokensMatched(this.readTokensForElement(e))}elementAttributeValueChanged(e){let[t,n]=this.refreshTokensForElement(e);this.tokensUnmatched(t),this.tokensMatched(n)}elementUnmatchedAttribute(e){this.tokensUnmatched(this.tokensByElement.getValuesForKey(e))}tokensMatched(e){e.forEach(t=>this.tokenMatched(t))}tokensUnmatched(e){e.forEach(t=>this.tokenUnmatched(t))}tokenMatched(e){this.delegate.tokenMatched(e),this.tokensByElement.add(e.element,e)}tokenUnmatched(e){this.delegate.tokenUnmatched(e),this.tokensByElement.delete(e.element,e)}refreshTokensForElement(e){let t=this.tokensByElement.getValuesForKey(e),n=this.readTokensForElement(e),i=ic(t,n).findIndex(([s,c])=>!oc(s,c));return i==-1?[[],[]]:[t.slice(i),n.slice(i)]}readTokensForElement(e){let t=this.attributeName,n=e.getAttribute(t)||"";return nc(n,e,t)}};function nc(r,e,t){return r.trim().split(/\s+/).filter(n=>n.length).map((n,i)=>({element:e,attributeName:t,content:n,index:i}))}function ic(r,e){let t=Math.max(r.length,e.length);return Array.from({length:t},(n,i)=>[r[i],e[i]])}function oc(r,e){return r&&e&&r.index==e.index&&r.content==e.content}var Dr=class{constructor(e,t,n){this.tokenListObserver=new Ir(e,t,this),this.delegate=n,this.parseResultsByToken=new WeakMap,this.valuesByTokenByElement=new WeakMap}get started(){return this.tokenListObserver.started}start(){this.tokenListObserver.start()}stop(){this.tokenListObserver.stop()}refresh(){this.tokenListObserver.refresh()}get element(){return this.tokenListObserver.element}get attributeName(){return this.tokenListObserver.attributeName}tokenMatched(e){let{element:t}=e,{value:n}=this.fetchParseResultForToken(e);n&&(this.fetchValuesByTokenForElement(t).set(e,n),this.delegate.elementMatchedValue(t,n))}tokenUnmatched(e){let{element:t}=e,{value:n}=this.fetchParseResultForToken(e);n&&(this.fetchValuesByTokenForElement(t).delete(e),this.delegate.elementUnmatchedValue(t,n))}fetchParseResultForToken(e){let t=this.parseResultsByToken.get(e);return t||(t=this.parseToken(e),this.parseResultsByToken.set(e,t)),t}fetchValuesByTokenForElement(e){let t=this.valuesByTokenByElement.get(e);return t||(t=new Map,this.valuesByTokenByElement.set(e,t)),t}parseToken(e){try{return{value:this.delegate.parseValueForToken(e)}}catch(t){return{error:t}}}},Cn=class{constructor(e,t){this.context=e,this.delegate=t,this.bindingsByAction=new Map}start(){this.valueListObserver||(this.valueListObserver=new Dr(this.element,this.actionAttribute,this),this.valueListObserver.start())}stop(){this.valueListObserver&&(this.valueListObserver.stop(),delete this.valueListObserver,this.disconnectAllActions())}get element(){return this.context.element}get identifier(){return this.context.identifier}get actionAttribute(){return this.schema.actionAttribute}get schema(){return this.context.schema}get bindings(){return Array.from(this.bindingsByAction.values())}connectAction(e){let t=new xn(this.context,e);this.bindingsByAction.set(e,t),this.delegate.bindingConnected(t)}disconnectAction(e){let t=this.bindingsByAction.get(e);t&&(this.bindingsByAction.delete(e),this.delegate.bindingDisconnected(t))}disconnectAllActions(){this.bindings.forEach(e=>this.delegate.bindingDisconnected(e,!0)),this.bindingsByAction.clear()}parseValueForToken(e){let t=An.forToken(e,this.schema);if(t.identifier==this.identifier)return t}elementMatchedValue(e,t){this.connectAction(t)}elementUnmatchedValue(e,t){this.disconnectAction(t)}},kn=class{constructor(e,t){this.context=e,this.receiver=t,this.stringMapObserver=new On(this.element,this),this.valueDescriptorMap=this.controller.valueDescriptorMap}start(){this.stringMapObserver.start(),this.invokeChangedCallbacksForDefaultValues()}stop(){this.stringMapObserver.stop()}get element(){return this.context.element}get controller(){return this.context.controller}getStringMapKeyForAttribute(e){if(e in this.valueDescriptorMap)return this.valueDescriptorMap[e].name}stringMapKeyAdded(e,t){let n=this.valueDescriptorMap[t];this.hasValue(e)||this.invokeChangedCallback(e,n.writer(this.receiver[e]),n.writer(n.defaultValue))}stringMapValueChanged(e,t,n){let i=this.valueDescriptorNameMap[t];e!==null&&(n===null&&(n=i.writer(i.defaultValue)),this.invokeChangedCallback(t,e,n))}stringMapKeyRemoved(e,t,n){let i=this.valueDescriptorNameMap[e];this.hasValue(e)?this.invokeChangedCallback(e,i.writer(this.receiver[e]),n):this.invokeChangedCallback(e,i.writer(i.defaultValue),n)}invokeChangedCallbacksForDefaultValues(){for(let{key:e,name:t,defaultValue:n,writer:i}of this.valueDescriptors)n!=null&&!this.controller.data.has(e)&&this.invokeChangedCallback(t,i(n),void 0)}invokeChangedCallback(e,t,n){let i=`${e}Changed`,s=this.receiver[i];if(typeof s=="function"){let c=this.valueDescriptorNameMap[e];try{let l=c.reader(t),u=n;n&&(u=c.reader(n)),s.call(this.receiver,l,u)}catch(l){throw l instanceof TypeError&&(l.message=`Stimulus Value "${this.context.identifier}.${c.name}" - ${l.message}`),l}}}get valueDescriptors(){let{valueDescriptorMap:e}=this;return Object.keys(e).map(t=>e[t])}get valueDescriptorNameMap(){let e={};return Object.keys(this.valueDescriptorMap).forEach(t=>{let n=this.valueDescriptorMap[t];e[n.name]=n}),e}hasValue(e){let t=this.valueDescriptorNameMap[e],n=`has${Xt(t.name)}`;return this.receiver[n]}},Tn=class{constructor(e,t){this.context=e,this.delegate=t,this.targetsByName=new Ve}start(){this.tokenListObserver||(this.tokenListObserver=new Ir(this.element,this.attributeName,this),this.tokenListObserver.start())}stop(){this.tokenListObserver&&(this.disconnectAllTargets(),this.tokenListObserver.stop(),delete this.tokenListObserver)}tokenMatched({element:e,content:t}){this.scope.containsElement(e)&&this.connectTarget(e,t)}tokenUnmatched({element:e,content:t}){this.disconnectTarget(e,t)}connectTarget(e,t){var n;this.targetsByName.has(t,e)||(this.targetsByName.add(t,e),(n=this.tokenListObserver)===null||n===void 0||n.pause(()=>this.delegate.targetConnected(e,t)))}disconnectTarget(e,t){var n;this.targetsByName.has(t,e)&&(this.targetsByName.delete(t,e),(n=this.tokenListObserver)===null||n===void 0||n.pause(()=>this.delegate.targetDisconnected(e,t)))}disconnectAllTargets(){for(let e of this.targetsByName.keys)for(let t of this.targetsByName.getValuesForKey(e))this.disconnectTarget(t,e)}get attributeName(){return`data-${this.context.identifier}-target`}get element(){return this.context.element}get scope(){return this.context.scope}};function Qt(r,e){let t=es(r);return Array.from(t.reduce((n,i)=>(ac(i,e).forEach(s=>n.add(s)),n),new Set))}function sc(r,e){return es(r).reduce((n,i)=>(n.push(...lc(i,e)),n),[])}function es(r){let e=[];for(;r;)e.push(r),r=Object.getPrototypeOf(r);return e.reverse()}function ac(r,e){let t=r[e];return Array.isArray(t)?t:[]}function lc(r,e){let t=r[e];return t?Object.keys(t).map(n=>[n,t[n]]):[]}var Mn=class{constructor(e,t){this.started=!1,this.context=e,this.delegate=t,this.outletsByName=new Ve,this.outletElementsByName=new Ve,this.selectorObserverMap=new Map,this.attributeObserverMap=new Map}start(){this.started||(this.outletDefinitions.forEach(e=>{this.setupSelectorObserverForOutlet(e),this.setupAttributeObserverForOutlet(e)}),this.started=!0,this.dependentContexts.forEach(e=>e.refresh()))}refresh(){this.selectorObserverMap.forEach(e=>e.refresh()),this.attributeObserverMap.forEach(e=>e.refresh())}stop(){this.started&&(this.started=!1,this.disconnectAllOutlets(),this.stopSelectorObservers(),this.stopAttributeObservers())}stopSelectorObservers(){this.selectorObserverMap.size>0&&(this.selectorObserverMap.forEach(e=>e.stop()),this.selectorObserverMap.clear())}stopAttributeObservers(){this.attributeObserverMap.size>0&&(this.attributeObserverMap.forEach(e=>e.stop()),this.attributeObserverMap.clear())}selectorMatched(e,t,{outletName:n}){let i=this.getOutlet(e,n);i&&this.connectOutlet(i,e,n)}selectorUnmatched(e,t,{outletName:n}){let i=this.getOutletFromMap(e,n);i&&this.disconnectOutlet(i,e,n)}selectorMatchElement(e,{outletName:t}){let n=this.selector(t),i=this.hasOutlet(e,t),s=e.matches(`[${this.schema.controllerAttribute}~=${t}]`);return n?i&&s&&e.matches(n):!1}elementMatchedAttribute(e,t){let n=this.getOutletNameFromOutletAttributeName(t);n&&this.updateSelectorObserverForOutlet(n)}elementAttributeValueChanged(e,t){let n=this.getOutletNameFromOutletAttributeName(t);n&&this.updateSelectorObserverForOutlet(n)}elementUnmatchedAttribute(e,t){let n=this.getOutletNameFromOutletAttributeName(t);n&&this.updateSelectorObserverForOutlet(n)}connectOutlet(e,t,n){var i;this.outletElementsByName.has(n,t)||(this.outletsByName.add(n,e),this.outletElementsByName.add(n,t),(i=this.selectorObserverMap.get(n))===null||i===void 0||i.pause(()=>this.delegate.outletConnected(e,t,n)))}disconnectOutlet(e,t,n){var i;this.outletElementsByName.has(n,t)&&(this.outletsByName.delete(n,e),this.outletElementsByName.delete(n,t),(i=this.selectorObserverMap.get(n))===null||i===void 0||i.pause(()=>this.delegate.outletDisconnected(e,t,n)))}disconnectAllOutlets(){for(let e of this.outletElementsByName.keys)for(let t of this.outletElementsByName.getValuesForKey(e))for(let n of this.outletsByName.getValuesForKey(e))this.disconnectOutlet(n,t,e)}updateSelectorObserverForOutlet(e){let t=this.selectorObserverMap.get(e);t&&(t.selector=this.selector(e))}setupSelectorObserverForOutlet(e){let t=this.selector(e),n=new $n(document.body,t,this,{outletName:e});this.selectorObserverMap.set(e,n),n.start()}setupAttributeObserverForOutlet(e){let t=this.attributeNameForOutletName(e),n=new Lr(this.scope.element,t,this);this.attributeObserverMap.set(e,n),n.start()}selector(e){return this.scope.outlets.getSelectorForOutletName(e)}attributeNameForOutletName(e){return this.scope.schema.outletAttributeForScope(this.identifier,e)}getOutletNameFromOutletAttributeName(e){return this.outletDefinitions.find(t=>this.attributeNameForOutletName(t)===e)}get outletDependencies(){let e=new Ve;return this.router.modules.forEach(t=>{let n=t.definition.controllerConstructor;Qt(n,"outlets").forEach(s=>e.add(s,t.identifier))}),e}get outletDefinitions(){return this.outletDependencies.getKeysForValue(this.identifier)}get dependentControllerIdentifiers(){return this.outletDependencies.getValuesForKey(this.identifier)}get dependentContexts(){let e=this.dependentControllerIdentifiers;return this.router.contexts.filter(t=>e.includes(t.identifier))}hasOutlet(e,t){return!!this.getOutlet(e,t)||!!this.getOutletFromMap(e,t)}getOutlet(e,t){return this.application.getControllerForElementAndIdentifier(e,t)}getOutletFromMap(e,t){return this.outletsByName.getValuesForKey(t).find(n=>n.element===e)}get scope(){return this.context.scope}get schema(){return this.context.schema}get identifier(){return this.context.identifier}get application(){return this.context.application}get router(){return this.application.router}},Nn=class{constructor(e,t){this.logDebugActivity=(n,i={})=>{let{identifier:s,controller:c,element:l}=this;i=Object.assign({identifier:s,controller:c,element:l},i),this.application.logDebugActivity(this.identifier,n,i)},this.module=e,this.scope=t,this.controller=new e.controllerConstructor(this),this.bindingObserver=new Cn(this,this.dispatcher),this.valueObserver=new kn(this,this.controller),this.targetObserver=new Tn(this,this),this.outletObserver=new Mn(this,this);try{this.controller.initialize(),this.logDebugActivity("initialize")}catch(n){this.handleError(n,"initializing controller")}}connect(){this.bindingObserver.start(),this.valueObserver.start(),this.targetObserver.start(),this.outletObserver.start();try{this.controller.connect(),this.logDebugActivity("connect")}catch(e){this.handleError(e,"connecting controller")}}refresh(){this.outletObserver.refresh()}disconnect(){try{this.controller.disconnect(),this.logDebugActivity("disconnect")}catch(e){this.handleError(e,"disconnecting controller")}this.outletObserver.stop(),this.targetObserver.stop(),this.valueObserver.stop(),this.bindingObserver.stop()}get application(){return this.module.application}get identifier(){return this.module.identifier}get schema(){return this.application.schema}get dispatcher(){return this.application.dispatcher}get element(){return this.scope.element}get parentElement(){return this.element.parentElement}handleError(e,t,n={}){let{identifier:i,controller:s,element:c}=this;n=Object.assign({identifier:i,controller:s,element:c},n),this.application.handleError(e,`Error ${t}`,n)}targetConnected(e,t){this.invokeControllerMethod(`${t}TargetConnected`,e)}targetDisconnected(e,t){this.invokeControllerMethod(`${t}TargetDisconnected`,e)}outletConnected(e,t,n){this.invokeControllerMethod(`${wn(n)}OutletConnected`,e,t)}outletDisconnected(e,t,n){this.invokeControllerMethod(`${wn(n)}OutletDisconnected`,e,t)}invokeControllerMethod(e,...t){let n=this.controller;typeof n[e]=="function"&&n[e](...t)}};function cc(r){return uc(r,hc(r))}function uc(r,e){let t=gc(r),n=dc(r.prototype,e);return Object.defineProperties(t.prototype,n),t}function hc(r){return Qt(r,"blessings").reduce((t,n)=>{let i=n(r);for(let s in i){let c=t[s]||{};t[s]=Object.assign(c,i[s])}return t},{})}function dc(r,e){return pc(e).reduce((t,n)=>{let i=fc(r,e,n);return i&&Object.assign(t,{[n]:i}),t},{})}function fc(r,e,t){let n=Object.getOwnPropertyDescriptor(r,t);if(!(n&&"value"in n)){let s=Object.getOwnPropertyDescriptor(e,t).value;return n&&(s.get=n.get||s.get,s.set=n.set||s.set),s}}var pc=typeof Object.getOwnPropertySymbols=="function"?r=>[...Object.getOwnPropertyNames(r),...Object.getOwnPropertySymbols(r)]:Object.getOwnPropertyNames,gc=(()=>{function r(t){function n(){return Reflect.construct(t,arguments,new.target)}return n.prototype=Object.create(t.prototype,{constructor:{value:n}}),Reflect.setPrototypeOf(n,t),n}function e(){let n=r(function(){this.a.call(this)});return n.prototype.a=function(){},new n}try{return e(),r}catch{return n=>class extends n{}}})();function vc(r){return{identifier:r.identifier,controllerConstructor:cc(r.controllerConstructor)}}var Fn=class{constructor(e,t){this.application=e,this.definition=vc(t),this.contextsByScope=new WeakMap,this.connectedContexts=new Set}get identifier(){return this.definition.identifier}get controllerConstructor(){return this.definition.controllerConstructor}get contexts(){return Array.from(this.connectedContexts)}connectContextForScope(e){let t=this.fetchContextForScope(e);this.connectedContexts.add(t),t.connect()}disconnectContextForScope(e){let t=this.contextsByScope.get(e);t&&(this.connectedContexts.delete(t),t.disconnect())}fetchContextForScope(e){let t=this.contextsByScope.get(e);return t||(t=new Nn(this,e),this.contextsByScope.set(e,t)),t}},Sn=class{constructor(e){this.scope=e}has(e){return this.data.has(this.getDataKey(e))}get(e){return this.getAll(e)[0]}getAll(e){let t=this.data.get(this.getDataKey(e))||"";return Yl(t)}getAttributeName(e){return this.data.getAttributeNameForKey(this.getDataKey(e))}getDataKey(e){return`${e}-class`}get data(){return this.scope.data}},Ln=class{constructor(e){this.scope=e}get element(){return this.scope.element}get identifier(){return this.scope.identifier}get(e){let t=this.getAttributeNameForKey(e);return this.element.getAttribute(t)}set(e,t){let n=this.getAttributeNameForKey(e);return this.element.setAttribute(n,t),this.get(e)}has(e){let t=this.getAttributeNameForKey(e);return this.element.hasAttribute(t)}delete(e){if(this.has(e)){let t=this.getAttributeNameForKey(e);return this.element.removeAttribute(t),!0}else return!1}getAttributeNameForKey(e){return`data-${this.identifier}-${Xo(e)}`}},In=class{constructor(e){this.warnedKeysByObject=new WeakMap,this.logger=e}warn(e,t,n){let i=this.warnedKeysByObject.get(e);i||(i=new Set,this.warnedKeysByObject.set(e,i)),i.has(t)||(i.add(t),this.logger.warn(n,e))}};function Dn(r,e){return`[${r}~="${e}"]`}var _n=class{constructor(e){this.scope=e}get element(){return this.scope.element}get identifier(){return this.scope.identifier}get schema(){return this.scope.schema}has(e){return this.find(e)!=null}find(...e){return e.reduce((t,n)=>t||this.findTarget(n)||this.findLegacyTarget(n),void 0)}findAll(...e){return e.reduce((t,n)=>[...t,...this.findAllTargets(n),...this.findAllLegacyTargets(n)],[])}findTarget(e){let t=this.getSelectorForTargetName(e);return this.scope.findElement(t)}findAllTargets(e){let t=this.getSelectorForTargetName(e);return this.scope.findAllElements(t)}getSelectorForTargetName(e){let t=this.schema.targetAttributeForScope(this.identifier);return Dn(t,e)}findLegacyTarget(e){let t=this.getLegacySelectorForTargetName(e);return this.deprecate(this.scope.findElement(t),e)}findAllLegacyTargets(e){let t=this.getLegacySelectorForTargetName(e);return this.scope.findAllElements(t).map(n=>this.deprecate(n,e))}getLegacySelectorForTargetName(e){let t=`${this.identifier}.${e}`;return Dn(this.schema.targetAttribute,t)}deprecate(e,t){if(e){let{identifier:n}=this,i=this.schema.targetAttribute,s=this.schema.targetAttributeForScope(n);this.guide.warn(e,`target:${t}`,`Please replace ${i}="${n}.${t}" with ${s}="${t}". The ${i} attribute is deprecated and will be removed in a future version of Stimulus.`)}return e}get guide(){return this.scope.guide}},Bn=class{constructor(e,t){this.scope=e,this.controllerElement=t}get element(){return this.scope.element}get identifier(){return this.scope.identifier}get schema(){return this.scope.schema}has(e){return this.find(e)!=null}find(...e){return e.reduce((t,n)=>t||this.findOutlet(n),void 0)}findAll(...e){return e.reduce((t,n)=>[...t,...this.findAllOutlets(n)],[])}getSelectorForOutletName(e){let t=this.schema.outletAttributeForScope(this.identifier,e);return this.controllerElement.getAttribute(t)}findOutlet(e){let t=this.getSelectorForOutletName(e);if(t)return this.findElement(t,e)}findAllOutlets(e){let t=this.getSelectorForOutletName(e);return t?this.findAllElements(t,e):[]}findElement(e,t){return this.scope.queryElements(e).filter(i=>this.matchesElement(i,e,t))[0]}findAllElements(e,t){return this.scope.queryElements(e).filter(i=>this.matchesElement(i,e,t))}matchesElement(e,t,n){let i=e.getAttribute(this.scope.schema.controllerAttribute)||"";return e.matches(t)&&i.split(" ").includes(n)}},Rn=class r{constructor(e,t,n,i){this.targets=new _n(this),this.classes=new Sn(this),this.data=new Ln(this),this.containsElement=s=>s.closest(this.controllerSelector)===this.element,this.schema=e,this.element=t,this.identifier=n,this.guide=new In(i),this.outlets=new Bn(this.documentScope,t)}findElement(e){return this.element.matches(e)?this.element:this.queryElements(e).find(this.containsElement)}findAllElements(e){return[...this.element.matches(e)?[this.element]:[],...this.queryElements(e).filter(this.containsElement)]}queryElements(e){return Array.from(this.element.querySelectorAll(e))}get controllerSelector(){return Dn(this.schema.controllerAttribute,this.identifier)}get isDocumentScope(){return this.element===document.documentElement}get documentScope(){return this.isDocumentScope?this:new r(this.schema,document.documentElement,this.identifier,this.guide.logger)}},Vn=class{constructor(e,t,n){this.element=e,this.schema=t,this.delegate=n,this.valueListObserver=new Dr(this.element,this.controllerAttribute,this),this.scopesByIdentifierByElement=new WeakMap,this.scopeReferenceCounts=new WeakMap}start(){this.valueListObserver.start()}stop(){this.valueListObserver.stop()}get controllerAttribute(){return this.schema.controllerAttribute}parseValueForToken(e){let{element:t,content:n}=e;return this.parseValueForElementAndIdentifier(t,n)}parseValueForElementAndIdentifier(e,t){let n=this.fetchScopesByIdentifierForElement(e),i=n.get(t);return i||(i=this.delegate.createScopeForElementAndIdentifier(e,t),n.set(t,i)),i}elementMatchedValue(e,t){let n=(this.scopeReferenceCounts.get(t)||0)+1;this.scopeReferenceCounts.set(t,n),n==1&&this.delegate.scopeConnected(t)}elementUnmatchedValue(e,t){let n=this.scopeReferenceCounts.get(t);n&&(this.scopeReferenceCounts.set(t,n-1),n==1&&this.delegate.scopeDisconnected(t))}fetchScopesByIdentifierForElement(e){let t=this.scopesByIdentifierByElement.get(e);return t||(t=new Map,this.scopesByIdentifierByElement.set(e,t)),t}},jn=class{constructor(e){this.application=e,this.scopeObserver=new Vn(this.element,this.schema,this),this.scopesByIdentifier=new Ve,this.modulesByIdentifier=new Map}get element(){return this.application.element}get schema(){return this.application.schema}get logger(){return this.application.logger}get controllerAttribute(){return this.schema.controllerAttribute}get modules(){return Array.from(this.modulesByIdentifier.values())}get contexts(){return this.modules.reduce((e,t)=>e.concat(t.contexts),[])}start(){this.scopeObserver.start()}stop(){this.scopeObserver.stop()}loadDefinition(e){this.unloadIdentifier(e.identifier);let t=new Fn(this.application,e);this.connectModule(t);let n=e.controllerConstructor.afterLoad;n&&n.call(e.controllerConstructor,e.identifier,this.application)}unloadIdentifier(e){let t=this.modulesByIdentifier.get(e);t&&this.disconnectModule(t)}getContextForElementAndIdentifier(e,t){let n=this.modulesByIdentifier.get(t);if(n)return n.contexts.find(i=>i.element==e)}proposeToConnectScopeForElementAndIdentifier(e,t){let n=this.scopeObserver.parseValueForElementAndIdentifier(e,t);n?this.scopeObserver.elementMatchedValue(n.element,n):console.error(`Couldn't find or create scope for identifier: "${t}" and element:`,e)}handleError(e,t,n){this.application.handleError(e,t,n)}createScopeForElementAndIdentifier(e,t){return new Rn(this.schema,e,t,this.logger)}scopeConnected(e){this.scopesByIdentifier.add(e.identifier,e);let t=this.modulesByIdentifier.get(e.identifier);t&&t.connectContextForScope(e)}scopeDisconnected(e){this.scopesByIdentifier.delete(e.identifier,e);let t=this.modulesByIdentifier.get(e.identifier);t&&t.disconnectContextForScope(e)}connectModule(e){this.modulesByIdentifier.set(e.identifier,e),this.scopesByIdentifier.getValuesForKey(e.identifier).forEach(n=>e.connectContextForScope(n))}disconnectModule(e){this.modulesByIdentifier.delete(e.identifier),this.scopesByIdentifier.getValuesForKey(e.identifier).forEach(n=>e.disconnectContextForScope(n))}},mc={controllerAttribute:"data-controller",actionAttribute:"data-action",targetAttribute:"data-target",targetAttributeForScope:r=>`data-${r}-target`,outletAttributeForScope:(r,e)=>`data-${r}-${e}-outlet`,keyMappings:Object.assign(Object.assign({enter:"Enter",tab:"Tab",esc:"Escape",space:" ",up:"ArrowUp",down:"ArrowDown",left:"ArrowLeft",right:"ArrowRight",home:"Home",end:"End",page_up:"PageUp",page_down:"PageDown"},Ho("abcdefghijklmnopqrstuvwxyz".split("").map(r=>[r,r]))),Ho("0123456789".split("").map(r=>[r,r])))};function Ho(r){return r.reduce((e,[t,n])=>Object.assign(Object.assign({},e),{[t]:n}),{})}var _r=class{constructor(e=document.documentElement,t=mc){this.logger=console,this.debug=!1,this.logDebugActivity=(n,i,s={})=>{this.debug&&this.logFormattedMessage(n,i,s)},this.element=e,this.schema=t,this.dispatcher=new yn(this),this.router=new jn(this),this.actionDescriptorFilters=Object.assign({},zl)}static start(e,t){let n=new this(e,t);return n.start(),n}async start(){await bc(),this.logDebugActivity("application","starting"),this.dispatcher.start(),this.router.start(),this.logDebugActivity("application","start")}stop(){this.logDebugActivity("application","stopping"),this.dispatcher.stop(),this.router.stop(),this.logDebugActivity("application","stop")}register(e,t){this.load({identifier:e,controllerConstructor:t})}registerActionOption(e,t){this.actionDescriptorFilters[e]=t}load(e,...t){(Array.isArray(e)?e:[e,...t]).forEach(i=>{i.controllerConstructor.shouldLoad&&this.router.loadDefinition(i)})}unload(e,...t){(Array.isArray(e)?e:[e,...t]).forEach(i=>this.router.unloadIdentifier(i))}get controllers(){return this.router.contexts.map(e=>e.controller)}getControllerForElementAndIdentifier(e,t){let n=this.router.getContextForElementAndIdentifier(e,t);return n?n.controller:null}handleError(e,t,n){var i;this.logger.error(`%s

%o

%o`,t,e,n),(i=window.onerror)===null||i===void 0||i.call(window,t,"",0,0,e)}logFormattedMessage(e,t,n={}){n=Object.assign({application:this},n),this.logger.groupCollapsed(`${e} #${t}`),this.logger.log("details:",Object.assign({},n)),this.logger.groupEnd()}};function bc(){return new Promise(r=>{document.readyState=="loading"?document.addEventListener("DOMContentLoaded",()=>r()):r()})}function yc(r){return Qt(r,"classes").reduce((t,n)=>Object.assign(t,wc(n)),{})}function wc(r){return{[`${r}Class`]:{get(){let{classes:e}=this;if(e.has(r))return e.get(r);{let t=e.getAttributeName(r);throw new Error(`Missing attribute "${t}"`)}}},[`${r}Classes`]:{get(){return this.classes.getAll(r)}},[`has${Xt(r)}Class`]:{get(){return this.classes.has(r)}}}}function Ec(r){return Qt(r,"outlets").reduce((t,n)=>Object.assign(t,Ac(n)),{})}function Wo(r,e,t){return r.application.getControllerForElementAndIdentifier(e,t)}function Go(r,e,t){let n=Wo(r,e,t);if(n||(r.application.router.proposeToConnectScopeForElementAndIdentifier(e,t),n=Wo(r,e,t),n))return n}function Ac(r){let e=wn(r);return{[`${e}Outlet`]:{get(){let t=this.outlets.find(r),n=this.outlets.getSelectorForOutletName(r);if(t){let i=Go(this,t,r);if(i)return i;throw new Error(`The provided outlet element is missing an outlet controller "${r}" instance for host controller "${this.identifier}"`)}throw new Error(`Missing outlet element "${r}" for host controller "${this.identifier}". Stimulus couldn't find a matching outlet element using selector "${n}".`)}},[`${e}Outlets`]:{get(){let t=this.outlets.findAll(r);return t.length>0?t.map(n=>{let i=Go(this,n,r);if(i)return i;console.warn(`The provided outlet element is missing an outlet controller "${r}" instance for host controller "${this.identifier}"`,n)}).filter(n=>n):[]}},[`${e}OutletElement`]:{get(){let t=this.outlets.find(r),n=this.outlets.getSelectorForOutletName(r);if(t)return t;throw new Error(`Missing outlet element "${r}" for host controller "${this.identifier}". Stimulus couldn't find a matching outlet element using selector "${n}".`)}},[`${e}OutletElements`]:{get(){return this.outlets.findAll(r)}},[`has${Xt(e)}Outlet`]:{get(){return this.outlets.has(r)}}}}function xc(r){return Qt(r,"targets").reduce((t,n)=>Object.assign(t,$c(n)),{})}function $c(r){return{[`${r}Target`]:{get(){let e=this.targets.find(r);if(e)return e;throw new Error(`Missing target element "${r}" for "${this.identifier}" controller`)}},[`${r}Targets`]:{get(){return this.targets.findAll(r)}},[`has${Xt(r)}Target`]:{get(){return this.targets.has(r)}}}}function Oc(r){let e=sc(r,"values"),t={valueDescriptorMap:{get(){return e.reduce((n,i)=>{let s=ts(i,this.identifier),c=this.data.getAttributeNameForKey(s.key);return Object.assign(n,{[c]:s})},{})}}};return e.reduce((n,i)=>Object.assign(n,Cc(i)),t)}function Cc(r,e){let t=ts(r,e),{key:n,name:i,reader:s,writer:c}=t;return{[i]:{get(){let l=this.data.get(n);return l!==null?s(l):t.defaultValue},set(l){l===void 0?this.data.delete(n):this.data.set(n,c(l))}},[`has${Xt(i)}`]:{get(){return this.data.has(n)||t.hasCustomDefaultValue}}}}function ts([r,e],t){return Nc({controller:t,token:r,typeDefinition:e})}function Br(r){switch(r){case Array:return"array";case Boolean:return"boolean";case Number:return"number";case Object:return"object";case String:return"string"}}function Yt(r){switch(typeof r){case"boolean":return"boolean";case"number":return"number";case"string":return"string"}if(Array.isArray(r))return"array";if(Object.prototype.toString.call(r)==="[object Object]")return"object"}function kc(r){let{controller:e,token:t,typeObject:n}=r,i=Uo(n.type),s=Uo(n.default),c=i&&s,l=i&&!s,u=!i&&s,d=Br(n.type),g=Yt(r.typeObject.default);if(l)return d;if(u)return g;if(d!==g){let m=e?`${e}.${t}`:t;throw new Error(`The specified default value for the Stimulus Value "${m}" must match the defined type "${d}". The provided default value of "${n.default}" is of type "${g}".`)}if(c)return d}function Tc(r){let{controller:e,token:t,typeDefinition:n}=r,s=kc({controller:e,token:t,typeObject:n}),c=Yt(n),l=Br(n),u=s||c||l;if(u)return u;let d=e?`${e}.${n}`:t;throw new Error(`Unknown value type "${d}" for "${t}" value`)}function Mc(r){let e=Br(r);if(e)return Zo[e];let t=En(r,"default"),n=En(r,"type"),i=r;if(t)return i.default;if(n){let{type:s}=i,c=Br(s);if(c)return Zo[c]}return r}function Nc(r){let{token:e,typeDefinition:t}=r,n=`${Xo(e)}-value`,i=Tc(r);return{type:i,key:n,name:Pn(n),get defaultValue(){return Mc(t)},get hasCustomDefaultValue(){return Yt(t)!==void 0},reader:Fc[i],writer:Jo[i]||Jo.default}}var Zo={get array(){return[]},boolean:!1,number:0,get object(){return{}},string:""},Fc={array(r){let e=JSON.parse(r);if(!Array.isArray(e))throw new TypeError(`expected value of type "array" but instead got value "${r}" of type "${Yt(e)}"`);return e},boolean(r){return!(r=="0"||String(r).toLowerCase()=="false")},number(r){return Number(r.replace(/_/g,""))},object(r){let e=JSON.parse(r);if(e===null||typeof e!="object"||Array.isArray(e))throw new TypeError(`expected value of type "object" but instead got value "${r}" of type "${Yt(e)}"`);return e},string(r){return r}},Jo={default:Sc,array:Yo,object:Yo};function Yo(r){return JSON.stringify(r)}function Sc(r){return`${r}`}var _e=class{constructor(e){this.context=e}static get shouldLoad(){return!0}static afterLoad(e,t){}get application(){return this.context.application}get scope(){return this.context.scope}get element(){return this.scope.element}get identifier(){return this.scope.identifier}get targets(){return this.scope.targets}get outlets(){return this.scope.outlets}get classes(){return this.scope.classes}get data(){return this.scope.data}initialize(){}connect(){}disconnect(){}dispatch(e,{target:t=this.element,detail:n={},prefix:i=this.identifier,bubbles:s=!0,cancelable:c=!0}={}){let l=i?`${i}:${e}`:e,u=new CustomEvent(l,{detail:n,bubbles:s,cancelable:c});return t.dispatchEvent(u),u}};_e.blessings=[yc,xc,Oc,Ec];_e.targets=[];_e.outlets=[];_e.values={};var Kn=_r.start();Kn.register("navigation",class extends _e{static get targets(){return["button"]}connect(){this.element.addEventListener("keydown",this.trapEscape.bind(this))}trapEscape(r){r.key==="Escape"&&this.close()}switch(){this.buttonTarget.getAttribute("aria-expanded")==="true"?this.buttonTarget.setAttribute("aria-expanded","false"):this.buttonTarget.setAttribute("aria-expanded","true")}close(){this.buttonTarget.setAttribute("aria-expanded","false"),this.buttonTarget.focus()}});Kn.register("profile",class extends _e{static get targets(){return["sectionNatural","sectionLegal","firstName","lastName","legalName","controlAddress"]}initialize(){this.switchAddressForNode(this.controlAddressTarget);let r=document.querySelector('input[name="entity_type"][checked]');this.switchEntityTypeForNode(r)}switchAddress(r){this.switchAddressForNode(r.target)}switchAddressForNode(r){let e=document.querySelector("#address");e.hidden=!r.checked}switchEntityType(r){this.switchEntityTypeForNode(r.target)}switchEntityTypeForNode(r){r.value==="natural"?(this.sectionNaturalTarget.hidden=!1,this.sectionLegalTarget.hidden=!0,this.firstNameTarget.required=!0,this.lastNameTarget.required=!0,this.legalNameTarget.required=!1,this.controlAddressTarget.checked=this.controlAddressTarget.defaultChecked,this.controlAddressTarget.hidden=!1):(this.sectionNaturalTarget.hidden=!0,this.sectionLegalTarget.hidden=!1,this.firstNameTarget.required=!1,this.lastNameTarget.required=!1,this.legalNameTarget.required=!0,this.controlAddressTarget.checked=!0,this.controlAddressTarget.hidden=!0),this.switchAddressForNode(this.controlAddressTarget)}});Kn.register("amount-selector",class extends _e{static get targets(){return["amount","radio","totalAmount"]}initialize(){let r=this.data.get("initialAmount");this.setAmount(r)}setAmount(r){let e=this.amountTarget;e.value=r,this.refreshTotalAmount()}select(r){let e=r.target;this.setAmount(e.dataset.value)}change(r){this.radioTargets.forEach(function(e){e.checked=!1}),this.refreshTotalAmount()}refreshTotalAmount(){if(this.totalAmountTarget){let r=parseInt(this.amountTarget.value,10),e=parseInt(this.data.get("countAccounts"),10);this.totalAmountTarget.innerHTML=r*e}}});})();
//# sourceMappingURL=application.js.map
