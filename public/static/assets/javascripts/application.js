(()=>{var Ps=Object.defineProperty,ji=r=>{throw TypeError(r)},Ks=(r,e,t)=>e in r?Ps(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,Te=(r,e,t)=>Ks(r,typeof e!="symbol"?e+"":e,t),Pi=(r,e,t)=>e.has(r)||ji("Cannot "+t),ue=(r,e,t)=>(Pi(r,e,"read from private field"),t?t.call(r):e.get(r)),xi=(r,e,t)=>e.has(r)?ji("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(r):e.set(r,t),$i=(r,e,t,n)=>(Pi(r,e,"write to private field"),n?n.call(r,t):e.set(r,t),t),Ki=`(function(){"use strict";const d=new TextEncoder;function p(e){return[...new Uint8Array(e)].map(t=>t.toString(16).padStart(2,"0")).join("")}async function b(e,t,r){if(typeof crypto>"u"||!("subtle"in crypto)||!("digest"in crypto.subtle))throw new Error("Web Crypto is not available. Secure context is required (https://developer.mozilla.org/en-US/docs/Web/Security/Secure_Contexts).");return p(await crypto.subtle.digest(r.toUpperCase(),d.encode(e+t)))}function w(e,t,r="SHA-256",n=1e6,s=0){const o=new AbortController,a=Date.now();return{promise:(async()=>{for(let c=s;c<=n;c+=1){if(o.signal.aborted)return null;if(await b(t,c,r)===e)return{number:c,took:Date.now()-a}}return null})(),controller:o}}function h(e){const t=atob(e),r=new Uint8Array(t.length);for(let n=0;n<t.length;n++)r[n]=t.charCodeAt(n);return r}function g(e,t=12){const r=new Uint8Array(t);for(let n=0;n<t;n++)r[n]=e%256,e=Math.floor(e/256);return r}async function m(e,t="",r=1e6,n=0){const s="AES-GCM",o=new AbortController,a=Date.now(),l=async()=>{for(let u=n;u<=r;u+=1){if(o.signal.aborted||!c||!y)return null;try{const f=await crypto.subtle.decrypt({name:s,iv:g(u)},c,y);if(f)return{clearText:new TextDecoder().decode(f),took:Date.now()-a}}catch{}}return null};let c=null,y=null;try{y=h(e);const u=await crypto.subtle.digest("SHA-256",d.encode(t));c=await crypto.subtle.importKey("raw",u,s,!1,["decrypt"])}catch{return{promise:Promise.reject(),controller:o}}return{promise:l(),controller:o}}let i;onmessage=async e=>{const{type:t,payload:r,start:n,max:s}=e.data;let o=null;if(t==="abort")i==null||i.abort(),i=void 0;else if(t==="work"){if("obfuscated"in r){const{key:a,obfuscated:l}=r||{};o=await m(l,a,s,n)}else{const{algorithm:a,challenge:l,salt:c}=r||{};o=w(l,c,a,s,n)}i=o.controller,o.promise.then(a=>{self.postMessage(a&&{...a,worker:!0})})}}})();
`,Oi=typeof self<"u"&&self.Blob&&new Blob([Ki],{type:"text/javascript;charset=utf-8"});function Us(r){let e;try{if(e=Oi&&(self.URL||self.webkitURL).createObjectURL(Oi),!e)throw"";let t=new Worker(e,{name:r?.name});return t.addEventListener("error",()=>{(self.URL||self.webkitURL).revokeObjectURL(e)}),t}catch{return new Worker("data:text/javascript;charset=utf-8,"+encodeURIComponent(Ki),{name:r?.name})}finally{e&&(self.URL||self.webkitURL).revokeObjectURL(e)}}var qs="5",Ci;typeof window<"u"&&((Ci=window.__svelte??(window.__svelte={})).v??(Ci.v=new Set)).add(qs);var zs=1,Ws=4,Hs=8,Gs=16,Zs=1,Js=2,nn="[",Ui="[!",qi="]",$t={},ae=Symbol(),Ys="http://www.w3.org/1999/xhtml",Xs=!1;function zi(r){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}var Wi=Array.isArray,Qs=Array.prototype.indexOf,ea=Array.from,dr=Object.keys,qt=Object.defineProperty,at=Object.getOwnPropertyDescriptor,ta=Object.getOwnPropertyDescriptors,ra=Object.prototype,na=Array.prototype,Hi=Object.getPrototypeOf,ki=Object.isExtensible,Ot=()=>{};function Gi(r){for(var e=0;e<r.length;e++)r[e]()}function ia(r,e,t=!1){return r===void 0?t?e():e:r}var we=2,Zi=4,yr=8,on=16,Be=32,ut=64,fr=128,de=256,pr=512,le=1024,Se=2048,ht=4096,Ct=8192,wr=16384,oa=32768,sn=65536,sa=1<<19,Ji=1<<20,Gr=1<<21,Kt=Symbol("$state"),Yi=Symbol("legacy props"),aa=Symbol("");function la(r){throw new Error("https://svelte.dev/e/effect_in_teardown")}function ca(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function ua(r){throw new Error("https://svelte.dev/e/effect_orphan")}function ha(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function da(){throw new Error("https://svelte.dev/e/hydration_failed")}function fa(r){throw new Error("https://svelte.dev/e/props_invalid_value")}function pa(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function ga(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function va(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}function Er(r){console.warn("https://svelte.dev/e/hydration_mismatch")}var R=!1;function xt(r){R=r}var B;function Ze(r){if(r===null)throw Er(),$t;return B=r}function kt(){return Ze(Xe(B))}function G(r){if(R){if(Xe(B)!==null)throw Er(),$t;B=r}}function ma(){for(var r=0,e=B;;){if(e.nodeType===8){var t=e.data;if(t===qi){if(r===0)return e;r-=1}else(t===nn||t===Ui)&&(r+=1)}var n=Xe(e);e.remove(),e=n}}var ba=!1;function He(r){if(typeof r!="object"||r===null||Kt in r)return r;let e=Hi(r);if(e!==ra&&e!==na)return r;var t=new Map,n=Wi(r),i=_(0),s=S,c=l=>{var u=S;Le(s);var d=l();return Le(u),d};return n&&t.set("length",_(r.length)),new Proxy(r,{defineProperty(l,u,d){(!("value"in d)||d.configurable===!1||d.enumerable===!1||d.writable===!1)&&pa();var f=t.get(u);return f===void 0?(f=c(()=>_(d.value)),t.set(u,f)):w(f,c(()=>He(d.value))),!0},deleteProperty(l,u){var d=t.get(u);if(d===void 0)u in l&&(t.set(u,c(()=>_(ae))),zr(i));else{if(n&&typeof u=="string"){var f=t.get("length"),v=Number(u);Number.isInteger(v)&&v<f.v&&w(f,v)}w(d,ae),zr(i)}return!0},get(l,u,d){var f;if(u===Kt)return r;var v=t.get(u),m=u in l;if(v===void 0&&(!m||(f=at(l,u))!=null&&f.writable)&&(v=c(()=>_(He(m?l[u]:ae))),t.set(u,v)),v!==void 0){var b=a(v);return b===ae?void 0:b}return Reflect.get(l,u,d)},getOwnPropertyDescriptor(l,u){var d=Reflect.getOwnPropertyDescriptor(l,u);if(d&&"value"in d){var f=t.get(u);f&&(d.value=a(f))}else if(d===void 0){var v=t.get(u),m=v?.v;if(v!==void 0&&m!==ae)return{enumerable:!0,configurable:!0,value:m,writable:!0}}return d},has(l,u){var d;if(u===Kt)return!0;var f=t.get(u),v=f!==void 0&&f.v!==ae||Reflect.has(l,u);if(f!==void 0||L!==null&&(!v||(d=at(l,u))!=null&&d.writable)){f===void 0&&(f=c(()=>_(v?He(l[u]):ae)),t.set(u,f));var m=a(f);if(m===ae)return!1}return v},set(l,u,d,f){var v,m=t.get(u),b=u in l;if(n&&u==="length")for(var F=d;F<m.v;F+=1){var j=t.get(F+"");j!==void 0?w(j,ae):F in l&&(j=c(()=>_(ae)),t.set(F+"",j))}m===void 0?(!b||(v=at(l,u))!=null&&v.writable)&&(m=c(()=>_(void 0)),w(m,c(()=>He(d))),t.set(u,m)):(b=m.v!==ae,w(m,c(()=>He(d))));var P=Reflect.getOwnPropertyDescriptor(l,u);if(P!=null&&P.set&&P.set.call(f,d),!b){if(n&&typeof u=="string"){var k=t.get("length"),ie=Number(u);Number.isInteger(ie)&&ie>=k.v&&w(k,ie+1)}zr(i)}return!0},ownKeys(l){a(i);var u=Reflect.ownKeys(l).filter(v=>{var m=t.get(v);return m===void 0||m.v!==ae});for(var[d,f]of t)f.v!==ae&&!(d in l)&&u.push(d);return u},setPrototypeOf(){ga()}})}function zr(r,e=1){w(r,r.v+e)}var Ti,Xi,Qi,eo;function Zr(){if(Ti===void 0){Ti=window,Xi=/Firefox/.test(navigator.userAgent);var r=Element.prototype,e=Node.prototype,t=Text.prototype;Qi=at(e,"firstChild").get,eo=at(e,"nextSibling").get,ki(r)&&(r.__click=void 0,r.__className=void 0,r.__attributes=null,r.__style=void 0,r.__e=void 0),ki(t)&&(t.__t=void 0)}}function Ar(r=""){return document.createTextNode(r)}function ge(r){return Qi.call(r)}function Xe(r){return eo.call(r)}function Z(r,e){if(!R)return ge(r);var t=ge(B);return t===null&&(t=B.appendChild(Ar())),Ze(t),t}function Vt(r,e){if(!R){var t=ge(r);return t instanceof Comment&&t.data===""?Xe(t):t}return B}function J(r,e=1,t=!1){let n=R?B:r;for(var i;e--;)i=n,n=Xe(n);if(!R)return n;var s=n?.nodeType;if(t&&s!==3){var c=Ar();return n===null?i?.after(c):n.before(c),Ze(c),c}return Ze(n),n}function ya(r){r.textContent=""}function to(r){return r===this.v}function ro(r,e){return r!=r?e==e:r!==e||r!==null&&typeof r=="object"||typeof r=="function"}function an(r){return!ro(r,this.v)}function xr(r){var e=we|Se,t=S!==null&&(S.f&we)!==0?S:null;return L===null||t!==null&&(t.f&de)!==0?e|=de:L.f|=Ji,{ctx:ne,deps:null,effects:null,equals:to,f:e,fn:r,reactions:null,rv:0,v:null,wv:0,parent:t??L}}function jt(r){let e=xr(r);return vo(e),e}function wa(r){let e=xr(r);return e.equals=an,e}function no(r){var e=r.effects;if(e!==null){r.effects=null;for(var t=0;t<e.length;t+=1)Je(e[t])}}function Ea(r){for(var e=r.parent;e!==null;){if((e.f&we)===0)return e;e=e.parent}return null}function io(r){var e,t=L;Ye(Ea(r));try{no(r),e=wo(r)}finally{Ye(t)}return e}function oo(r){var e=io(r),t=(Ge||(r.f&de)!==0)&&r.deps!==null?ht:le;Ee(r,t),r.equals(e)||(r.v=e,r.wv=bo())}function Aa(r){L===null&&S===null&&ua(),S!==null&&(S.f&de)!==0&&L===null&&ca(),Gt&&la()}function xa(r,e){var t=e.last;t===null?e.last=e.first=r:(t.next=r,r.prev=t,e.last=r)}function dt(r,e,t,n=!0){var i=L,s={ctx:ne,deps:null,nodes_start:null,nodes_end:null,f:r|Se,first:null,fn:e,last:null,next:null,parent:i,prev:null,teardown:null,transitions:null,wv:0};if(t)try{dn(s),s.f|=oa}catch(u){throw Je(s),u}else e!==null&&Or(s);var c=t&&s.deps===null&&s.first===null&&s.nodes_start===null&&s.teardown===null&&(s.f&(Ji|fr))===0;if(!c&&n&&(i!==null&&xa(s,i),S!==null&&(S.f&we)!==0)){var l=S;(l.effects??(l.effects=[])).push(s)}return s}function ln(r){let e=dt(yr,null,!1);return Ee(e,le),e.teardown=r,e}function Jr(r){Aa();var e=L!==null&&(L.f&Be)!==0&&ne!==null&&!ne.m;if(e){var t=ne;(t.e??(t.e=[])).push({fn:r,effect:L,reaction:S})}else{var n=cn(r);return n}}function $a(r){let e=dt(ut,r,!0);return()=>{Je(e)}}function Oa(r){let e=dt(ut,r,!0);return(t={})=>new Promise(n=>{t.outro?Xr(e,()=>{Je(e),n(void 0)}):(Je(e),n(void 0))})}function cn(r){return dt(Zi,r,!1)}function un(r){return dt(yr,r,!0)}function Me(r,e=[],t=xr){let n=e.map(t);return so(()=>r(...n.map(a)))}function so(r,e=0){return dt(yr|on|e,r,!0)}function Yr(r,e=!0){return dt(yr|Be,r,!0,e)}function ao(r){var e=r.teardown;if(e!==null){let t=Gt,n=S;Ni(!0),Le(null);try{e.call(null)}finally{Ni(t),Le(n)}}}function lo(r,e=!1){var t=r.first;for(r.first=r.last=null;t!==null;){var n=t.next;(t.f&ut)!==0?t.parent=null:Je(t,e),t=n}}function Ca(r){for(var e=r.first;e!==null;){var t=e.next;(e.f&Be)===0&&Je(e),e=t}}function Je(r,e=!0){var t=!1;(e||(r.f&sa)!==0)&&r.nodes_start!==null&&(co(r.nodes_start,r.nodes_end),t=!0),lo(r,e&&!t),br(r,0),Ee(r,wr);var n=r.transitions;if(n!==null)for(let s of n)s.stop();ao(r);var i=r.parent;i!==null&&i.first!==null&&uo(r),r.next=r.prev=r.teardown=r.ctx=r.deps=r.fn=r.nodes_start=r.nodes_end=null}function co(r,e){for(;r!==null;){var t=r===e?null:Xe(r);r.remove(),r=t}}function uo(r){var e=r.parent,t=r.prev,n=r.next;t!==null&&(t.next=n),n!==null&&(n.prev=t),e!==null&&(e.first===r&&(e.first=n),e.last===r&&(e.last=t))}function Xr(r,e){var t=[];ho(r,t,!0),ka(t,()=>{Je(r),e&&e()})}function ka(r,e){var t=r.length;if(t>0){var n=()=>--t||e();for(var i of r)i.out(n)}else e()}function ho(r,e,t){if((r.f&Ct)===0){if(r.f^=Ct,r.transitions!==null)for(let c of r.transitions)(c.is_global||t)&&e.push(c);for(var n=r.first;n!==null;){var i=n.next,s=(n.f&sn)!==0||(n.f&Be)!==0;ho(n,e,s?t:!1),n=i}}}function Mi(r){fo(r,!0)}function fo(r,e){if((r.f&Ct)!==0){r.f^=Ct,(r.f&le)===0&&(r.f^=le),Zt(r)&&(Ee(r,Se),Or(r));for(var t=r.first;t!==null;){var n=t.next,i=(t.f&sn)!==0||(t.f&Be)!==0;fo(t,i?e:!1),t=n}if(r.transitions!==null)for(let s of r.transitions)(s.is_global||e)&&s.in()}}var Ta=typeof requestIdleCallback>"u"?r=>setTimeout(r,1):requestIdleCallback,zt=[],Wt=[];function po(){var r=zt;zt=[],Gi(r)}function go(){var r=Wt;Wt=[],Gi(r)}function hn(r){zt.length===0&&queueMicrotask(po),zt.push(r)}function Ma(r){Wt.length===0&&Ta(go),Wt.push(r)}function Na(){zt.length>0&&po(),Wt.length>0&&go()}var cr=!1,gr=!1,vr=null,lt=!1,Gt=!1;function Ni(r){Gt=r}var Ut=[],S=null,Ne=!1;function Le(r){S=r}var L=null;function Ye(r){L=r}var ve=null;function vo(r){S!==null&&S.f&Gr&&(ve===null?ve=[r]:ve.push(r))}var re=null,he=0,pe=null;function Fa(r){pe=r}var mo=1,mr=0,Ge=!1;function bo(){return++mo}function Zt(r){var e,t=r.f;if((t&Se)!==0)return!0;if((t&ht)!==0){var n=r.deps,i=(t&de)!==0;if(n!==null){var s,c,l=(t&pr)!==0,u=i&&L!==null&&!Ge,d=n.length;if(l||u){var f=r,v=f.parent;for(s=0;s<d;s++)c=n[s],(l||!((e=c?.reactions)!=null&&e.includes(f)))&&(c.reactions??(c.reactions=[])).push(f);l&&(f.f^=pr),u&&v!==null&&(v.f&de)===0&&(f.f^=de)}for(s=0;s<d;s++)if(c=n[s],Zt(c)&&oo(c),c.wv>r.wv)return!0}(!i||L!==null&&!Ge)&&Ee(r,le)}return!1}function Sa(r,e){for(var t=e;t!==null;){if((t.f&fr)!==0)try{t.fn(r);return}catch{t.f^=fr}t=t.parent}throw cr=!1,r}function Fi(r){return(r.f&wr)===0&&(r.parent===null||(r.parent.f&fr)===0)}function $r(r,e,t,n){if(cr){if(t===null&&(cr=!1),Fi(e))throw r;return}if(t!==null&&(cr=!0),Sa(r,e),Fi(e))throw r}function yo(r,e,t=!0){var n=r.reactions;if(n!==null)for(var i=0;i<n.length;i++){var s=n[i];ve!=null&&ve.includes(r)||((s.f&we)!==0?yo(s,e,!1):e===s&&(t?Ee(s,Se):(s.f&le)!==0&&Ee(s,ht),Or(s)))}}function wo(r){var e,t=re,n=he,i=pe,s=S,c=Ge,l=ve,u=ne,d=Ne,f=r.f;re=null,he=0,pe=null,Ge=(f&de)!==0&&(Ne||!lt||S===null),S=(f&(Be|ut))===0?r:null,ve=null,Si(r.ctx),Ne=!1,mr++,r.f|=Gr;try{var v=(0,r.fn)(),m=r.deps;if(re!==null){var b;if(br(r,he),m!==null&&he>0)for(m.length=he+re.length,b=0;b<re.length;b++)m[he+b]=re[b];else r.deps=m=re;if(!Ge)for(b=he;b<m.length;b++)((e=m[b]).reactions??(e.reactions=[])).push(r)}else m!==null&&he<m.length&&(br(r,he),m.length=he);if(Co()&&pe!==null&&!Ne&&m!==null&&(r.f&(we|ht|Se))===0)for(b=0;b<pe.length;b++)yo(pe[b],r);return s!==null&&s!==r&&(mr++,pe!==null&&(i===null?i=pe:i.push(...pe))),v}finally{re=t,he=n,pe=i,S=s,Ge=c,ve=l,Si(u),Ne=d,r.f^=Gr}}function La(r,e){let t=e.reactions;if(t!==null){var n=Qs.call(t,r);if(n!==-1){var i=t.length-1;i===0?t=e.reactions=null:(t[n]=t[i],t.pop())}}t===null&&(e.f&we)!==0&&(re===null||!re.includes(e))&&(Ee(e,ht),(e.f&(de|pr))===0&&(e.f^=pr),no(e),br(e,0))}function br(r,e){var t=r.deps;if(t!==null)for(var n=e;n<t.length;n++)La(r,t[n])}function dn(r){var e=r.f;if((e&wr)===0){Ee(r,le);var t=L,n=ne,i=lt;L=r,lt=!0;try{(e&on)!==0?Ca(r):lo(r),ao(r);var s=wo(r);r.teardown=typeof s=="function"?s:null,r.wv=mo;var c=r.deps,l;Xs&&ba&&r.f&Se}catch(u){$r(u,r,t,n||r.ctx)}finally{lt=i,L=t}}}function Ia(){try{ha()}catch(r){if(vr!==null)$r(r,vr,null);else throw r}}function Eo(){var r=lt;try{var e=0;for(lt=!0;Ut.length>0;){e++>1e3&&Ia();var t=Ut,n=t.length;Ut=[];for(var i=0;i<n;i++){var s=_a(t[i]);Da(s)}Ht.clear()}}finally{gr=!1,lt=r,vr=null}}function Da(r){var e=r.length;if(e!==0)for(var t=0;t<e;t++){var n=r[t];if((n.f&(wr|Ct))===0)try{Zt(n)&&(dn(n),n.deps===null&&n.first===null&&n.nodes_start===null&&(n.teardown===null?uo(n):n.fn=null))}catch(i){$r(i,n,null,n.ctx)}}}function Or(r){gr||(gr=!0,queueMicrotask(Eo));for(var e=vr=r;e.parent!==null;){e=e.parent;var t=e.f;if((t&(ut|Be))!==0){if((t&le)===0)return;e.f^=le}}Ut.push(e)}function _a(r){for(var e=[],t=r;t!==null;){var n=t.f,i=(n&(Be|ut))!==0,s=i&&(n&le)!==0;if(!s&&(n&Ct)===0){if((n&Zi)!==0)e.push(t);else if(i)t.f^=le;else try{Zt(t)&&dn(t)}catch(u){$r(u,t,null,t.ctx)}var c=t.first;if(c!==null){t=c;continue}}var l=t.parent;for(t=t.next;t===null&&l!==null;)t=l.next,l=l.parent}return e}function $(r){for(var e;;){if(Na(),Ut.length===0)return e;gr=!0,Eo()}}async function Wr(){await Promise.resolve(),$()}function a(r){var e=r.f,t=(e&we)!==0;if(S!==null&&!Ne){if(!(ve!=null&&ve.includes(r))){var n=S.deps;r.rv<mr&&(r.rv=mr,re===null&&n!==null&&n[he]===r?he++:re===null?re=[r]:(!Ge||!re.includes(r))&&re.push(r))}}else if(t&&r.deps===null&&r.effects===null){var i=r,s=i.parent;s!==null&&(s.f&de)===0&&(i.f^=de)}return t&&(i=r,Zt(i)&&oo(i)),Gt&&Ht.has(r)?Ht.get(r):r.v}function ct(r){var e=Ne;try{return Ne=!0,r()}finally{Ne=e}}var Ba=-7169;function Ee(r,e){r.f=r.f&Ba|e}var Ht=new Map;function Ao(r,e){var t={f:0,v:r,reactions:null,equals:to,rv:0,wv:0};return t}function _(r,e){let t=Ao(r);return vo(t),t}function fn(r,e=!1){let t=Ao(r);return e||(t.equals=an),t}function w(r,e,t=!1){S!==null&&!Ne&&Co()&&(S.f&(we|on))!==0&&!(ve!=null&&ve.includes(r))&&va();let n=t?He(e):e;return Ra(r,n)}function Ra(r,e){if(!r.equals(e)){var t=r.v;Gt?Ht.set(r,e):Ht.set(r,t),r.v=e,(r.f&we)!==0&&((r.f&Se)!==0&&io(r),Ee(r,(r.f&de)===0?le:ht)),r.wv=bo(),xo(r,Se),L!==null&&(L.f&le)!==0&&(L.f&(Be|ut))===0&&(pe===null?Fa([r]):pe.push(r))}return e}function xo(r,e){var t=r.reactions;if(t!==null)for(var n=t.length,i=0;i<n;i++){var s=t[i],c=s.f;(c&Se)===0&&(Ee(s,e),(c&(le|de))!==0&&((c&we)!==0?xo(s,ht):Or(s)))}}var ne=null;function Si(r){ne=r}function $o(r,e=!1,t){var n=ne={p:ne,c:null,d:!1,e:null,m:!1,s:r,x:null,l:null};ln(()=>{n.d=!0})}function Oo(r){let e=ne;if(e!==null){r!==void 0&&(e.x=r);let c=e.e;if(c!==null){var t=L,n=S;e.e=null;try{for(var i=0;i<c.length;i++){var s=c[i];Ye(s.effect),Le(s.reaction),cn(s.fn)}}finally{Ye(t),Le(n)}}ne=e.p,e.m=!0}return r||{}}function Co(){return!0}var Va=["touchstart","touchmove"];function ja(r){return Va.includes(r)}function Pa(r,e){if(e){let t=document.body;r.autofocus=!0,hn(()=>{document.activeElement===t&&r.focus()})}}var Li=!1;function ko(){Li||(Li=!0,document.addEventListener("reset",r=>{Promise.resolve().then(()=>{var e;if(!r.defaultPrevented)for(let t of r.target.elements)(e=t.__on_r)==null||e.call(t)})},{capture:!0}))}function To(r){var e=S,t=L;Le(null),Ye(null);try{return r()}finally{Le(e),Ye(t)}}function Ka(r,e,t,n=t){r.addEventListener(e,()=>To(t));let i=r.__on_r;i?r.__on_r=()=>{i(),n(!0)}:r.__on_r=()=>n(!0),ko()}var Mo=new Set,Qr=new Set;function Ua(r,e,t,n={}){function i(s){if(n.capture||Pt.call(e,s),!s.cancelBubble)return To(()=>t?.call(this,s))}return r.startsWith("pointer")||r.startsWith("touch")||r==="wheel"?hn(()=>{e.addEventListener(r,i,n)}):e.addEventListener(r,i,n),i}function ze(r,e,t,n,i){var s={capture:n,passive:i},c=Ua(r,e,t,s);(e===document.body||e===window||e===document)&&ln(()=>{e.removeEventListener(r,c,s)})}function qa(r){for(var e=0;e<r.length;e++)Mo.add(r[e]);for(var t of Qr)t(r)}function Pt(r){var e,t=this,n=t.ownerDocument,i=r.type,s=((e=r.composedPath)==null?void 0:e.call(r))||[],c=s[0]||r.target,l=0,u=r.__root;if(u){var d=s.indexOf(u);if(d!==-1&&(t===document||t===window)){r.__root=t;return}var f=s.indexOf(t);if(f===-1)return;d<=f&&(l=d)}if(c=s[l]||r.target,c!==t){qt(r,"currentTarget",{configurable:!0,get(){return c||n}});var v=S,m=L;Le(null),Ye(null);try{for(var b,F=[];c!==null;){var j=c.assignedSlot||c.parentNode||c.host||null;try{var P=c["__"+i];if(P!=null&&(!c.disabled||r.target===c))if(Wi(P)){var[k,...ie]=P;k.apply(c,[r,...ie])}else P.call(c,r)}catch(oe){b?F.push(oe):b=oe}if(r.cancelBubble||j===t||j===null)break;c=j}if(b){for(let oe of F)queueMicrotask(()=>{throw oe});throw b}}finally{r.__root=t,delete r.currentTarget,Le(v),Ye(m)}}}function pn(r){var e=document.createElement("template");return e.innerHTML=r,e.content}function Fe(r,e){var t=L;t.nodes_start===null&&(t.nodes_start=r,t.nodes_end=e)}function Ae(r,e){var t=(e&Zs)!==0,n=(e&Js)!==0,i,s=!r.startsWith("<!>");return()=>{if(R)return Fe(B,null),B;i===void 0&&(i=pn(s?r:"<!>"+r),t||(i=ge(i)));var c=n||Xi?document.importNode(i,!0):i.cloneNode(!0);if(t){var l=ge(c),u=c.lastChild;Fe(l,u)}else Fe(c,c);return c}}function Cr(r,e,t="svg"){var n=!r.startsWith("<!>"),i=`<${t}>${n?r:"<!>"+r}</${t}>`,s;return()=>{if(R)return Fe(B,null),B;if(!s){var c=pn(i),l=ge(c);s=ge(l)}var u=s.cloneNode(!0);return Fe(u,u),u}}function sr(){if(R)return Fe(B,null),B;var r=document.createDocumentFragment(),e=document.createComment(""),t=Ar();return r.append(e,t),Fe(e,t),r}function U(r,e){if(R){L.nodes_end=B,kt();return}r!==null&&r.before(e)}function za(r,e){var t=e==null?"":typeof e=="object"?e+"":e;t!==(r.__t??(r.__t=r.nodeValue))&&(r.__t=t,r.nodeValue=t+"")}function No(r,e){return Fo(r,e)}function Wa(r,e){Zr(),e.intro=e.intro??!1;let t=e.target,n=R,i=B;try{for(var s=ge(t);s&&(s.nodeType!==8||s.data!==nn);)s=Xe(s);if(!s)throw $t;xt(!0),Ze(s),kt();let c=Fo(r,{...e,anchor:s});if(B===null||B.nodeType!==8||B.data!==qi)throw Er(),$t;return xt(!1),c}catch(c){if(c===$t)return e.recover===!1&&da(),Zr(),ya(t),xt(!1),No(r,e);throw c}finally{xt(n),Ze(i)}}var Et=new Map;function Fo(r,{target:e,anchor:t,props:n={},events:i,context:s,intro:c=!0}){Zr();var l=new Set,u=v=>{for(var m=0;m<v.length;m++){var b=v[m];if(!l.has(b)){l.add(b);var F=ja(b);e.addEventListener(b,Pt,{passive:F});var j=Et.get(b);j===void 0?(document.addEventListener(b,Pt,{passive:F}),Et.set(b,1)):Et.set(b,j+1)}}};u(ea(Mo)),Qr.add(u);var d=void 0,f=Oa(()=>{var v=t??e.appendChild(Ar());return Yr(()=>{if(s){$o({});var m=ne;m.c=s}i&&(n.$$events=i),R&&Fe(v,null),d=r(v,n)||{},R&&(L.nodes_end=B),s&&Oo()}),()=>{var m;for(var b of l){e.removeEventListener(b,Pt);var F=Et.get(b);--F===0?(document.removeEventListener(b,Pt),Et.delete(b)):Et.set(b,F)}Qr.delete(u),v!==t&&((m=v.parentNode)==null||m.removeChild(v))}});return en.set(d,f),d}var en=new WeakMap;function Ha(r,e){let t=en.get(r);return t?(en.delete(r),t(e)):Promise.resolve()}function Y(r,e,[t,n]=[0,0]){R&&t===0&&kt();var i=r,s=null,c=null,l=ae,u=t>0?sn:0,d=!1;let f=(m,b=!0)=>{d=!0,v(b,m)},v=(m,b)=>{if(l===(l=m))return;let F=!1;if(R&&n!==-1){if(t===0){let P=i.data;P===nn?n=0:P===Ui?n=1/0:(n=parseInt(P.substring(1)),n!==n&&(n=l?1/0:-1))}let j=n>t;!!l===j&&(i=ma(),Ze(i),xt(!1),F=!0,n=-1)}l?(s?Mi(s):b&&(s=Yr(()=>b(i))),c&&Xr(c,()=>{c=null})):(c?Mi(c):b&&(c=Yr(()=>b(i,[t+1,n]))),s&&Xr(s,()=>{s=null})),F&&xt(!0)};so(()=>{d=!1,e(f),d||v(null,null)},u),R&&(i=B)}function st(r,e,t=!1,n=!1,i=!1){var s=r,c="";Me(()=>{var l=L;if(c===(c=e()??"")){R&&kt();return}if(l.nodes_start!==null&&(co(l.nodes_start,l.nodes_end),l.nodes_start=l.nodes_end=null),c!==""){if(R){B.data;for(var u=kt(),d=u;u!==null&&(u.nodeType!==8||u.data!=="");)d=u,u=Xe(u);if(u===null)throw Er(),$t;Fe(B,d),s=Ze(u);return}var f=c+"";t?f=`<svg>${f}</svg>`:n&&(f=`<math>${f}</math>`);var v=pn(f);if((t||n)&&(v=ge(v)),Fe(ge(v),v.lastChild),t||n)for(;ge(v);)s.before(ge(v));else s.before(v)}})}function Ga(r,e,t,n,i){var s;R&&kt();var c=(s=e.$$slots)==null?void 0:s[t],l=!1;c===!0&&(c=e.children,l=!0),c===void 0||c(r,l?()=>n:n)}var Ii=[...` 	
\r\f\xA0\v\uFEFF`];function Za(r,e,t){var n=""+r;if(t){for(var i in t)if(t[i])n=n?n+" "+i:i;else if(n.length)for(var s=i.length,c=0;(c=n.indexOf(i,c))>=0;){var l=c+s;(c===0||Ii.includes(n[c-1]))&&(l===n.length||Ii.includes(n[l]))?n=(c===0?"":n.substring(0,c))+n.substring(l+1):c=l}}return n===""?null:n}function Ja(r,e,t,n,i,s){var c=r.__className;if(R||c!==t||c===void 0){var l=Za(t,n,s);(!R||l!==r.getAttribute("class"))&&(l==null?r.removeAttribute("class"):r.className=l),r.__className=t}else if(s&&i!==s)for(var u in s){var d=!!s[u];(i==null||d!==!!i[u])&&r.classList.toggle(u,d)}return s}var Ya=Symbol("is custom element"),Xa=Symbol("is html");function Di(r){if(R){var e=!1,t=()=>{if(!e){if(e=!0,r.hasAttribute("value")){var n=r.value;N(r,"value",null),r.value=n}if(r.hasAttribute("checked")){var i=r.checked;N(r,"checked",null),r.checked=i}}};r.__on_r=t,Ma(t),ko()}}function Qa(r,e){var t=So(r);t.value===(t.value=e??void 0)||r.value===e&&(e!==0||r.nodeName!=="PROGRESS")||(r.value=e??"")}function N(r,e,t,n){var i=So(r);R&&(i[e]=r.getAttribute(e),e==="src"||e==="srcset"||e==="href"&&r.nodeName==="LINK")||i[e]!==(i[e]=t)&&(e==="loading"&&(r[aa]=t),t==null?r.removeAttribute(e):typeof t!="string"&&el(r).includes(e)?r[e]=t:r.setAttribute(e,t))}function So(r){return r.__attributes??(r.__attributes={[Ya]:r.nodeName.includes("-"),[Xa]:r.namespaceURI===Ys})}var _i=new Map;function el(r){var e=_i.get(r.nodeName);if(e)return e;_i.set(r.nodeName,e=[]);for(var t,n=r,i=Element.prototype;i!==n;){t=ta(n);for(var s in t)t[s].set&&e.push(s);n=Hi(n)}return e}function tl(r,e,t=e){Ka(r,"change",n=>{var i=n?r.defaultChecked:r.checked;t(i)}),(R&&r.defaultChecked!==r.checked||ct(e)==null)&&t(r.checked),un(()=>{var n=e();r.checked=!!n})}function Bi(r,e){return r===e||r?.[Kt]===e}function ar(r={},e,t,n){return cn(()=>{var i,s;return un(()=>{i=s,s=[],ct(()=>{r!==t(...s)&&(e(r,...s),i&&Bi(t(...i),r)&&e(null,...i))})}),()=>{hn(()=>{s&&Bi(t(...s),r)&&e(null,...s)})}}),r}function Lo(r){ne===null&&zi(),Jr(()=>{let e=ct(r);if(typeof e=="function")return e})}function rl(r){ne===null&&zi(),Lo(()=>()=>ct(r))}function Io(r,e,t){if(r==null)return e(void 0),Ot;let n=ct(()=>r.subscribe(e,t));return n.unsubscribe?()=>n.unsubscribe():n}var At=[];function nl(r,e=Ot){let t=null,n=new Set;function i(l){if(ro(r,l)&&(r=l,t)){let u=!At.length;for(let d of n)d[1](),At.push(d,r);if(u){for(let d=0;d<At.length;d+=2)At[d][0](At[d+1]);At.length=0}}}function s(l){i(l(r))}function c(l,u=Ot){let d=[l,u];return n.add(d),n.size===1&&(t=e(i,s)||Ot),l(r),()=>{n.delete(d),n.size===0&&t&&(t(),t=null)}}return{set:i,update:s,subscribe:c}}function ur(r){let e;return Io(r,t=>e=t)(),e}var lr=!1,tn=Symbol();function il(r,e,t){let n=t[e]??(t[e]={store:null,source:fn(void 0),unsubscribe:Ot});if(n.store!==r&&!(tn in t))if(n.unsubscribe(),n.store=r??null,r==null)n.source.v=void 0,n.unsubscribe=Ot;else{var i=!0;n.unsubscribe=Io(r,s=>{i?n.source.v=s:w(n.source,s)}),i=!1}return r&&tn in t?ur(r):a(n.source)}function ol(){let r={};function e(){ln(()=>{for(var t in r)r[t].unsubscribe();qt(r,tn,{enumerable:!1,value:!0})})}return[r,e]}function sl(r){var e=lr;try{return lr=!1,[r(),lr]}finally{lr=e}}function Ri(r){var e;return((e=r.ctx)==null?void 0:e.d)??!1}function C(r,e,t,n){var i,s=(t&zs)!==0,c=!0,l=(t&Hs)!==0,u=(t&Gs)!==0,d=!1,f;l?[f,d]=sl(()=>r[e]):f=r[e];var v=Kt in r||Yi in r,m=l&&(((i=at(r,e))==null?void 0:i.set)??(v&&e in r&&(K=>r[e]=K)))||void 0,b=n,F=!0,j=!1,P=()=>(j=!0,F&&(F=!1,u?b=ct(n):b=n),b);f===void 0&&n!==void 0&&(m&&c&&fa(),f=P(),m&&m(f));var k;if(k=()=>{var K=r[e];return K===void 0?P():(F=!0,j=!1,K)},(t&Ws)===0)return k;if(m){var ie=r.$$legacy;return function(K,$e){return arguments.length>0?((!$e||ie||d)&&m($e?k():K),K):k()}}var oe=!1,xe=fn(f),X=xr(()=>{var K=k(),$e=a(xe);return oe?(oe=!1,$e):xe.v=K});return l&&a(X),s||(X.equals=an),function(K,$e){if(arguments.length>0){let Ve=$e?a(X):l?He(K):K;if(!X.equals(Ve)){if(oe=!0,w(xe,Ve),j&&b!==void 0&&(b=Ve),Ri(X))return K;ct(()=>a(X))}return K}return Ri(X)?X.v:a(X)}}function al(r){return new rn(r)}var We,ye,rn=class{constructor(e){xi(this,We),xi(this,ye);var t,n=new Map,i=(c,l)=>{var u=fn(l);return n.set(c,u),u};let s=new Proxy({...e.props||{},$$events:{}},{get(c,l){return a(n.get(l)??i(l,Reflect.get(c,l)))},has(c,l){return l===Yi?!0:(a(n.get(l)??i(l,Reflect.get(c,l))),Reflect.has(c,l))},set(c,l,u){return w(n.get(l)??i(l,u),u),Reflect.set(c,l,u)}});$i(this,ye,(e.hydrate?Wa:No)(e.component,{target:e.target,anchor:e.anchor,props:s,context:e.context,intro:e.intro??!1,recover:e.recover})),(!((t=e?.props)!=null&&t.$$host)||e.sync===!1)&&$(),$i(this,We,s.$$events);for(let c of Object.keys(ue(this,ye)))c==="$set"||c==="$destroy"||c==="$on"||qt(this,c,{get(){return ue(this,ye)[c]},set(l){ue(this,ye)[c]=l},enumerable:!0});ue(this,ye).$set=c=>{Object.assign(s,c)},ue(this,ye).$destroy=()=>{Ha(ue(this,ye))}}$set(e){ue(this,ye).$set(e)}$on(e,t){ue(this,We)[e]=ue(this,We)[e]||[];let n=(...i)=>t.call(this,...i);return ue(this,We)[e].push(n),()=>{ue(this,We)[e]=ue(this,We)[e].filter(i=>i!==n)}}$destroy(){ue(this,ye).$destroy()}};We=new WeakMap,ye=new WeakMap;var Do;typeof HTMLElement=="function"&&(Do=class extends HTMLElement{constructor(r,e,t){super(),Te(this,"$$ctor"),Te(this,"$$s"),Te(this,"$$c"),Te(this,"$$cn",!1),Te(this,"$$d",{}),Te(this,"$$r",!1),Te(this,"$$p_d",{}),Te(this,"$$l",{}),Te(this,"$$l_u",new Map),Te(this,"$$me"),this.$$ctor=r,this.$$s=e,t&&this.attachShadow({mode:"open"})}addEventListener(r,e,t){if(this.$$l[r]=this.$$l[r]||[],this.$$l[r].push(e),this.$$c){let n=this.$$c.$on(r,e);this.$$l_u.set(e,n)}super.addEventListener(r,e,t)}removeEventListener(r,e,t){if(super.removeEventListener(r,e,t),this.$$c){let n=this.$$l_u.get(e);n&&(n(),this.$$l_u.delete(e))}}async connectedCallback(){if(this.$$cn=!0,!this.$$c){let r=function(n){return i=>{let s=document.createElement("slot");n!=="default"&&(s.name=n),U(i,s)}};if(await Promise.resolve(),!this.$$cn||this.$$c)return;let e={},t=ll(this);for(let n of this.$$s)n in t&&(n==="default"&&!this.$$d.children?(this.$$d.children=r(n),e.default=!0):e[n]=r(n));for(let n of this.attributes){let i=this.$$g_p(n.name);i in this.$$d||(this.$$d[i]=hr(i,n.value,this.$$p_d,"toProp"))}for(let n in this.$$p_d)!(n in this.$$d)&&this[n]!==void 0&&(this.$$d[n]=this[n],delete this[n]);this.$$c=al({component:this.$$ctor,target:this.shadowRoot||this,props:{...this.$$d,$$slots:e,$$host:this}}),this.$$me=$a(()=>{un(()=>{var n;this.$$r=!0;for(let i of dr(this.$$c)){if(!((n=this.$$p_d[i])!=null&&n.reflect))continue;this.$$d[i]=this.$$c[i];let s=hr(i,this.$$d[i],this.$$p_d,"toAttribute");s==null?this.removeAttribute(this.$$p_d[i].attribute||i):this.setAttribute(this.$$p_d[i].attribute||i,s)}this.$$r=!1})});for(let n in this.$$l)for(let i of this.$$l[n]){let s=this.$$c.$on(n,i);this.$$l_u.set(i,s)}this.$$l={}}}attributeChangedCallback(r,e,t){var n;this.$$r||(r=this.$$g_p(r),this.$$d[r]=hr(r,t,this.$$p_d,"toProp"),(n=this.$$c)==null||n.$set({[r]:this.$$d[r]}))}disconnectedCallback(){this.$$cn=!1,Promise.resolve().then(()=>{!this.$$cn&&this.$$c&&(this.$$c.$destroy(),this.$$me(),this.$$c=void 0)})}$$g_p(r){return dr(this.$$p_d).find(e=>this.$$p_d[e].attribute===r||!this.$$p_d[e].attribute&&e.toLowerCase()===r)||r}});function hr(r,e,t,n){var i;let s=(i=t[r])==null?void 0:i.type;if(e=s==="Boolean"&&typeof e!="boolean"?e!=null:e,!n||!t[r])return e;if(n==="toAttribute")switch(s){case"Object":case"Array":return e==null?null:JSON.stringify(e);case"Boolean":return e?"":null;case"Number":return e??null;default:return e}else switch(s){case"Object":case"Array":return e&&JSON.parse(e);case"Boolean":return e;case"Number":return e!=null?+e:e;default:return e}}function ll(r){let e={};return r.childNodes.forEach(t=>{e[t.slot||"default"]=!0}),e}function cl(r,e,t,n,i,s){let c=class extends Do{constructor(){super(r,t,i),this.$$p_d=e}static get observedAttributes(){return dr(e).map(l=>(e[l].attribute||l).toLowerCase())}};return dr(e).forEach(l=>{qt(c.prototype,l,{get(){return this.$$c&&l in this.$$c?this.$$c[l]:this.$$d[l]},set(u){var d;u=hr(l,u,e),this.$$d[l]=u;var f=this.$$c;if(f){var v=(d=at(f,l))==null?void 0:d.get;v?f[l]=u:f.$set({[l]:u})}}})}),n.forEach(l=>{qt(c.prototype,l,{get(){var u;return(u=this.$$c)==null?void 0:u[l]}})}),r.element=c,c}var _o=new TextEncoder;function ul(r){return[...new Uint8Array(r)].map(e=>e.toString(16).padStart(2,"0")).join("")}async function hl(r,e="SHA-256",t=1e5){let n=Date.now().toString(16);r||(r=Math.round(Math.random()*t));let i=await Bo(n,r,e);return{algorithm:e,challenge:i,salt:n,signature:""}}async function Bo(r,e,t){if(typeof crypto>"u"||!("subtle"in crypto)||!("digest"in crypto.subtle))throw new Error("Web Crypto is not available. Secure context is required (https://developer.mozilla.org/en-US/docs/Web/Security/Secure_Contexts).");return ul(await crypto.subtle.digest(t.toUpperCase(),_o.encode(r+e)))}function dl(r,e,t="SHA-256",n=1e6,i=0){let s=new AbortController,c=Date.now();return{promise:(async()=>{for(let l=i;l<=n;l+=1){if(s.signal.aborted)return null;if(await Bo(e,l,t)===r)return{number:l,took:Date.now()-c}}return null})(),controller:s}}function Vi(){try{return Intl.DateTimeFormat().resolvedOptions().timeZone}catch{}}function fl(r){let e=atob(r),t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}function pl(r,e=12){let t=new Uint8Array(e);for(let n=0;n<e;n++)t[n]=r%256,r=Math.floor(r/256);return t}async function gl(r,e="",t=1e6,n=0){let i="AES-GCM",s=new AbortController,c=Date.now(),l=async()=>{for(let f=n;f<=t;f+=1){if(s.signal.aborted||!u||!d)return null;try{let v=await crypto.subtle.decrypt({name:i,iv:pl(f)},u,d);if(v)return{clearText:new TextDecoder().decode(v),took:Date.now()-c}}catch{}}return null},u=null,d=null;try{d=fl(r);let f=await crypto.subtle.digest("SHA-256",_o.encode(e));u=await crypto.subtle.importKey("raw",f,i,!1,["decrypt"])}catch{return{promise:Promise.reject(),controller:s}}return{promise:l(),controller:s}}var x=(r=>(r.CODE="code",r.ERROR="error",r.VERIFIED="verified",r.VERIFYING="verifying",r.UNVERIFIED="unverified",r.EXPIRED="expired",r))(x||{}),ee=(r=>(r.ERROR="error",r.LOADING="loading",r.PLAYING="playing",r.PAUSED="paused",r.READY="ready",r))(ee||{});globalThis.altchaPlugins=globalThis.altchaPlugins||[];globalThis.altchaI18n=globalThis.altchaI18n||{get:r=>ur(globalThis.altchaI18n.store)[r],set:(r,e)=>{Object.assign(ur(globalThis.altchaI18n.store),{[r]:e}),globalThis.altchaI18n.store.set(ur(globalThis.altchaI18n.store))},store:nl({})};var vl={ariaLinkLabel:"Visit Altcha.org",enterCode:"Enter code",enterCodeAria:"Enter code you hear. Press Space to play audio.",error:"Verification failed. Try again later.",expired:"Verification expired. Try again.",footer:'Protected by <a href="https://altcha.org/" target="_blank" aria-label="Visit Altcha.org">ALTCHA</a>',getAudioChallenge:"Get an audio challenge",label:"I'm not a robot",loading:"Loading...",reload:"Reload",verify:"Verify",verificationRequired:"Verification required!",verified:"Verified",verifying:"Verifying...",waitAlert:"Verifying... please wait."};globalThis.altchaI18n.set("en",vl);var Hr=(r,e)=>{let t=wa(()=>ia(e?.(),24));var n=wl();Me(()=>{N(n,"width",a(t)),N(n,"height",a(t))}),U(r,n)};function ml(r,e){r.code==="Space"&&(r.preventDefault(),r.stopImmediatePropagation(),e())}function bl(r,e){r.preventDefault(),e()}function yl(r,e,t,n,i,s,c,l){var u;[x.UNVERIFIED,x.ERROR,x.EXPIRED,x.CODE].includes(a(e))?t()!==!1&&((u=a(n))==null?void 0:u.reportValidity())===!1?w(i,!1):s()?c():l():w(i,!0)}var wl=Cr('<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" class="altcha-spinner"><path d="M12,1A11,11,0,1,0,23,12,11,11,0,0,0,12,1Zm0,19a8,8,0,1,1,8-8A8,8,0,0,1,12,20Z" fill="currentColor" opacity=".25"></path><path d="M12,4a8,8,0,0,1,7.89,6.7A1.53,1.53,0,0,0,21.38,12h0a1.5,1.5,0,0,0,1.48-1.75,11,11,0,0,0-21.72,0A1.5,1.5,0,0,0,2.62,12h0a1.53,1.53,0,0,0,1.49-1.3A8,8,0,0,1,12,4Z" fill="currentColor"></path></svg>'),El=Ae('<input type="hidden">'),Al=Ae('<div><a target="_blank" class="altcha-logo" aria-hidden="true"><svg width="22" height="22" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M2.33955 16.4279C5.88954 20.6586 12.1971 21.2105 16.4279 17.6604C18.4699 15.947 19.6548 13.5911 19.9352 11.1365L17.9886 10.4279C17.8738 12.5624 16.909 14.6459 15.1423 16.1284C11.7577 18.9684 6.71167 18.5269 3.87164 15.1423C1.03163 11.7577 1.4731 6.71166 4.8577 3.87164C8.24231 1.03162 13.2883 1.4731 16.1284 4.8577C16.9767 5.86872 17.5322 7.02798 17.804 8.2324L19.9522 9.01429C19.7622 7.07737 19.0059 5.17558 17.6604 3.57212C14.1104 -0.658624 7.80283 -1.21043 3.57212 2.33956C-0.658625 5.88958 -1.21046 12.1971 2.33955 16.4279Z" fill="currentColor"></path><path d="M3.57212 2.33956C1.65755 3.94607 0.496389 6.11731 0.12782 8.40523L2.04639 9.13961C2.26047 7.15832 3.21057 5.25375 4.8577 3.87164C8.24231 1.03162 13.2883 1.4731 16.1284 4.8577L13.8302 6.78606L19.9633 9.13364C19.7929 7.15555 19.0335 5.20847 17.6604 3.57212C14.1104 -0.658624 7.80283 -1.21043 3.57212 2.33956Z" fill="currentColor"></path><path d="M7 10H5C5 12.7614 7.23858 15 10 15C12.7614 15 15 12.7614 15 10H13C13 11.6569 11.6569 13 10 13C8.3431 13 7 11.6569 7 10Z" fill="currentColor"></path></svg></a></div>'),xl=Cr('<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M12.8659 3.00017L22.3922 19.5002C22.6684 19.9785 22.5045 20.5901 22.0262 20.8662C21.8742 20.954 21.7017 21.0002 21.5262 21.0002H2.47363C1.92135 21.0002 1.47363 20.5525 1.47363 20.0002C1.47363 19.8246 1.51984 19.6522 1.60761 19.5002L11.1339 3.00017C11.41 2.52187 12.0216 2.358 12.4999 2.63414C12.6519 2.72191 12.7782 2.84815 12.8659 3.00017ZM10.9999 16.0002V18.0002H12.9999V16.0002H10.9999ZM10.9999 9.00017V14.0002H12.9999V9.00017H10.9999Z"></path></svg>'),$l=Cr('<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M15 7C15 6.44772 15.4477 6 16 6C16.5523 6 17 6.44772 17 7V17C17 17.5523 16.5523 18 16 18C15.4477 18 15 17.5523 15 17V7ZM7 7C7 6.44772 7.44772 6 8 6C8.55228 6 9 6.44772 9 7V17C9 17.5523 8.55228 18 8 18C7.44772 18 7 17.5523 7 17V7Z"></path></svg>'),Ol=Cr('<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M4 12H7C8.10457 12 9 12.8954 9 14V19C9 20.1046 8.10457 21 7 21H4C2.89543 21 2 20.1046 2 19V12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12V19C22 20.1046 21.1046 21 20 21H17C15.8954 21 15 20.1046 15 19V14C15 12.8954 15.8954 12 17 12H20C20 7.58172 16.4183 4 12 4C7.58172 4 4 7.58172 4 12Z"></path></svg>'),Cl=Ae('<button type="button" class="altcha-code-challenge-audio"><!></button>'),kl=Ae("<audio hidden autoplay><source></audio>"),Tl=Ae('<div class="altcha-code-challenge" role="dialog"><div class="altcha-code-challenge-arrow"></div> <form data-code-challenge-form="1"><img class="altcha-code-challenge-image" alt=""> <input type="text" autocomplete="off" name="code" class="altcha-code-challenge-input" required> <div class="altcha-code-challenge-buttons"><div class="altcha-code-challenge-buttons-left"><!> <button type="button" class="altcha-code-challenge-reload"><svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M2 12C2 17.5228 6.47715 22 12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2V4C16.4183 4 20 7.58172 20 12C20 16.4183 16.4183 20 12 20C7.58172 20 4 16.4183 4 12C4 9.25022 5.38734 6.82447 7.50024 5.38451L7.5 8H9.5V2L3.5 2V4L5.99918 3.99989C3.57075 5.82434 2 8.72873 2 12Z"></path></svg></button></div> <button type="submit" class="altcha-code-challenge-verify"><!> </button></div> <!></form></div>'),Ml=Ae("<div><!></div>"),Nl=Ae("<div><!></div>"),Fl=Ae('<div class="altcha-error"><svg width="14" height="14" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true"><path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12"></path></svg> <!></div>'),Sl=Ae('<div class="altcha-footer"><div><!></div></div>'),Ll=Ae('<div class="altcha-anchor-arrow"></div>'),Il=Ae('<!> <div class="altcha"><div class="altcha-main"><div><!> <input type="checkbox"></div> <label class="altcha-label"><!></label> <!> <!> <!></div> <!> <!> <!></div>',1);function Dl(r,e){var t,n;$o(e,!0);let[i,s]=ol(),c=()=>il(es,"$altchaI18nStore",i),l=C(e,"auto",7,void 0),u=C(e,"blockspam",7,void 0),d=C(e,"challengeurl",7,void 0),f=C(e,"challengejson",7,void 0),v=C(e,"credentials",7,void 0),m=C(e,"customfetch",7,void 0),b=C(e,"debug",7,!1),F=C(e,"delay",7,0),j=C(e,"disableautofocus",7,!1),P=C(e,"expire",7,void 0),k=C(e,"floating",7,void 0),ie=C(e,"floatinganchor",7,void 0),oe=C(e,"floatingoffset",7,void 0),xe=C(e,"floatingpersist",7,!1),X=C(e,"hidefooter",7,!1),K=C(e,"hidelogo",7,!1),$e=C(e,"id",7,void 0),Ve=C(e,"language",7,void 0),Qe=C(e,"name",7,"altcha"),et=C(e,"maxnumber",7,1e6),Mt=C(e,"mockerror",7,!1),je=C(e,"obfuscated",7,void 0),me=C(e,"overlay",7,void 0),Nt=C(e,"overlaycontent",7,void 0),Qt=C(e,"plugins",7,void 0),Ft=C(e,"refetchonexpire",7,!0),tt=C(e,"sentinel",7,void 0),Oe=C(e,"spamfilter",7,!1),ft=C(e,"strings",7,void 0),fe=C(e,"test",7,!1),te=C(e,"verifyurl",7,void 0),pt=C(e,"workers",23,()=>Math.min(16,navigator.hardwareConcurrency||8)),St=C(e,"workerurl",7,void 0),{altchaI18n:Qo}=globalThis,es=Qo.store,Kn=["SHA-256","SHA-384","SHA-512"],ts="https://altcha.org/",Pe=(o,h)=>{e.$$host.dispatchEvent(new CustomEvent(o,{detail:h}))},Un=(n=(t=document.documentElement.lang)==null?void 0:t.split("-"))==null?void 0:n[0],Dr=jt(()=>{var o;return d()&&new URL(d(),location.origin).host.endsWith(".altcha.org")&&!!((o=d())!=null&&o.includes("apiKey=ckey_"))}),_r=jt(()=>f()?ii(f()):void 0),rs=jt(()=>ft()?ii(ft()):{}),D=jt(()=>({...Hn(c()),...a(rs)})),qn=jt(()=>`${$e()||Qe()}_checkbox_${Math.round(Math.random()*1e8)}`),Lt=_(!1),z=_(null),T=_(He(x.UNVERIFIED)),V=_(void 0),It=_(null),Ke=_(null),ce=_(null),Br=_(null),gt=_(null),I=_(null),vt=_(null),rt=_(null),Ce=null,W=_(null),nt=_(!1),Ue=[],Rr=_(!1),De=_(null);Jr(()=>{gs(a(rt))}),Jr(()=>{vs(a(T))}),rl(()=>{ns(),w(vt,null),a(I)&&(a(I).removeEventListener("submit",Qn),a(I).removeEventListener("reset",ei),a(I).removeEventListener("focusin",Xn),w(I,null)),Ce&&(clearTimeout(Ce),Ce=null),document.removeEventListener("click",Jn),document.removeEventListener("scroll",Yn),window.removeEventListener("resize",ni)}),Lo(()=>{var o;M("mounted","2.1.0"),M("workers",pt()),as(),M("plugins",Ue.length?Ue.map(h=>h.constructor.pluginName).join(", "):"none"),fe()&&M("using test mode"),P()&&jr(P()),l()!==void 0&&M("auto",l()),k()!==void 0&&si(k()),w(I,(o=a(V))==null?void 0:o.closest("form"),!0),a(I)&&(a(I).addEventListener("submit",Qn,{capture:!0}),a(I).addEventListener("reset",ei),(l()==="onfocus"||xe()==="focus")&&a(I).addEventListener("focusin",Xn)),me()&&ai(!0),l()==="onload"&&(je()?Dt():_e()),a(Dr)&&(X()||K())&&M("Attributes hidefooter and hidelogo ignored because usage with free API Keys requires attribution."),requestAnimationFrame(()=>{Pe("load")})});function er(o,h){return btoa(JSON.stringify({algorithm:o.algorithm,challenge:o.challenge,number:h.number,salt:o.salt,signature:o.signature,test:fe()?!0:void 0,took:h.took}))}function ns(){for(let o of Ue)o.destroy()}function zn(){d()&&Ft()&&a(T)===x.VERIFIED?_e():it(x.EXPIRED,a(D).expired)}async function is(){var o;if(Mt())throw M("mocking error"),new Error("Mocked error.");if(a(_r))return M("using provided json data"),a(_r);if(fe())return M("generating test challenge",{test:fe()}),hl(typeof fe()!="boolean"?+fe():void 0);{if(!d()&&a(I)){let O=a(I).getAttribute("action");O!=null&&O.includes("/form/")&&d(O+"/altcha")}if(!d())throw new Error("Attribute challengeurl not set.");M("fetching challenge from",d());let h={credentials:typeof v()=="boolean"?"include":v(),headers:Oe()!==!1?{"x-altcha-spam-filter":"1"}:{}},p=await Wn()(d(),h);if(!p||!(p instanceof Response))throw new Error("Custom fetch function did not return a response.");if(p.status!==200)throw new Error(`Server responded with ${p.status}.`);let y=p.headers.get("X-Altcha-Config"),g=await p.json(),A=new URLSearchParams((o=g.salt.split("?"))==null?void 0:o[1]),E=A.get("expires")||A.get("expire");if(E){let O=new Date(+E*1e3),q=isNaN(O.getTime())?0:O.getTime()-Date.now();q>0&&jr(q)}if(y)try{let O=JSON.parse(y);O&&typeof O=="object"&&(O.verifyurl&&!O.verifyurl.startsWith("fn:")&&(O.verifyurl=Zn(O.verifyurl)),ui(O))}catch(O){M("unable to configure from X-Altcha-Config",O)}return g}}function os(o){var h,p;let y=(h=a(I))==null?void 0:h.querySelector(typeof o=="string"?`input[name="${o}"]`:'input[type="email"]:not([data-no-spamfilter])');return((p=y?.value)==null?void 0:p.slice(y.value.indexOf("@")))||void 0}function Wn(){let o=fetch;if(m())if(M("using customfetch"),typeof m()=="string"){if(o=globalThis[m()]||null,!o)throw new Error(`Custom fetch function not found: ${m()}`)}else o=m();return o}function Hn(o,h=[Ve()||"",document.documentElement.lang||"",...navigator.languages]){let p=Object.keys(o).map(g=>g.toLowerCase()),y=h.reduce((g,A)=>(A=A.toLowerCase(),g||(o[A]?A:null)||p.find(E=>A.split("-")[0]===E.split("-")[0])||null),null);return o[y||"en"]}function ss(){return Oe()==="ipAddress"?{blockedCountries:void 0,classifier:void 0,disableRules:void 0,email:!1,expectedCountries:void 0,expectedLanguages:void 0,fields:!1,ipAddress:void 0,text:void 0,timeZone:void 0}:typeof Oe()=="object"?Oe():{blockedCountries:void 0,classifier:void 0,disableRules:void 0,email:void 0,expectedCountries:void 0,expectedLanguages:void 0,fields:void 0,ipAddress:void 0,text:void 0,timeZone:void 0}}function Gn(o){var h;return[...((h=a(I))==null?void 0:h.querySelectorAll(o!=null&&o.length?o.map(p=>`input[name="${p}"]`).join(", "):'input[type="text"]:not([data-no-spamfilter]), textarea:not([data-no-spamfilter])'))||[]].reduce((p,y)=>{let g=y.name,A=y.value;return g&&A&&(p[g]=/\n/.test(A)?A.replace(new RegExp("(?<!\\r)\\n","g"),`\r
`):A),p},{})}function Zn(o,h){let p=new URL(d()||location.origin),y=new URL(o,p);if(y.search||(y.search=p.search),h)for(let g in h)h[g]!==void 0&&h[g]!==null&&y.searchParams.set(g,h[g]);return y.toString()}function as(){let o=Qt()!==void 0?Qt().split(","):void 0;for(let h of globalThis.altchaPlugins)(!o||o.includes(h.pluginName))&&Ue.push(new h({el:a(V),clarify:Dt,dispatch:Pe,getConfiguration:hi,getFloatingAnchor:di,getState:fi,log:M,reset:it,solve:ci,setState:ke,setFloatingAnchor:pi,verify:_e}))}function M(...o){(b()||o.some(h=>h instanceof Error))&&console[o[0]instanceof Error?"error":"log"]("ALTCHA",`[name=${Qe()}]`,...o)}function ls(){w(W,ee.PAUSED,!0)}function cs(o){w(W,ee.ERROR,!0)}function us(){w(W,ee.READY,!0)}function hs(){w(W,ee.LOADING,!0)}function ds(){w(W,ee.PLAYING,!0)}function fs(){w(W,ee.PAUSED,!0)}function ps(o){var h;if(o.preventDefault(),o.stopPropagation(),a(z)){let p=new FormData(o.target),y=String(p.get("code"));if((h=te())!=null&&h.startsWith("fn:")){let g=te().replace(/^fn:/,"");if(M(`calling ${g} function instead of verifyurl`),!(g in globalThis))throw new Error(`Global function "${g}" is undefined.`);return globalThis[g]({challenge:a(z).challenge,code:y,solution:a(z).solution})}w(nt,!0),oi(er(a(z).challenge,a(z).solution),y).then(({reason:g,verified:A})=>{A?(w(z,null),ke(x.VERIFIED),M("verified"),Wr().then(()=>{var E;(E=a(Br))==null||E.focus(),Pe("verified",{payload:a(De)}),l()==="onsubmit"?Vr(a(vt)):me()&&_t()})):(it(),w(rt,g||"Verification failed",!0))}).catch(g=>{w(z,null),ke(x.ERROR,g),M("sentinel verification failed:",g)}).finally(()=>{w(nt,!1)})}}function Jn(o){var h;let p=o.target;k()&&p&&!a(V).contains(p)&&(a(T)===x.VERIFIED&&xe()===!1||a(T)===x.VERIFIED&&xe()==="focus"&&!((h=a(I))!=null&&h.matches(":focus-within"))||l()==="off"&&a(T)===x.UNVERIFIED)&&_t()}function Yn(){k()&&a(T)!==x.UNVERIFIED&&Bt()}function gs(o){for(let h of Ue)typeof h.onErrorChange=="function"&&h.onErrorChange(a(rt))}function Xn(o){a(T)===x.UNVERIFIED?_e():k()&&xe()==="focus"&&a(T)===x.VERIFIED&&tr()}function Qn(o){var h;let p=o.target;p!=null&&p.hasAttribute("data-code-challenge-form")||(w(vt,o.submitter,!0),a(I)&&l()==="onsubmit"?((h=a(vt))==null||h.blur(),a(T)===x.UNVERIFIED?(o.preventDefault(),o.stopPropagation(),_e().then(()=>{Vr(a(vt))})):a(T)!==x.VERIFIED&&(o.preventDefault(),o.stopPropagation(),a(T)===x.VERIFYING&&ti())):a(I)&&k()&&l()==="off"&&a(T)===x.UNVERIFIED&&(o.preventDefault(),o.stopPropagation(),tr()))}function ei(){it()}function ti(){a(T)===x.VERIFYING&&a(D).waitAlert&&alert(a(D).waitAlert)}function ri(){a(Ke)?a(Ke).paused?(a(Ke).currentTime=0,a(Ke).play()):a(Ke).pause():(w(Rr,!0),requestAnimationFrame(()=>{var o;(o=a(Ke))==null||o.play()}))}function vs(o){for(let h of Ue)typeof h.onStateChange=="function"&&h.onStateChange(a(T));k()&&a(T)!==x.UNVERIFIED&&requestAnimationFrame(()=>{Bt()}),w(Lt,a(T)===x.VERIFIED),me()&&a(ce)&&(a(T)!==x.UNVERIFIED?tr():_t())}function ni(){k()&&Bt()}function ii(o){return JSON.parse(o)}async function ms(o){if(!te())throw new Error("Attribute verifyurl not set.");M("requesting server verification from",te());let h={payload:o};if(Oe()!==!1){let{blockedCountries:g,classifier:A,disableRules:E,email:O,expectedLanguages:q,expectedCountries:Q,fields:se,ipAddress:qe,text:Kr,timeZone:ir}=ss();h.blockedCountries=g,h.classifier=A,h.disableRules=E,h.email=O===!1?void 0:os(O),h.expectedCountries=Q,h.expectedLanguages=q||(Un?[Un]:void 0),h.fields=se===!1?void 0:Gn(se),h.ipAddress=qe===!1?void 0:qe||"auto",h.text=Kr,h.timeZone=ir===!1?void 0:ir||Vi()}let p=await Wn()(te(),{body:JSON.stringify(h),headers:{"content-type":"application/json"},method:"POST"});if(!p||!(p instanceof Response))throw new Error("Custom fetch function did not return a response.");if(p.status!==200)throw new Error(`Server responded with ${p.status}.`);let y=await p.json();if(y!=null&&y.payload&&w(De,y.payload,!0),Pe("serververification",y),u()&&y.classification==="BAD")throw new Error("SpamFilter returned negative classification.")}async function oi(o,h){if(!te())throw new Error("Attribute verifyurl not set.");M("requesting sentinel verification from",te());let p={code:h,payload:o};tt()&&(p.fields=tt().fields?Gn():void 0,p.timeZone=tt().timeZone?Vi():void 0);let y=await fetch(te(),{body:JSON.stringify(p),headers:{"content-type":"application/json"},method:"POST"});if(!y||!(y instanceof Response))throw new Error("Fetch function did not return a response.");if(y.status!==200)throw new Error(`Server responded with ${y.status}.`);let g=await y.json();return g!=null&&g.payload&&w(De,g.payload,!0),Pe("sentinelverification",g),g}function Vr(o){var h;a(I)&&"requestSubmit"in a(I)?a(I).requestSubmit(o):(h=a(I))!=null&&h.reportValidity()&&(o?o.click():a(I).submit())}function jr(o){M("expire",o),Ce&&(clearTimeout(Ce),Ce=null),o<1?zn():Ce=setTimeout(zn,o)}function si(o){M("floating",o),k()!==o&&(a(V).style.left="",a(V).style.top=""),k(o===!0||o===""?"auto":o===!1||o==="false"?void 0:k()),k()?(l()||l("onsubmit"),document.addEventListener("scroll",Yn),document.addEventListener("click",Jn),window.addEventListener("resize",ni)):l()==="onsubmit"&&l(void 0)}function ai(o){var h,p;if(M("overlay",o),me(o),o){if(l()||l("onsubmit"),a(ce)&&a(V).parentElement&&a(ce).replaceWith(a(V).parentElement),(p=(h=a(V))==null?void 0:h.parentElement)!=null&&p.parentElement){w(ce,document.createElement("div"),!0),a(V).parentElement.parentElement.appendChild(a(ce));let y=document.createElement("div"),g=document.createElement("button");g.type="button",g.innerHTML="&times;",g.addEventListener("click",A=>{A.preventDefault(),it()}),a(ce).classList.add("altcha-overlay-backdrop"),g.classList.add("altcha-overlay-close-button"),y.classList.add("altcha-overlay"),a(ce).append(y),y.append(g),Nt()&&y.append(...document.querySelectorAll(Nt())),y.append(a(V).parentElement)}}else a(ce)&&a(V).parentElement&&(a(ce).replaceWith(a(V).parentElement),a(V).style.display="block")}function li(o){if(!o.algorithm)throw new Error("Invalid challenge. Property algorithm is missing.");if(o.signature===void 0)throw new Error("Invalid challenge. Property signature is missing.");if(!Kn.includes(o.algorithm.toUpperCase()))throw new Error(`Unknown algorithm value. Allowed values: ${Kn.join(", ")}`);if(!o.challenge||o.challenge.length<40)throw new Error("Challenge is too short. Min. 40 chars.");if(!o.salt||o.salt.length<10)throw new Error("Salt is too short. Min. 10 chars.")}async function ci(o){let h=null;if("Worker"in window){try{h=await bs(o,o.maxNumber||o.maxnumber||et())}catch(p){M(p)}if(h?.number!==void 0||"obfuscated"in o)return{data:o,solution:h}}if("obfuscated"in o){let p=await gl(o.obfuscated,o.key,o.maxNumber||o.maxnumber);return{data:o,solution:await p.promise}}return{data:o,solution:await dl(o.challenge,o.salt,o.algorithm,o.maxNumber||o.maxnumber||et()).promise}}async function bs(o,h=typeof fe()=="number"?fe():o.maxNumber||o.maxnumber||et(),p=Math.ceil(pt())){let y=[];p=Math.min(16,h,Math.max(1,p));for(let E=0;E<p;E++)y.push(altchaCreateWorker(St()));let g=Math.ceil(h/p),A=await Promise.all(y.map((E,O)=>{let q=O*g;return new Promise(Q=>{E.addEventListener("message",se=>{if(se.data)for(let qe of y)qe!==E&&qe.postMessage({type:"abort"});Q(se.data)}),E.postMessage({payload:o,max:q+g,start:q,type:"work"})})}));for(let E of y)E.terminate();return A.find(E=>!!E)||null}async function Dt(){if(!je()){ke(x.ERROR);return}let o=Ue.find(h=>h.constructor.pluginName==="obfuscation");if(!o||!("clarify"in o)){ke(x.ERROR),M("Plugin `obfuscation` not found. Import `altcha/plugins/obfuscation` to load it.");return}if("clarify"in o&&typeof o.clarify=="function")return o.clarify()}function ui(o){o.obfuscated!==void 0&&je(o.obfuscated),o.auto!==void 0&&(l(o.auto),l()==="onload"&&(je()?Dt():_e())),o.blockspam!==void 0&&u(!!o.blockspam),o.customfetch!==void 0&&m(o.customfetch),o.floatinganchor!==void 0&&ie(o.floatinganchor),o.delay!==void 0&&F(o.delay),o.floatingoffset!==void 0&&oe(o.floatingoffset),o.floating!==void 0&&si(o.floating),o.expire!==void 0&&(jr(o.expire),P(o.expire)),o.challenge&&(f(typeof o.challenge=="string"?o.challenge:JSON.stringify(o.challenge)),li(a(_r))),o.challengeurl!==void 0&&d(o.challengeurl),o.debug!==void 0&&b(!!o.debug),o.hidefooter!==void 0&&X(!!o.hidefooter),o.hidelogo!==void 0&&K(!!o.hidelogo),o.language!==void 0&&ft(Hn(c(),[o.language])),o.maxnumber!==void 0&&et(+o.maxnumber),o.mockerror!==void 0&&Mt(!!o.mockerror),o.name!==void 0&&Qe(o.name),o.overlaycontent!==void 0&&Nt(o.overlaycontent),o.overlay!==void 0&&ai(o.overlay),o.refetchonexpire!==void 0&&Ft(!!o.refetchonexpire),o.sentinel!==void 0&&typeof o.sentinel=="object"&&tt(o.sentinel),o.spamfilter!==void 0&&Oe(typeof o.spamfilter=="object"?o.spamfilter:!!o.spamfilter),o.strings&&ft(typeof o.strings=="string"?o.strings:JSON.stringify(o.strings)),o.test!==void 0&&fe(typeof o.test=="number"?o.test:!!o.test),o.verifyurl!==void 0&&te(o.verifyurl),o.workers!==void 0&&pt(+o.workers),o.workerurl!==void 0&&St(o.workerurl)}function hi(){return{auto:l(),blockspam:u(),challengeurl:d(),debug:b(),delay:F(),expire:P(),floating:k(),floatinganchor:ie(),floatingoffset:oe(),hidefooter:X(),hidelogo:K(),name:Qe(),maxnumber:et(),mockerror:Mt(),obfuscated:je(),overlay:me(),refetchonexpire:Ft(),spamfilter:Oe(),strings:a(D),test:fe(),verifyurl:te(),workers:pt(),workerurl:St()}}function di(){return a(gt)}function ys(o){return Ue.find(h=>h.constructor.pluginName===o)}function fi(){return a(T)}function _t(){a(V).style.display="none",me()&&a(ce)&&(a(ce).style.display="none")}function Bt(o=20){var h;if(a(V))if(a(gt)||w(gt,(ie()?document.querySelector(ie()):(h=a(I))==null?void 0:h.querySelector('input[type="submit"], button[type="submit"], button:not([type="button"]):not([type="reset"])'))||a(I),!0),a(gt)){let p=parseInt(oe(),10)||12,y=a(gt).getBoundingClientRect(),g=a(V).getBoundingClientRect(),A=document.documentElement.clientHeight,E=document.documentElement.clientWidth,O=k()==="auto"?y.bottom+g.height+p+o>A:k()==="top",q=Math.max(o,Math.min(E-o-g.width,y.left+y.width/2-g.width/2));if(O?a(V).style.top=`${y.top-(g.height+p)}px`:a(V).style.top=`${y.bottom+p}px`,a(V).style.left=`${q}px`,a(V).setAttribute("data-floating",O?"top":"bottom"),a(It)){let Q=a(It).getBoundingClientRect();a(It).style.left=y.left-q+y.width/2-Q.width/2+"px"}}else M("unable to find floating anchor element")}function it(o=x.UNVERIFIED,h=null){Ce&&(clearTimeout(Ce),Ce=null),w(Lt,!1),w(De,null),w(z,null),w(Rr,!1),w(W,null),ke(o,h)}function pi(o){w(gt,o,!0)}function ke(o,h=null){w(T,o,!0),w(rt,h,!0),Pe("statechange",{payload:a(De),state:a(T)})}function tr(){a(V).style.display="block",k()&&Bt(),me()&&a(ce)&&(a(ce).style.display="flex")}async function _e(){return it(x.VERIFYING),await new Promise(o=>setTimeout(o,F()||0)),is().then(o=>(li(o),M("challenge",o),ci(o))).then(({data:o,solution:h})=>{var p;if(M("solution",h),!h||o&&"challenge"in o&&!("clearText"in h))if(h?.number!==void 0&&"challenge"in o)if(te()&&"codeChallenge"in o)["INPUT","BUTTON","SELECT","TEXTAREA"].includes(((p=document.activeElement)==null?void 0:p.tagName)||"")&&j()===!1&&document.activeElement.blur(),w(z,{challenge:o,solution:h},!0);else{if(te()&&tt()!==void 0)return oi(er(o,h));if(te())return ms(er(o,h));w(De,er(o,h),!0),M("payload",a(De))}else throw M("Unable to find a solution. Ensure that the 'maxnumber' attribute is greater than the randomly generated number."),new Error("Unexpected result returned.")}).then(()=>{a(z)?(ke(x.CODE),Wr().then(()=>{Pe("code",{codeChallenge:a(z)})})):(ke(x.VERIFIED),M("verified"),Wr().then(()=>{Pe("verified",{payload:a(De)}),l()==="onsubmit"?Vr(a(vt)):me()&&_t()}))}).catch(o=>{M(o),ke(x.ERROR,o.message)})}var gi=Il(),vi=Vt(gi);Ga(vi,e,"default",{});var mt=J(vi,2),Pr=Z(mt),rr=Z(Pr);let mi;var bi=Z(rr);{var ws=o=>{Hr(o)};Y(bi,o=>{a(T)===x.VERIFYING&&o(ws)})}var ot=J(bi,2);Di(ot),ot.__change=[yl,T,Oe,I,Lt,je,Dt,_e],ar(ot,o=>w(Br,o),()=>a(Br)),G(rr);var nr=J(rr,2),Es=Z(nr);{var As=o=>{var h=sr(),p=Vt(h);st(p,()=>a(D).verified),U(o,h)},xs=(o,h)=>{{var p=g=>{var A=sr(),E=Vt(A);st(E,()=>a(D).verifying),U(g,A)},y=(g,A)=>{{var E=q=>{var Q=sr(),se=Vt(Q);st(se,()=>a(D).verificationRequired),U(q,Q)},O=q=>{var Q=sr(),se=Vt(Q);st(se,()=>a(D).label),U(q,Q)};Y(g,q=>{a(T)===x.CODE?q(E):q(O,!1)},A)}};Y(o,g=>{a(T)===x.VERIFYING?g(p):g(y,!1)},h)}};Y(Es,o=>{a(T)===x.VERIFIED?o(As):o(xs,!1)})}G(nr);var yi=J(nr,2);{var $s=o=>{var h=El();Di(h),Me(()=>{N(h,"name",Qe()),Qa(h,a(De))}),U(o,h)};Y(yi,o=>{a(T)===x.VERIFIED&&o($s)})}var wi=J(yi,2);{var Os=o=>{var h=Al(),p=Z(h);N(p,"href",ts),G(h),Me(()=>N(p,"aria-label",a(D).ariaLinkLabel)),U(o,h)};Y(wi,o=>{(K()!==!0||a(Dr))&&o(Os)})}var Cs=J(wi,2);{var ks=o=>{var h=Tl(),p=J(Z(h),2),y=Z(p),g=J(y,2);Pa(g,!j()),g.__keydown=[ml,ri];var A=J(g,2),E=Z(A),O=Z(E);{var q=be=>{var H=Cl();H.__click=ri;var or=Z(H);{var Rt=bt=>{Hr(bt,()=>20)},Ds=(bt,_s)=>{{var Bs=yt=>{var Ur=xl();U(yt,Ur)},Rs=(yt,Ur)=>{{var Vs=wt=>{var qr=$l();U(wt,qr)},js=wt=>{var qr=Ol();U(wt,qr)};Y(yt,wt=>{a(W)===ee.PLAYING?wt(Vs):wt(js,!1)},Ur)}};Y(bt,yt=>{a(W)===ee.ERROR?yt(Bs):yt(Rs,!1)},_s)}};Y(or,bt=>{a(W)===ee.LOADING?bt(Rt):bt(Ds,!1)})}G(H),Me(()=>{N(H,"title",a(D).getAudioChallenge),H.disabled=a(W)===ee.LOADING||a(W)===ee.ERROR||a(nt),N(H,"aria-label",a(W)===ee.LOADING?a(D).loading:a(D).getAudioChallenge)}),U(be,H)};Y(O,be=>{a(z).challenge.codeChallenge.audio&&be(q)})}var Q=J(O,2);Q.__click=[bl,_e],G(E);var se=J(E,2),qe=Z(se);{var Kr=be=>{Hr(be,()=>16)};Y(qe,be=>{a(nt)&&be(Kr)})}var ir=J(qe);G(se),G(A);var Ls=J(A,2);{var Is=be=>{var H=kl(),or=Z(H);G(H),ar(H,Rt=>w(Ke,Rt),()=>a(Ke)),Me(Rt=>N(or,"src",Rt),[()=>Zn(a(z).challenge.codeChallenge.audio,{language:Ve()})]),ze("loadstart",H,hs),ze("canplay",H,us),ze("pause",H,fs),ze("playing",H,ds),ze("ended",H,ls),ze("error",or,cs),U(be,H)};Y(Ls,be=>{a(z).challenge.codeChallenge.audio&&a(Rr)&&be(Is)})}G(p),G(h),Me(()=>{N(h,"aria-label",a(D).verificationRequired),N(y,"src",a(z).challenge.codeChallenge.image),N(g,"minlength",a(z).challenge.codeChallenge.length||1),N(g,"maxlength",a(z).challenge.codeChallenge.length),N(g,"placeholder",a(D).enterCode),N(g,"aria-label",a(W)===ee.LOADING?a(D).loading:a(W)===ee.PLAYING?"":a(D).enterCodeAria),N(g,"aria-live",a(W)?"assertive":"polite"),N(g,"aria-busy",a(W)===ee.LOADING),g.disabled=a(nt),N(Q,"aria-label",a(D).reload),N(Q,"title",a(D).reload),Q.disabled=a(nt),se.disabled=a(nt),N(se,"aria-label",a(D).verify),za(ir,` ${a(D).verify??""}`)}),ze("submit",p,ps,!0),U(o,h)};Y(Cs,o=>{var h;(h=a(z))!=null&&h.challenge.codeChallenge&&o(ks)})}G(Pr);var Ei=J(Pr,2);{var Ts=o=>{var h=Fl(),p=J(Z(h),2);{var y=A=>{var E=Ml(),O=Z(E);st(O,()=>a(D).expired),G(E),Me(()=>N(E,"title",a(rt))),U(A,E)},g=A=>{var E=Nl(),O=Z(E);st(O,()=>a(D).error),G(E),Me(()=>N(E,"title",a(rt))),U(A,E)};Y(p,A=>{a(T)===x.EXPIRED?A(y):A(g,!1)})}G(h),U(o,h)};Y(Ei,o=>{(a(rt)||a(T)===x.EXPIRED)&&o(Ts)})}var Ai=J(Ei,2);{var Ms=o=>{var h=Sl(),p=Z(h),y=Z(p);st(y,()=>a(D).footer),G(p),G(h),U(o,h)};Y(Ai,o=>{a(D).footer&&(X()!==!0||a(Dr))&&o(Ms)})}var Ns=J(Ai,2);{var Fs=o=>{var h=Ll();ar(h,p=>w(It,p),()=>a(It)),U(o,h)};Y(Ns,o=>{k()&&o(Fs)})}G(mt),ar(mt,o=>w(V,o),()=>a(V)),Me(o=>{N(mt,"data-state",a(T)),N(mt,"data-floating",k()),N(mt,"data-overlay",me()),mi=Ja(rr,1,"altcha-checkbox",null,mi,o),N(ot,"id",a(qn)),ot.required=l()!=="onsubmit"&&(!k()||l()!=="off"),N(nr,"for",a(qn))},[()=>({"altcha-checkbox-verifying":a(T)===x.VERIFYING})]),ze("invalid",ot,ti),tl(ot,()=>a(Lt),o=>w(Lt,o)),U(r,gi);var Ss=Oo({clarify:Dt,configure:ui,getConfiguration:hi,getFloatingAnchor:di,getPlugin:ys,getState:fi,hide:_t,repositionFloating:Bt,reset:it,setFloatingAnchor:pi,setState:ke,show:tr,verify:_e,get auto(){return l()},set auto(o=void 0){l(o),$()},get blockspam(){return u()},set blockspam(o=void 0){u(o),$()},get challengeurl(){return d()},set challengeurl(o=void 0){d(o),$()},get challengejson(){return f()},set challengejson(o=void 0){f(o),$()},get credentials(){return v()},set credentials(o=void 0){v(o),$()},get customfetch(){return m()},set customfetch(o=void 0){m(o),$()},get debug(){return b()},set debug(o=!1){b(o),$()},get delay(){return F()},set delay(o=0){F(o),$()},get disableautofocus(){return j()},set disableautofocus(o=!1){j(o),$()},get expire(){return P()},set expire(o=void 0){P(o),$()},get floating(){return k()},set floating(o=void 0){k(o),$()},get floatinganchor(){return ie()},set floatinganchor(o=void 0){ie(o),$()},get floatingoffset(){return oe()},set floatingoffset(o=void 0){oe(o),$()},get floatingpersist(){return xe()},set floatingpersist(o=!1){xe(o),$()},get hidefooter(){return X()},set hidefooter(o=!1){X(o),$()},get hidelogo(){return K()},set hidelogo(o=!1){K(o),$()},get id(){return $e()},set id(o=void 0){$e(o),$()},get language(){return Ve()},set language(o=void 0){Ve(o),$()},get name(){return Qe()},set name(o="altcha"){Qe(o),$()},get maxnumber(){return et()},set maxnumber(o=1e6){et(o),$()},get mockerror(){return Mt()},set mockerror(o=!1){Mt(o),$()},get obfuscated(){return je()},set obfuscated(o=void 0){je(o),$()},get overlay(){return me()},set overlay(o=void 0){me(o),$()},get overlaycontent(){return Nt()},set overlaycontent(o=void 0){Nt(o),$()},get plugins(){return Qt()},set plugins(o=void 0){Qt(o),$()},get refetchonexpire(){return Ft()},set refetchonexpire(o=!0){Ft(o),$()},get sentinel(){return tt()},set sentinel(o=void 0){tt(o),$()},get spamfilter(){return Oe()},set spamfilter(o=!1){Oe(o),$()},get strings(){return ft()},set strings(o=void 0){ft(o),$()},get test(){return fe()},set test(o=!1){fe(o),$()},get verifyurl(){return te()},set verifyurl(o=void 0){te(o),$()},get workers(){return pt()},set workers(o=Math.min(16,navigator.hardwareConcurrency||8)){pt(o),$()},get workerurl(){return St()},set workerurl(o=void 0){St(o),$()}});return s(),Ss}qa(["change","keydown","click"]);customElements.define("altcha-widget",cl(Dl,{blockspam:{type:"Boolean"},debug:{type:"Boolean"},delay:{type:"Number"},disableautofocus:{type:"Boolean"},expire:{type:"Number"},floatingoffset:{type:"Number"},hidefooter:{type:"Boolean"},hidelogo:{type:"Boolean"},maxnumber:{type:"Number"},mockerror:{type:"Boolean"},refetchonexpire:{type:"Boolean"},test:{type:"Boolean"},workers:{type:"Number"},auto:{},challengeurl:{},challengejson:{},credentials:{},customfetch:{},floating:{},floatinganchor:{},floatingpersist:{},id:{},language:{},name:{},obfuscated:{},overlay:{},overlaycontent:{},plugins:{},sentinel:{},spamfilter:{},strings:{},verifyurl:{},workerurl:{}},["default"],["clarify","configure","getConfiguration","getFloatingAnchor","getPlugin","getState","hide","repositionFloating","reset","setFloatingAnchor","setState","show","verify"],!1));var Ro='@keyframes overlay-slidein{to{opacity:1;top:50%}}@keyframes altcha-spinner{to{transform:rotate(360deg)}}.altcha{background:var(--altcha-color-base, transparent);border:var(--altcha-border-width, 1px) solid var(--altcha-color-border, #a0a0a0);border-radius:var(--altcha-border-radius, 3px);color:var(--altcha-color-text, currentColor);display:flex;flex-direction:column;max-width:var(--altcha-max-width, 260px);position:relative}.altcha:focus-within{border-color:var(--altcha-color-border-focus, currentColor)}.altcha[data-floating]{background:var(--altcha-color-base, white);display:none;filter:drop-shadow(3px 3px 6px rgba(0,0,0,.2));left:-100%;position:fixed;top:-100%;width:var(--altcha-max-width, 260px);z-index:999999}.altcha[data-floating=top] .altcha-anchor-arrow{border-bottom-color:transparent;border-top-color:var(--altcha-color-border, #a0a0a0);bottom:-12px;top:auto}.altcha[data-floating=bottom]:focus-within::after{border-bottom-color:var(--altcha-color-border-focus, currentColor)}.altcha[data-floating=top]:focus-within::after{border-top-color:var(--altcha-color-border-focus, currentColor)}.altcha[data-floating]:not([data-state=unverified]){display:block}.altcha-anchor-arrow{border:6px solid transparent;border-bottom-color:var(--altcha-color-border, #a0a0a0);content:"";height:0;left:12px;position:absolute;top:-12px;width:0}.altcha-main{align-items:center;display:flex;gap:.4rem;padding:.7rem;position:relative}.altcha-code-challenge{background:var(--altcha-color-base, white);border:1px solid var(--altcha-color-border-focus, currentColor);border-radius:var(--altcha-border-radius, 3px);filter:drop-shadow(3px 3px 6px rgba(0,0,0,.2));padding:.5rem;position:absolute;top:2.5rem;z-index:9999999}.altcha-code-challenge>form{display:flex;flex-direction:column;gap:.5rem}.altcha-code-challenge-input{border:1px solid currentColor;border-radius:3px;box-sizing:border-box;outline:0;font-size:16px;padding:.35rem;width:220px}.altcha-code-challenge-input:focus{outline:2px solid color-mix(in srgb,var(--altcha-color-active, #1D1DC9) 20%,transparent)}.altcha-code-challenge-input:disabled{opacity:.7}.altcha-code-challenge-image{background-color:#fff;border:1px solid currentColor;border-radius:3px;box-sizing:border-box;object-fit:contain;height:50px;width:220px}.altcha-code-challenge-audio,.altcha-code-challenge-reload{background:color-mix(in srgb,var(--altcha-color-text, currentColor) 10%,transparent);border:0;border-radius:3px;color:var(--altcha-color-text, currentColor);cursor:pointer;display:flex;align-items:center;justify-content:center;padding:.35rem}.altcha-code-challenge-audio:disabled,.altcha-code-challenge-reload:disabled,.altcha-code-challenge-verify:disabled{opacity:.7;pointer-events:none}.altcha-code-challenge-audio>*,.altcha-code-challenge-reload>*{height:20px;width:20px}.altcha-code-challenge-buttons{display:flex;justify-content:space-between}.altcha-code-challenge-buttons-left{display:flex;gap:.25rem}.altcha-code-challenge-verify{align-items:center;background:var(--altcha-color-active, #1D1DC9);border:0;border-radius:3px;color:#fff;cursor:pointer;display:flex;gap:.5rem;font-size:100%;padding:.35rem 1rem}.altcha-code-challenge-arrow{border:6px solid transparent;border-bottom-color:var(--altcha-color-border, currentColor);content:"";height:0;left:.15rem;position:absolute;top:-12px;width:0}.altcha[data-floating=top] .altcha-code-challenge{top:-150px}.altcha[data-floating=top] .altcha-code-challenge-arrow{border-bottom-color:transparent;border-top-color:var(--altcha-color-border, currentColor);bottom:-12px;top:auto}.altcha-label{cursor:pointer;flex-grow:1}.altcha-logo{color:currentColor!important;opacity:.7}.altcha-footer:hover,.altcha-logo:hover{opacity:1}.altcha-error{color:var(--altcha-color-error-text, #f23939);display:flex;font-size:.85rem;gap:.3rem;padding:0 .7rem .7rem}.altcha-footer{align-items:center;background-color:var(--altcha-color-footer-bg, transparent);display:flex;font-size:.75rem;opacity:.7;justify-content:end;padding:.2rem .7rem}.altcha-footer a{color:currentColor}.altcha-checkbox{display:flex;align-items:center;justify-content:center;height:24px;position:relative;width:24px}.altcha-checkbox .altcha-spinner{bottom:0;left:0;position:absolute;right:0;top:0}.altcha-checkbox input{width:18px;height:18px;margin:0}.altcha-checkbox-verifying input{appearance:none;opacity:0;pointer-events:none}.altcha-spinner{animation:altcha-spinner .75s infinite linear;transform-origin:center}.altcha-overlay{--altcha-color-base:#fff;--altcha-color-text:#000;animation:overlay-slidein .5s forwards;display:flex;flex-direction:column;gap:.5rem;left:50%;width:260px;opacity:0;position:fixed;top:45%;transform:translate(-50%,-50%)}.altcha-overlay-backdrop{background:rgba(0,0,0,.5);bottom:0;display:none;left:0;position:fixed;right:0;top:0;z-index:99999999}.altcha-overlay-close-button{align-self:flex-end;background:0 0;border:0;padding:.25rem;cursor:pointer;color:currentColor;font-size:130%;line-height:1;opacity:.7}@media (max-height:450px){.altcha-overlay{top:10%!important;transform:translate(-50%,0)}}';function Vo(r,e="__altcha-css"){if(!document.getElementById(e)){let t=document.createElement("style");t.id=e,t.textContent=r,document.head.appendChild(t)}}globalThis.altchaCreateWorker=r=>r?new Worker(new URL(r)):new Us;Vo(Ro);Vo(Ro);var kr=()=>{};function _l(r,e){return r!=r?e==e:r!==e||r!==null&&typeof r=="object"||typeof r=="function"}var gn=!1;function Bl(r){var e=gn;try{return gn=!0,r()}finally{gn=e}}function Rl(r,e,t){if(r==null)return e(void 0),kr;let n=Bl(()=>r.subscribe(e,t));return n.unsubscribe?()=>n.unsubscribe():n}var Tt=[];function Vl(r,e=kr){let t=null,n=new Set;function i(l){if(_l(r,l)&&(r=l,t)){let u=!Tt.length;for(let d of n)d[1](),Tt.push(d,r);if(u){for(let d=0;d<Tt.length;d+=2)Tt[d][0](Tt[d+1]);Tt.length=0}}}function s(l){i(l(r))}function c(l,u=kr){let d=[l,u];return n.add(d),n.size===1&&(t=e(i,s)||kr),l(r),()=>{n.delete(d),n.size===0&&t&&(t(),t=null)}}return{set:i,update:s,subscribe:c}}function vn(r){let e;return Rl(r,t=>e=t)(),e}globalThis.altchaPlugins=globalThis.altchaPlugins||[];globalThis.altchaI18n=globalThis.altchaI18n||{get:r=>vn(globalThis.altchaI18n.store)[r],set:(r,e)=>{Object.assign(vn(globalThis.altchaI18n.store),{[r]:e}),globalThis.altchaI18n.store.set(vn(globalThis.altchaI18n.store))},store:Vl({})};var jl={ariaLinkLabel:"Visitez Altcha.org",enterCode:"Entrez le code",enterCodeAria:"Entrez le code que vous entendez. Appuyez sur Espace pour \xE9couter l'audio.",error:"\xC9chec de la v\xE9rification. Essayez \xE0 nouveau plus tard.",expired:"La v\xE9rification a expir\xE9. Essayez \xE0 nouveau.",verificationRequired:"V\xE9rification requise !",footer:'Prot\xE9g\xE9 par <a href="https://altcha.org/" target="_blank" aria-label="Visitez Altcha.org">ALTCHA</a>',getAudioChallenge:"Obtenir un d\xE9fi audio",label:"Pas un robot",loading:"Chargement...",reload:"Recharger",verify:"V\xE9rifier",verified:"V\xE9rifi\xE9",verifying:"V\xE9rification en cours...",waitAlert:"V\xE9rification en cours... veuillez patienter."};globalThis.altchaI18n.set("fr-fr",jl);var mn=class{constructor(e,t,n){this.eventTarget=e,this.eventName=t,this.eventOptions=n,this.unorderedBindings=new Set}connect(){this.eventTarget.addEventListener(this.eventName,this,this.eventOptions)}disconnect(){this.eventTarget.removeEventListener(this.eventName,this,this.eventOptions)}bindingConnected(e){this.unorderedBindings.add(e)}bindingDisconnected(e){this.unorderedBindings.delete(e)}handleEvent(e){let t=Pl(e);for(let n of this.bindings){if(t.immediatePropagationStopped)break;n.handleEvent(t)}}hasBindings(){return this.unorderedBindings.size>0}get bindings(){return Array.from(this.unorderedBindings).sort((e,t)=>{let n=e.index,i=t.index;return n<i?-1:n>i?1:0})}};function Pl(r){if("immediatePropagationStopped"in r)return r;{let{stopImmediatePropagation:e}=r;return Object.assign(r,{immediatePropagationStopped:!1,stopImmediatePropagation(){this.immediatePropagationStopped=!0,e.call(this)}})}}var bn=class{constructor(e){this.application=e,this.eventListenerMaps=new Map,this.started=!1}start(){this.started||(this.started=!0,this.eventListeners.forEach(e=>e.connect()))}stop(){this.started&&(this.started=!1,this.eventListeners.forEach(e=>e.disconnect()))}get eventListeners(){return Array.from(this.eventListenerMaps.values()).reduce((e,t)=>e.concat(Array.from(t.values())),[])}bindingConnected(e){this.fetchEventListenerForBinding(e).bindingConnected(e)}bindingDisconnected(e,t=!1){this.fetchEventListenerForBinding(e).bindingDisconnected(e),t&&this.clearEventListenersForBinding(e)}handleError(e,t,n={}){this.application.handleError(e,`Error ${t}`,n)}clearEventListenersForBinding(e){let t=this.fetchEventListenerForBinding(e);t.hasBindings()||(t.disconnect(),this.removeMappedEventListenerFor(e))}removeMappedEventListenerFor(e){let{eventTarget:t,eventName:n,eventOptions:i}=e,s=this.fetchEventListenerMapForEventTarget(t),c=this.cacheKey(n,i);s.delete(c),s.size==0&&this.eventListenerMaps.delete(t)}fetchEventListenerForBinding(e){let{eventTarget:t,eventName:n,eventOptions:i}=e;return this.fetchEventListener(t,n,i)}fetchEventListener(e,t,n){let i=this.fetchEventListenerMapForEventTarget(e),s=this.cacheKey(t,n),c=i.get(s);return c||(c=this.createEventListener(e,t,n),i.set(s,c)),c}createEventListener(e,t,n){let i=new mn(e,t,n);return this.started&&i.connect(),i}fetchEventListenerMapForEventTarget(e){let t=this.eventListenerMaps.get(e);return t||(t=new Map,this.eventListenerMaps.set(e,t)),t}cacheKey(e,t){let n=[e];return Object.keys(t).sort().forEach(i=>{n.push(`${t[i]?"":"!"}${i}`)}),n.join(":")}},Kl={stop({event:r,value:e}){return e&&r.stopPropagation(),!0},prevent({event:r,value:e}){return e&&r.preventDefault(),!0},self({event:r,value:e,element:t}){return e?t===r.target:!0}},Ul=/^(?:(?:([^.]+?)\+)?(.+?)(?:\.(.+?))?(?:@(window|document))?->)?(.+?)(?:#([^:]+?))(?::(.+))?$/;function ql(r){let t=r.trim().match(Ul)||[],n=t[2],i=t[3];return i&&!["keydown","keyup","keypress"].includes(n)&&(n+=`.${i}`,i=""),{eventTarget:zl(t[4]),eventName:n,eventOptions:t[7]?Wl(t[7]):{},identifier:t[5],methodName:t[6],keyFilter:t[1]||i}}function zl(r){if(r=="window")return window;if(r=="document")return document}function Wl(r){return r.split(":").reduce((e,t)=>Object.assign(e,{[t.replace(/^!/,"")]:!/^!/.test(t)}),{})}function Hl(r){if(r==window)return"window";if(r==document)return"document"}function jn(r){return r.replace(/(?:[_-])([a-z0-9])/g,(e,t)=>t.toUpperCase())}function yn(r){return jn(r.replace(/--/g,"-").replace(/__/g,"_"))}function Yt(r){return r.charAt(0).toUpperCase()+r.slice(1)}function Zo(r){return r.replace(/([A-Z])/g,(e,t)=>`-${t.toLowerCase()}`)}function Gl(r){return r.match(/[^\s]+/g)||[]}function jo(r){return r!=null}function wn(r,e){return Object.prototype.hasOwnProperty.call(r,e)}var Po=["meta","ctrl","alt","shift"],En=class{constructor(e,t,n,i){this.element=e,this.index=t,this.eventTarget=n.eventTarget||e,this.eventName=n.eventName||Zl(e)||Tr("missing event name"),this.eventOptions=n.eventOptions||{},this.identifier=n.identifier||Tr("missing identifier"),this.methodName=n.methodName||Tr("missing method name"),this.keyFilter=n.keyFilter||"",this.schema=i}static forToken(e,t){return new this(e.element,e.index,ql(e.content),t)}toString(){let e=this.keyFilter?`.${this.keyFilter}`:"",t=this.eventTargetName?`@${this.eventTargetName}`:"";return`${this.eventName}${e}${t}->${this.identifier}#${this.methodName}`}shouldIgnoreKeyboardEvent(e){if(!this.keyFilter)return!1;let t=this.keyFilter.split("+");if(this.keyFilterDissatisfied(e,t))return!0;let n=t.filter(i=>!Po.includes(i))[0];return n?(wn(this.keyMappings,n)||Tr(`contains unknown key filter: ${this.keyFilter}`),this.keyMappings[n].toLowerCase()!==e.key.toLowerCase()):!1}shouldIgnoreMouseEvent(e){if(!this.keyFilter)return!1;let t=[this.keyFilter];return!!this.keyFilterDissatisfied(e,t)}get params(){let e={},t=new RegExp(`^data-${this.identifier}-(.+)-param$`,"i");for(let{name:n,value:i}of Array.from(this.element.attributes)){let s=n.match(t),c=s&&s[1];c&&(e[jn(c)]=Jl(i))}return e}get eventTargetName(){return Hl(this.eventTarget)}get keyMappings(){return this.schema.keyMappings}keyFilterDissatisfied(e,t){let[n,i,s,c]=Po.map(l=>t.includes(l));return e.metaKey!==n||e.ctrlKey!==i||e.altKey!==s||e.shiftKey!==c}},Ko={a:()=>"click",button:()=>"click",form:()=>"submit",details:()=>"toggle",input:r=>r.getAttribute("type")=="submit"?"click":"input",select:()=>"change",textarea:()=>"input"};function Zl(r){let e=r.tagName.toLowerCase();if(e in Ko)return Ko[e](r)}function Tr(r){throw new Error(r)}function Jl(r){try{return JSON.parse(r)}catch{return r}}var An=class{constructor(e,t){this.context=e,this.action=t}get index(){return this.action.index}get eventTarget(){return this.action.eventTarget}get eventOptions(){return this.action.eventOptions}get identifier(){return this.context.identifier}handleEvent(e){let t=this.prepareActionEvent(e);this.willBeInvokedByEvent(e)&&this.applyEventModifiers(t)&&this.invokeWithEvent(t)}get eventName(){return this.action.eventName}get method(){let e=this.controller[this.methodName];if(typeof e=="function")return e;throw new Error(`Action "${this.action}" references undefined method "${this.methodName}"`)}applyEventModifiers(e){let{element:t}=this.action,{actionDescriptorFilters:n}=this.context.application,{controller:i}=this.context,s=!0;for(let[c,l]of Object.entries(this.eventOptions))if(c in n){let u=n[c];s=s&&u({name:c,value:l,event:e,element:t,controller:i})}else continue;return s}prepareActionEvent(e){return Object.assign(e,{params:this.action.params})}invokeWithEvent(e){let{target:t,currentTarget:n}=e;try{this.method.call(this.controller,e),this.context.logDebugActivity(this.methodName,{event:e,target:t,currentTarget:n,action:this.methodName})}catch(i){let{identifier:s,controller:c,element:l,index:u}=this,d={identifier:s,controller:c,element:l,index:u,event:e};this.context.handleError(i,`invoking action "${this.action}"`,d)}}willBeInvokedByEvent(e){let t=e.target;return e instanceof KeyboardEvent&&this.action.shouldIgnoreKeyboardEvent(e)||e instanceof MouseEvent&&this.action.shouldIgnoreMouseEvent(e)?!1:this.element===t?!0:t instanceof Element&&this.element.contains(t)?this.scope.containsElement(t):this.scope.containsElement(this.action.element)}get controller(){return this.context.controller}get methodName(){return this.action.methodName}get element(){return this.scope.element}get scope(){return this.context.scope}},Mr=class{constructor(e,t){this.mutationObserverInit={attributes:!0,childList:!0,subtree:!0},this.element=e,this.started=!1,this.delegate=t,this.elements=new Set,this.mutationObserver=new MutationObserver(n=>this.processMutations(n))}start(){this.started||(this.started=!0,this.mutationObserver.observe(this.element,this.mutationObserverInit),this.refresh())}pause(e){this.started&&(this.mutationObserver.disconnect(),this.started=!1),e(),this.started||(this.mutationObserver.observe(this.element,this.mutationObserverInit),this.started=!0)}stop(){this.started&&(this.mutationObserver.takeRecords(),this.mutationObserver.disconnect(),this.started=!1)}refresh(){if(this.started){let e=new Set(this.matchElementsInTree());for(let t of Array.from(this.elements))e.has(t)||this.removeElement(t);for(let t of Array.from(e))this.addElement(t)}}processMutations(e){if(this.started)for(let t of e)this.processMutation(t)}processMutation(e){e.type=="attributes"?this.processAttributeChange(e.target,e.attributeName):e.type=="childList"&&(this.processRemovedNodes(e.removedNodes),this.processAddedNodes(e.addedNodes))}processAttributeChange(e,t){this.elements.has(e)?this.delegate.elementAttributeChanged&&this.matchElement(e)?this.delegate.elementAttributeChanged(e,t):this.removeElement(e):this.matchElement(e)&&this.addElement(e)}processRemovedNodes(e){for(let t of Array.from(e)){let n=this.elementFromNode(t);n&&this.processTree(n,this.removeElement)}}processAddedNodes(e){for(let t of Array.from(e)){let n=this.elementFromNode(t);n&&this.elementIsActive(n)&&this.processTree(n,this.addElement)}}matchElement(e){return this.delegate.matchElement(e)}matchElementsInTree(e=this.element){return this.delegate.matchElementsInTree(e)}processTree(e,t){for(let n of this.matchElementsInTree(e))t.call(this,n)}elementFromNode(e){if(e.nodeType==Node.ELEMENT_NODE)return e}elementIsActive(e){return e.isConnected!=this.element.isConnected?!1:this.element.contains(e)}addElement(e){this.elements.has(e)||this.elementIsActive(e)&&(this.elements.add(e),this.delegate.elementMatched&&this.delegate.elementMatched(e))}removeElement(e){this.elements.has(e)&&(this.elements.delete(e),this.delegate.elementUnmatched&&this.delegate.elementUnmatched(e))}},Nr=class{constructor(e,t,n){this.attributeName=t,this.delegate=n,this.elementObserver=new Mr(e,this)}get element(){return this.elementObserver.element}get selector(){return`[${this.attributeName}]`}start(){this.elementObserver.start()}pause(e){this.elementObserver.pause(e)}stop(){this.elementObserver.stop()}refresh(){this.elementObserver.refresh()}get started(){return this.elementObserver.started}matchElement(e){return e.hasAttribute(this.attributeName)}matchElementsInTree(e){let t=this.matchElement(e)?[e]:[],n=Array.from(e.querySelectorAll(this.selector));return t.concat(n)}elementMatched(e){this.delegate.elementMatchedAttribute&&this.delegate.elementMatchedAttribute(e,this.attributeName)}elementUnmatched(e){this.delegate.elementUnmatchedAttribute&&this.delegate.elementUnmatchedAttribute(e,this.attributeName)}elementAttributeChanged(e,t){this.delegate.elementAttributeValueChanged&&this.attributeName==t&&this.delegate.elementAttributeValueChanged(e,t)}};function Yl(r,e,t){Jo(r,e).add(t)}function Xl(r,e,t){Jo(r,e).delete(t),Ql(r,e)}function Jo(r,e){let t=r.get(e);return t||(t=new Set,r.set(e,t)),t}function Ql(r,e){let t=r.get(e);t!=null&&t.size==0&&r.delete(e)}var Re=class{constructor(){this.valuesByKey=new Map}get keys(){return Array.from(this.valuesByKey.keys())}get values(){return Array.from(this.valuesByKey.values()).reduce((t,n)=>t.concat(Array.from(n)),[])}get size(){return Array.from(this.valuesByKey.values()).reduce((t,n)=>t+n.size,0)}add(e,t){Yl(this.valuesByKey,e,t)}delete(e,t){Xl(this.valuesByKey,e,t)}has(e,t){let n=this.valuesByKey.get(e);return n!=null&&n.has(t)}hasKey(e){return this.valuesByKey.has(e)}hasValue(e){return Array.from(this.valuesByKey.values()).some(n=>n.has(e))}getValuesForKey(e){let t=this.valuesByKey.get(e);return t?Array.from(t):[]}getKeysForValue(e){return Array.from(this.valuesByKey).filter(([t,n])=>n.has(e)).map(([t,n])=>t)}};var xn=class{constructor(e,t,n,i){this._selector=t,this.details=i,this.elementObserver=new Mr(e,this),this.delegate=n,this.matchesByElement=new Re}get started(){return this.elementObserver.started}get selector(){return this._selector}set selector(e){this._selector=e,this.refresh()}start(){this.elementObserver.start()}pause(e){this.elementObserver.pause(e)}stop(){this.elementObserver.stop()}refresh(){this.elementObserver.refresh()}get element(){return this.elementObserver.element}matchElement(e){let{selector:t}=this;if(t){let n=e.matches(t);return this.delegate.selectorMatchElement?n&&this.delegate.selectorMatchElement(e,this.details):n}else return!1}matchElementsInTree(e){let{selector:t}=this;if(t){let n=this.matchElement(e)?[e]:[],i=Array.from(e.querySelectorAll(t)).filter(s=>this.matchElement(s));return n.concat(i)}else return[]}elementMatched(e){let{selector:t}=this;t&&this.selectorMatched(e,t)}elementUnmatched(e){let t=this.matchesByElement.getKeysForValue(e);for(let n of t)this.selectorUnmatched(e,n)}elementAttributeChanged(e,t){let{selector:n}=this;if(n){let i=this.matchElement(e),s=this.matchesByElement.has(n,e);i&&!s?this.selectorMatched(e,n):!i&&s&&this.selectorUnmatched(e,n)}}selectorMatched(e,t){this.delegate.selectorMatched(e,t,this.details),this.matchesByElement.add(t,e)}selectorUnmatched(e,t){this.delegate.selectorUnmatched(e,t,this.details),this.matchesByElement.delete(t,e)}},$n=class{constructor(e,t){this.element=e,this.delegate=t,this.started=!1,this.stringMap=new Map,this.mutationObserver=new MutationObserver(n=>this.processMutations(n))}start(){this.started||(this.started=!0,this.mutationObserver.observe(this.element,{attributes:!0,attributeOldValue:!0}),this.refresh())}stop(){this.started&&(this.mutationObserver.takeRecords(),this.mutationObserver.disconnect(),this.started=!1)}refresh(){if(this.started)for(let e of this.knownAttributeNames)this.refreshAttribute(e,null)}processMutations(e){if(this.started)for(let t of e)this.processMutation(t)}processMutation(e){let t=e.attributeName;t&&this.refreshAttribute(t,e.oldValue)}refreshAttribute(e,t){let n=this.delegate.getStringMapKeyForAttribute(e);if(n!=null){this.stringMap.has(e)||this.stringMapKeyAdded(n,e);let i=this.element.getAttribute(e);if(this.stringMap.get(e)!=i&&this.stringMapValueChanged(i,n,t),i==null){let s=this.stringMap.get(e);this.stringMap.delete(e),s&&this.stringMapKeyRemoved(n,e,s)}else this.stringMap.set(e,i)}}stringMapKeyAdded(e,t){this.delegate.stringMapKeyAdded&&this.delegate.stringMapKeyAdded(e,t)}stringMapValueChanged(e,t,n){this.delegate.stringMapValueChanged&&this.delegate.stringMapValueChanged(e,t,n)}stringMapKeyRemoved(e,t,n){this.delegate.stringMapKeyRemoved&&this.delegate.stringMapKeyRemoved(e,t,n)}get knownAttributeNames(){return Array.from(new Set(this.currentAttributeNames.concat(this.recordedAttributeNames)))}get currentAttributeNames(){return Array.from(this.element.attributes).map(e=>e.name)}get recordedAttributeNames(){return Array.from(this.stringMap.keys())}},Fr=class{constructor(e,t,n){this.attributeObserver=new Nr(e,t,this),this.delegate=n,this.tokensByElement=new Re}get started(){return this.attributeObserver.started}start(){this.attributeObserver.start()}pause(e){this.attributeObserver.pause(e)}stop(){this.attributeObserver.stop()}refresh(){this.attributeObserver.refresh()}get element(){return this.attributeObserver.element}get attributeName(){return this.attributeObserver.attributeName}elementMatchedAttribute(e){this.tokensMatched(this.readTokensForElement(e))}elementAttributeValueChanged(e){let[t,n]=this.refreshTokensForElement(e);this.tokensUnmatched(t),this.tokensMatched(n)}elementUnmatchedAttribute(e){this.tokensUnmatched(this.tokensByElement.getValuesForKey(e))}tokensMatched(e){e.forEach(t=>this.tokenMatched(t))}tokensUnmatched(e){e.forEach(t=>this.tokenUnmatched(t))}tokenMatched(e){this.delegate.tokenMatched(e),this.tokensByElement.add(e.element,e)}tokenUnmatched(e){this.delegate.tokenUnmatched(e),this.tokensByElement.delete(e.element,e)}refreshTokensForElement(e){let t=this.tokensByElement.getValuesForKey(e),n=this.readTokensForElement(e),i=tc(t,n).findIndex(([s,c])=>!rc(s,c));return i==-1?[[],[]]:[t.slice(i),n.slice(i)]}readTokensForElement(e){let t=this.attributeName,n=e.getAttribute(t)||"";return ec(n,e,t)}};function ec(r,e,t){return r.trim().split(/\s+/).filter(n=>n.length).map((n,i)=>({element:e,attributeName:t,content:n,index:i}))}function tc(r,e){let t=Math.max(r.length,e.length);return Array.from({length:t},(n,i)=>[r[i],e[i]])}function rc(r,e){return r&&e&&r.index==e.index&&r.content==e.content}var Sr=class{constructor(e,t,n){this.tokenListObserver=new Fr(e,t,this),this.delegate=n,this.parseResultsByToken=new WeakMap,this.valuesByTokenByElement=new WeakMap}get started(){return this.tokenListObserver.started}start(){this.tokenListObserver.start()}stop(){this.tokenListObserver.stop()}refresh(){this.tokenListObserver.refresh()}get element(){return this.tokenListObserver.element}get attributeName(){return this.tokenListObserver.attributeName}tokenMatched(e){let{element:t}=e,{value:n}=this.fetchParseResultForToken(e);n&&(this.fetchValuesByTokenForElement(t).set(e,n),this.delegate.elementMatchedValue(t,n))}tokenUnmatched(e){let{element:t}=e,{value:n}=this.fetchParseResultForToken(e);n&&(this.fetchValuesByTokenForElement(t).delete(e),this.delegate.elementUnmatchedValue(t,n))}fetchParseResultForToken(e){let t=this.parseResultsByToken.get(e);return t||(t=this.parseToken(e),this.parseResultsByToken.set(e,t)),t}fetchValuesByTokenForElement(e){let t=this.valuesByTokenByElement.get(e);return t||(t=new Map,this.valuesByTokenByElement.set(e,t)),t}parseToken(e){try{return{value:this.delegate.parseValueForToken(e)}}catch(t){return{error:t}}}},On=class{constructor(e,t){this.context=e,this.delegate=t,this.bindingsByAction=new Map}start(){this.valueListObserver||(this.valueListObserver=new Sr(this.element,this.actionAttribute,this),this.valueListObserver.start())}stop(){this.valueListObserver&&(this.valueListObserver.stop(),delete this.valueListObserver,this.disconnectAllActions())}get element(){return this.context.element}get identifier(){return this.context.identifier}get actionAttribute(){return this.schema.actionAttribute}get schema(){return this.context.schema}get bindings(){return Array.from(this.bindingsByAction.values())}connectAction(e){let t=new An(this.context,e);this.bindingsByAction.set(e,t),this.delegate.bindingConnected(t)}disconnectAction(e){let t=this.bindingsByAction.get(e);t&&(this.bindingsByAction.delete(e),this.delegate.bindingDisconnected(t))}disconnectAllActions(){this.bindings.forEach(e=>this.delegate.bindingDisconnected(e,!0)),this.bindingsByAction.clear()}parseValueForToken(e){let t=En.forToken(e,this.schema);if(t.identifier==this.identifier)return t}elementMatchedValue(e,t){this.connectAction(t)}elementUnmatchedValue(e,t){this.disconnectAction(t)}},Cn=class{constructor(e,t){this.context=e,this.receiver=t,this.stringMapObserver=new $n(this.element,this),this.valueDescriptorMap=this.controller.valueDescriptorMap}start(){this.stringMapObserver.start(),this.invokeChangedCallbacksForDefaultValues()}stop(){this.stringMapObserver.stop()}get element(){return this.context.element}get controller(){return this.context.controller}getStringMapKeyForAttribute(e){if(e in this.valueDescriptorMap)return this.valueDescriptorMap[e].name}stringMapKeyAdded(e,t){let n=this.valueDescriptorMap[t];this.hasValue(e)||this.invokeChangedCallback(e,n.writer(this.receiver[e]),n.writer(n.defaultValue))}stringMapValueChanged(e,t,n){let i=this.valueDescriptorNameMap[t];e!==null&&(n===null&&(n=i.writer(i.defaultValue)),this.invokeChangedCallback(t,e,n))}stringMapKeyRemoved(e,t,n){let i=this.valueDescriptorNameMap[e];this.hasValue(e)?this.invokeChangedCallback(e,i.writer(this.receiver[e]),n):this.invokeChangedCallback(e,i.writer(i.defaultValue),n)}invokeChangedCallbacksForDefaultValues(){for(let{key:e,name:t,defaultValue:n,writer:i}of this.valueDescriptors)n!=null&&!this.controller.data.has(e)&&this.invokeChangedCallback(t,i(n),void 0)}invokeChangedCallback(e,t,n){let i=`${e}Changed`,s=this.receiver[i];if(typeof s=="function"){let c=this.valueDescriptorNameMap[e];try{let l=c.reader(t),u=n;n&&(u=c.reader(n)),s.call(this.receiver,l,u)}catch(l){throw l instanceof TypeError&&(l.message=`Stimulus Value "${this.context.identifier}.${c.name}" - ${l.message}`),l}}}get valueDescriptors(){let{valueDescriptorMap:e}=this;return Object.keys(e).map(t=>e[t])}get valueDescriptorNameMap(){let e={};return Object.keys(this.valueDescriptorMap).forEach(t=>{let n=this.valueDescriptorMap[t];e[n.name]=n}),e}hasValue(e){let t=this.valueDescriptorNameMap[e],n=`has${Yt(t.name)}`;return this.receiver[n]}},kn=class{constructor(e,t){this.context=e,this.delegate=t,this.targetsByName=new Re}start(){this.tokenListObserver||(this.tokenListObserver=new Fr(this.element,this.attributeName,this),this.tokenListObserver.start())}stop(){this.tokenListObserver&&(this.disconnectAllTargets(),this.tokenListObserver.stop(),delete this.tokenListObserver)}tokenMatched({element:e,content:t}){this.scope.containsElement(e)&&this.connectTarget(e,t)}tokenUnmatched({element:e,content:t}){this.disconnectTarget(e,t)}connectTarget(e,t){var n;this.targetsByName.has(t,e)||(this.targetsByName.add(t,e),(n=this.tokenListObserver)===null||n===void 0||n.pause(()=>this.delegate.targetConnected(e,t)))}disconnectTarget(e,t){var n;this.targetsByName.has(t,e)&&(this.targetsByName.delete(t,e),(n=this.tokenListObserver)===null||n===void 0||n.pause(()=>this.delegate.targetDisconnected(e,t)))}disconnectAllTargets(){for(let e of this.targetsByName.keys)for(let t of this.targetsByName.getValuesForKey(e))this.disconnectTarget(t,e)}get attributeName(){return`data-${this.context.identifier}-target`}get element(){return this.context.element}get scope(){return this.context.scope}};function Xt(r,e){let t=Yo(r);return Array.from(t.reduce((n,i)=>(ic(i,e).forEach(s=>n.add(s)),n),new Set))}function nc(r,e){return Yo(r).reduce((n,i)=>(n.push(...oc(i,e)),n),[])}function Yo(r){let e=[];for(;r;)e.push(r),r=Object.getPrototypeOf(r);return e.reverse()}function ic(r,e){let t=r[e];return Array.isArray(t)?t:[]}function oc(r,e){let t=r[e];return t?Object.keys(t).map(n=>[n,t[n]]):[]}var Tn=class{constructor(e,t){this.started=!1,this.context=e,this.delegate=t,this.outletsByName=new Re,this.outletElementsByName=new Re,this.selectorObserverMap=new Map,this.attributeObserverMap=new Map}start(){this.started||(this.outletDefinitions.forEach(e=>{this.setupSelectorObserverForOutlet(e),this.setupAttributeObserverForOutlet(e)}),this.started=!0,this.dependentContexts.forEach(e=>e.refresh()))}refresh(){this.selectorObserverMap.forEach(e=>e.refresh()),this.attributeObserverMap.forEach(e=>e.refresh())}stop(){this.started&&(this.started=!1,this.disconnectAllOutlets(),this.stopSelectorObservers(),this.stopAttributeObservers())}stopSelectorObservers(){this.selectorObserverMap.size>0&&(this.selectorObserverMap.forEach(e=>e.stop()),this.selectorObserverMap.clear())}stopAttributeObservers(){this.attributeObserverMap.size>0&&(this.attributeObserverMap.forEach(e=>e.stop()),this.attributeObserverMap.clear())}selectorMatched(e,t,{outletName:n}){let i=this.getOutlet(e,n);i&&this.connectOutlet(i,e,n)}selectorUnmatched(e,t,{outletName:n}){let i=this.getOutletFromMap(e,n);i&&this.disconnectOutlet(i,e,n)}selectorMatchElement(e,{outletName:t}){let n=this.selector(t),i=this.hasOutlet(e,t),s=e.matches(`[${this.schema.controllerAttribute}~=${t}]`);return n?i&&s&&e.matches(n):!1}elementMatchedAttribute(e,t){let n=this.getOutletNameFromOutletAttributeName(t);n&&this.updateSelectorObserverForOutlet(n)}elementAttributeValueChanged(e,t){let n=this.getOutletNameFromOutletAttributeName(t);n&&this.updateSelectorObserverForOutlet(n)}elementUnmatchedAttribute(e,t){let n=this.getOutletNameFromOutletAttributeName(t);n&&this.updateSelectorObserverForOutlet(n)}connectOutlet(e,t,n){var i;this.outletElementsByName.has(n,t)||(this.outletsByName.add(n,e),this.outletElementsByName.add(n,t),(i=this.selectorObserverMap.get(n))===null||i===void 0||i.pause(()=>this.delegate.outletConnected(e,t,n)))}disconnectOutlet(e,t,n){var i;this.outletElementsByName.has(n,t)&&(this.outletsByName.delete(n,e),this.outletElementsByName.delete(n,t),(i=this.selectorObserverMap.get(n))===null||i===void 0||i.pause(()=>this.delegate.outletDisconnected(e,t,n)))}disconnectAllOutlets(){for(let e of this.outletElementsByName.keys)for(let t of this.outletElementsByName.getValuesForKey(e))for(let n of this.outletsByName.getValuesForKey(e))this.disconnectOutlet(n,t,e)}updateSelectorObserverForOutlet(e){let t=this.selectorObserverMap.get(e);t&&(t.selector=this.selector(e))}setupSelectorObserverForOutlet(e){let t=this.selector(e),n=new xn(document.body,t,this,{outletName:e});this.selectorObserverMap.set(e,n),n.start()}setupAttributeObserverForOutlet(e){let t=this.attributeNameForOutletName(e),n=new Nr(this.scope.element,t,this);this.attributeObserverMap.set(e,n),n.start()}selector(e){return this.scope.outlets.getSelectorForOutletName(e)}attributeNameForOutletName(e){return this.scope.schema.outletAttributeForScope(this.identifier,e)}getOutletNameFromOutletAttributeName(e){return this.outletDefinitions.find(t=>this.attributeNameForOutletName(t)===e)}get outletDependencies(){let e=new Re;return this.router.modules.forEach(t=>{let n=t.definition.controllerConstructor;Xt(n,"outlets").forEach(s=>e.add(s,t.identifier))}),e}get outletDefinitions(){return this.outletDependencies.getKeysForValue(this.identifier)}get dependentControllerIdentifiers(){return this.outletDependencies.getValuesForKey(this.identifier)}get dependentContexts(){let e=this.dependentControllerIdentifiers;return this.router.contexts.filter(t=>e.includes(t.identifier))}hasOutlet(e,t){return!!this.getOutlet(e,t)||!!this.getOutletFromMap(e,t)}getOutlet(e,t){return this.application.getControllerForElementAndIdentifier(e,t)}getOutletFromMap(e,t){return this.outletsByName.getValuesForKey(t).find(n=>n.element===e)}get scope(){return this.context.scope}get schema(){return this.context.schema}get identifier(){return this.context.identifier}get application(){return this.context.application}get router(){return this.application.router}},Mn=class{constructor(e,t){this.logDebugActivity=(n,i={})=>{let{identifier:s,controller:c,element:l}=this;i=Object.assign({identifier:s,controller:c,element:l},i),this.application.logDebugActivity(this.identifier,n,i)},this.module=e,this.scope=t,this.controller=new e.controllerConstructor(this),this.bindingObserver=new On(this,this.dispatcher),this.valueObserver=new Cn(this,this.controller),this.targetObserver=new kn(this,this),this.outletObserver=new Tn(this,this);try{this.controller.initialize(),this.logDebugActivity("initialize")}catch(n){this.handleError(n,"initializing controller")}}connect(){this.bindingObserver.start(),this.valueObserver.start(),this.targetObserver.start(),this.outletObserver.start();try{this.controller.connect(),this.logDebugActivity("connect")}catch(e){this.handleError(e,"connecting controller")}}refresh(){this.outletObserver.refresh()}disconnect(){try{this.controller.disconnect(),this.logDebugActivity("disconnect")}catch(e){this.handleError(e,"disconnecting controller")}this.outletObserver.stop(),this.targetObserver.stop(),this.valueObserver.stop(),this.bindingObserver.stop()}get application(){return this.module.application}get identifier(){return this.module.identifier}get schema(){return this.application.schema}get dispatcher(){return this.application.dispatcher}get element(){return this.scope.element}get parentElement(){return this.element.parentElement}handleError(e,t,n={}){let{identifier:i,controller:s,element:c}=this;n=Object.assign({identifier:i,controller:s,element:c},n),this.application.handleError(e,`Error ${t}`,n)}targetConnected(e,t){this.invokeControllerMethod(`${t}TargetConnected`,e)}targetDisconnected(e,t){this.invokeControllerMethod(`${t}TargetDisconnected`,e)}outletConnected(e,t,n){this.invokeControllerMethod(`${yn(n)}OutletConnected`,e,t)}outletDisconnected(e,t,n){this.invokeControllerMethod(`${yn(n)}OutletDisconnected`,e,t)}invokeControllerMethod(e,...t){let n=this.controller;typeof n[e]=="function"&&n[e](...t)}};function sc(r){return ac(r,lc(r))}function ac(r,e){let t=dc(r),n=cc(r.prototype,e);return Object.defineProperties(t.prototype,n),t}function lc(r){return Xt(r,"blessings").reduce((t,n)=>{let i=n(r);for(let s in i){let c=t[s]||{};t[s]=Object.assign(c,i[s])}return t},{})}function cc(r,e){return hc(e).reduce((t,n)=>{let i=uc(r,e,n);return i&&Object.assign(t,{[n]:i}),t},{})}function uc(r,e,t){let n=Object.getOwnPropertyDescriptor(r,t);if(!(n&&"value"in n)){let s=Object.getOwnPropertyDescriptor(e,t).value;return n&&(s.get=n.get||s.get,s.set=n.set||s.set),s}}var hc=typeof Object.getOwnPropertySymbols=="function"?r=>[...Object.getOwnPropertyNames(r),...Object.getOwnPropertySymbols(r)]:Object.getOwnPropertyNames,dc=(()=>{function r(t){function n(){return Reflect.construct(t,arguments,new.target)}return n.prototype=Object.create(t.prototype,{constructor:{value:n}}),Reflect.setPrototypeOf(n,t),n}function e(){let n=r(function(){this.a.call(this)});return n.prototype.a=function(){},new n}try{return e(),r}catch{return n=>class extends n{}}})();function fc(r){return{identifier:r.identifier,controllerConstructor:sc(r.controllerConstructor)}}var Nn=class{constructor(e,t){this.application=e,this.definition=fc(t),this.contextsByScope=new WeakMap,this.connectedContexts=new Set}get identifier(){return this.definition.identifier}get controllerConstructor(){return this.definition.controllerConstructor}get contexts(){return Array.from(this.connectedContexts)}connectContextForScope(e){let t=this.fetchContextForScope(e);this.connectedContexts.add(t),t.connect()}disconnectContextForScope(e){let t=this.contextsByScope.get(e);t&&(this.connectedContexts.delete(t),t.disconnect())}fetchContextForScope(e){let t=this.contextsByScope.get(e);return t||(t=new Mn(this,e),this.contextsByScope.set(e,t)),t}},Fn=class{constructor(e){this.scope=e}has(e){return this.data.has(this.getDataKey(e))}get(e){return this.getAll(e)[0]}getAll(e){let t=this.data.get(this.getDataKey(e))||"";return Gl(t)}getAttributeName(e){return this.data.getAttributeNameForKey(this.getDataKey(e))}getDataKey(e){return`${e}-class`}get data(){return this.scope.data}},Sn=class{constructor(e){this.scope=e}get element(){return this.scope.element}get identifier(){return this.scope.identifier}get(e){let t=this.getAttributeNameForKey(e);return this.element.getAttribute(t)}set(e,t){let n=this.getAttributeNameForKey(e);return this.element.setAttribute(n,t),this.get(e)}has(e){let t=this.getAttributeNameForKey(e);return this.element.hasAttribute(t)}delete(e){if(this.has(e)){let t=this.getAttributeNameForKey(e);return this.element.removeAttribute(t),!0}else return!1}getAttributeNameForKey(e){return`data-${this.identifier}-${Zo(e)}`}},Ln=class{constructor(e){this.warnedKeysByObject=new WeakMap,this.logger=e}warn(e,t,n){let i=this.warnedKeysByObject.get(e);i||(i=new Set,this.warnedKeysByObject.set(e,i)),i.has(t)||(i.add(t),this.logger.warn(n,e))}};function In(r,e){return`[${r}~="${e}"]`}var Dn=class{constructor(e){this.scope=e}get element(){return this.scope.element}get identifier(){return this.scope.identifier}get schema(){return this.scope.schema}has(e){return this.find(e)!=null}find(...e){return e.reduce((t,n)=>t||this.findTarget(n)||this.findLegacyTarget(n),void 0)}findAll(...e){return e.reduce((t,n)=>[...t,...this.findAllTargets(n),...this.findAllLegacyTargets(n)],[])}findTarget(e){let t=this.getSelectorForTargetName(e);return this.scope.findElement(t)}findAllTargets(e){let t=this.getSelectorForTargetName(e);return this.scope.findAllElements(t)}getSelectorForTargetName(e){let t=this.schema.targetAttributeForScope(this.identifier);return In(t,e)}findLegacyTarget(e){let t=this.getLegacySelectorForTargetName(e);return this.deprecate(this.scope.findElement(t),e)}findAllLegacyTargets(e){let t=this.getLegacySelectorForTargetName(e);return this.scope.findAllElements(t).map(n=>this.deprecate(n,e))}getLegacySelectorForTargetName(e){let t=`${this.identifier}.${e}`;return In(this.schema.targetAttribute,t)}deprecate(e,t){if(e){let{identifier:n}=this,i=this.schema.targetAttribute,s=this.schema.targetAttributeForScope(n);this.guide.warn(e,`target:${t}`,`Please replace ${i}="${n}.${t}" with ${s}="${t}". The ${i} attribute is deprecated and will be removed in a future version of Stimulus.`)}return e}get guide(){return this.scope.guide}},_n=class{constructor(e,t){this.scope=e,this.controllerElement=t}get element(){return this.scope.element}get identifier(){return this.scope.identifier}get schema(){return this.scope.schema}has(e){return this.find(e)!=null}find(...e){return e.reduce((t,n)=>t||this.findOutlet(n),void 0)}findAll(...e){return e.reduce((t,n)=>[...t,...this.findAllOutlets(n)],[])}getSelectorForOutletName(e){let t=this.schema.outletAttributeForScope(this.identifier,e);return this.controllerElement.getAttribute(t)}findOutlet(e){let t=this.getSelectorForOutletName(e);if(t)return this.findElement(t,e)}findAllOutlets(e){let t=this.getSelectorForOutletName(e);return t?this.findAllElements(t,e):[]}findElement(e,t){return this.scope.queryElements(e).filter(i=>this.matchesElement(i,e,t))[0]}findAllElements(e,t){return this.scope.queryElements(e).filter(i=>this.matchesElement(i,e,t))}matchesElement(e,t,n){let i=e.getAttribute(this.scope.schema.controllerAttribute)||"";return e.matches(t)&&i.split(" ").includes(n)}},Bn=class r{constructor(e,t,n,i){this.targets=new Dn(this),this.classes=new Fn(this),this.data=new Sn(this),this.containsElement=s=>s.closest(this.controllerSelector)===this.element,this.schema=e,this.element=t,this.identifier=n,this.guide=new Ln(i),this.outlets=new _n(this.documentScope,t)}findElement(e){return this.element.matches(e)?this.element:this.queryElements(e).find(this.containsElement)}findAllElements(e){return[...this.element.matches(e)?[this.element]:[],...this.queryElements(e).filter(this.containsElement)]}queryElements(e){return Array.from(this.element.querySelectorAll(e))}get controllerSelector(){return In(this.schema.controllerAttribute,this.identifier)}get isDocumentScope(){return this.element===document.documentElement}get documentScope(){return this.isDocumentScope?this:new r(this.schema,document.documentElement,this.identifier,this.guide.logger)}},Rn=class{constructor(e,t,n){this.element=e,this.schema=t,this.delegate=n,this.valueListObserver=new Sr(this.element,this.controllerAttribute,this),this.scopesByIdentifierByElement=new WeakMap,this.scopeReferenceCounts=new WeakMap}start(){this.valueListObserver.start()}stop(){this.valueListObserver.stop()}get controllerAttribute(){return this.schema.controllerAttribute}parseValueForToken(e){let{element:t,content:n}=e;return this.parseValueForElementAndIdentifier(t,n)}parseValueForElementAndIdentifier(e,t){let n=this.fetchScopesByIdentifierForElement(e),i=n.get(t);return i||(i=this.delegate.createScopeForElementAndIdentifier(e,t),n.set(t,i)),i}elementMatchedValue(e,t){let n=(this.scopeReferenceCounts.get(t)||0)+1;this.scopeReferenceCounts.set(t,n),n==1&&this.delegate.scopeConnected(t)}elementUnmatchedValue(e,t){let n=this.scopeReferenceCounts.get(t);n&&(this.scopeReferenceCounts.set(t,n-1),n==1&&this.delegate.scopeDisconnected(t))}fetchScopesByIdentifierForElement(e){let t=this.scopesByIdentifierByElement.get(e);return t||(t=new Map,this.scopesByIdentifierByElement.set(e,t)),t}},Vn=class{constructor(e){this.application=e,this.scopeObserver=new Rn(this.element,this.schema,this),this.scopesByIdentifier=new Re,this.modulesByIdentifier=new Map}get element(){return this.application.element}get schema(){return this.application.schema}get logger(){return this.application.logger}get controllerAttribute(){return this.schema.controllerAttribute}get modules(){return Array.from(this.modulesByIdentifier.values())}get contexts(){return this.modules.reduce((e,t)=>e.concat(t.contexts),[])}start(){this.scopeObserver.start()}stop(){this.scopeObserver.stop()}loadDefinition(e){this.unloadIdentifier(e.identifier);let t=new Nn(this.application,e);this.connectModule(t);let n=e.controllerConstructor.afterLoad;n&&n.call(e.controllerConstructor,e.identifier,this.application)}unloadIdentifier(e){let t=this.modulesByIdentifier.get(e);t&&this.disconnectModule(t)}getContextForElementAndIdentifier(e,t){let n=this.modulesByIdentifier.get(t);if(n)return n.contexts.find(i=>i.element==e)}proposeToConnectScopeForElementAndIdentifier(e,t){let n=this.scopeObserver.parseValueForElementAndIdentifier(e,t);n?this.scopeObserver.elementMatchedValue(n.element,n):console.error(`Couldn't find or create scope for identifier: "${t}" and element:`,e)}handleError(e,t,n){this.application.handleError(e,t,n)}createScopeForElementAndIdentifier(e,t){return new Bn(this.schema,e,t,this.logger)}scopeConnected(e){this.scopesByIdentifier.add(e.identifier,e);let t=this.modulesByIdentifier.get(e.identifier);t&&t.connectContextForScope(e)}scopeDisconnected(e){this.scopesByIdentifier.delete(e.identifier,e);let t=this.modulesByIdentifier.get(e.identifier);t&&t.disconnectContextForScope(e)}connectModule(e){this.modulesByIdentifier.set(e.identifier,e),this.scopesByIdentifier.getValuesForKey(e.identifier).forEach(n=>e.connectContextForScope(n))}disconnectModule(e){this.modulesByIdentifier.delete(e.identifier),this.scopesByIdentifier.getValuesForKey(e.identifier).forEach(n=>e.disconnectContextForScope(n))}},pc={controllerAttribute:"data-controller",actionAttribute:"data-action",targetAttribute:"data-target",targetAttributeForScope:r=>`data-${r}-target`,outletAttributeForScope:(r,e)=>`data-${r}-${e}-outlet`,keyMappings:Object.assign(Object.assign({enter:"Enter",tab:"Tab",esc:"Escape",space:" ",up:"ArrowUp",down:"ArrowDown",left:"ArrowLeft",right:"ArrowRight",home:"Home",end:"End",page_up:"PageUp",page_down:"PageDown"},Uo("abcdefghijklmnopqrstuvwxyz".split("").map(r=>[r,r]))),Uo("0123456789".split("").map(r=>[r,r])))};function Uo(r){return r.reduce((e,[t,n])=>Object.assign(Object.assign({},e),{[t]:n}),{})}var Lr=class{constructor(e=document.documentElement,t=pc){this.logger=console,this.debug=!1,this.logDebugActivity=(n,i,s={})=>{this.debug&&this.logFormattedMessage(n,i,s)},this.element=e,this.schema=t,this.dispatcher=new bn(this),this.router=new Vn(this),this.actionDescriptorFilters=Object.assign({},Kl)}static start(e,t){let n=new this(e,t);return n.start(),n}async start(){await gc(),this.logDebugActivity("application","starting"),this.dispatcher.start(),this.router.start(),this.logDebugActivity("application","start")}stop(){this.logDebugActivity("application","stopping"),this.dispatcher.stop(),this.router.stop(),this.logDebugActivity("application","stop")}register(e,t){this.load({identifier:e,controllerConstructor:t})}registerActionOption(e,t){this.actionDescriptorFilters[e]=t}load(e,...t){(Array.isArray(e)?e:[e,...t]).forEach(i=>{i.controllerConstructor.shouldLoad&&this.router.loadDefinition(i)})}unload(e,...t){(Array.isArray(e)?e:[e,...t]).forEach(i=>this.router.unloadIdentifier(i))}get controllers(){return this.router.contexts.map(e=>e.controller)}getControllerForElementAndIdentifier(e,t){let n=this.router.getContextForElementAndIdentifier(e,t);return n?n.controller:null}handleError(e,t,n){var i;this.logger.error(`%s

%o

%o`,t,e,n),(i=window.onerror)===null||i===void 0||i.call(window,t,"",0,0,e)}logFormattedMessage(e,t,n={}){n=Object.assign({application:this},n),this.logger.groupCollapsed(`${e} #${t}`),this.logger.log("details:",Object.assign({},n)),this.logger.groupEnd()}};function gc(){return new Promise(r=>{document.readyState=="loading"?document.addEventListener("DOMContentLoaded",()=>r()):r()})}function vc(r){return Xt(r,"classes").reduce((t,n)=>Object.assign(t,mc(n)),{})}function mc(r){return{[`${r}Class`]:{get(){let{classes:e}=this;if(e.has(r))return e.get(r);{let t=e.getAttributeName(r);throw new Error(`Missing attribute "${t}"`)}}},[`${r}Classes`]:{get(){return this.classes.getAll(r)}},[`has${Yt(r)}Class`]:{get(){return this.classes.has(r)}}}}function bc(r){return Xt(r,"outlets").reduce((t,n)=>Object.assign(t,yc(n)),{})}function qo(r,e,t){return r.application.getControllerForElementAndIdentifier(e,t)}function zo(r,e,t){let n=qo(r,e,t);if(n||(r.application.router.proposeToConnectScopeForElementAndIdentifier(e,t),n=qo(r,e,t),n))return n}function yc(r){let e=yn(r);return{[`${e}Outlet`]:{get(){let t=this.outlets.find(r),n=this.outlets.getSelectorForOutletName(r);if(t){let i=zo(this,t,r);if(i)return i;throw new Error(`The provided outlet element is missing an outlet controller "${r}" instance for host controller "${this.identifier}"`)}throw new Error(`Missing outlet element "${r}" for host controller "${this.identifier}". Stimulus couldn't find a matching outlet element using selector "${n}".`)}},[`${e}Outlets`]:{get(){let t=this.outlets.findAll(r);return t.length>0?t.map(n=>{let i=zo(this,n,r);if(i)return i;console.warn(`The provided outlet element is missing an outlet controller "${r}" instance for host controller "${this.identifier}"`,n)}).filter(n=>n):[]}},[`${e}OutletElement`]:{get(){let t=this.outlets.find(r),n=this.outlets.getSelectorForOutletName(r);if(t)return t;throw new Error(`Missing outlet element "${r}" for host controller "${this.identifier}". Stimulus couldn't find a matching outlet element using selector "${n}".`)}},[`${e}OutletElements`]:{get(){return this.outlets.findAll(r)}},[`has${Yt(e)}Outlet`]:{get(){return this.outlets.has(r)}}}}function wc(r){return Xt(r,"targets").reduce((t,n)=>Object.assign(t,Ec(n)),{})}function Ec(r){return{[`${r}Target`]:{get(){let e=this.targets.find(r);if(e)return e;throw new Error(`Missing target element "${r}" for "${this.identifier}" controller`)}},[`${r}Targets`]:{get(){return this.targets.findAll(r)}},[`has${Yt(r)}Target`]:{get(){return this.targets.has(r)}}}}function Ac(r){let e=nc(r,"values"),t={valueDescriptorMap:{get(){return e.reduce((n,i)=>{let s=Xo(i,this.identifier),c=this.data.getAttributeNameForKey(s.key);return Object.assign(n,{[c]:s})},{})}}};return e.reduce((n,i)=>Object.assign(n,xc(i)),t)}function xc(r,e){let t=Xo(r,e),{key:n,name:i,reader:s,writer:c}=t;return{[i]:{get(){let l=this.data.get(n);return l!==null?s(l):t.defaultValue},set(l){l===void 0?this.data.delete(n):this.data.set(n,c(l))}},[`has${Yt(i)}`]:{get(){return this.data.has(n)||t.hasCustomDefaultValue}}}}function Xo([r,e],t){return kc({controller:t,token:r,typeDefinition:e})}function Ir(r){switch(r){case Array:return"array";case Boolean:return"boolean";case Number:return"number";case Object:return"object";case String:return"string"}}function Jt(r){switch(typeof r){case"boolean":return"boolean";case"number":return"number";case"string":return"string"}if(Array.isArray(r))return"array";if(Object.prototype.toString.call(r)==="[object Object]")return"object"}function $c(r){let{controller:e,token:t,typeObject:n}=r,i=jo(n.type),s=jo(n.default),c=i&&s,l=i&&!s,u=!i&&s,d=Ir(n.type),f=Jt(r.typeObject.default);if(l)return d;if(u)return f;if(d!==f){let v=e?`${e}.${t}`:t;throw new Error(`The specified default value for the Stimulus Value "${v}" must match the defined type "${d}". The provided default value of "${n.default}" is of type "${f}".`)}if(c)return d}function Oc(r){let{controller:e,token:t,typeDefinition:n}=r,s=$c({controller:e,token:t,typeObject:n}),c=Jt(n),l=Ir(n),u=s||c||l;if(u)return u;let d=e?`${e}.${n}`:t;throw new Error(`Unknown value type "${d}" for "${t}" value`)}function Cc(r){let e=Ir(r);if(e)return Wo[e];let t=wn(r,"default"),n=wn(r,"type"),i=r;if(t)return i.default;if(n){let{type:s}=i,c=Ir(s);if(c)return Wo[c]}return r}function kc(r){let{token:e,typeDefinition:t}=r,n=`${Zo(e)}-value`,i=Oc(r);return{type:i,key:n,name:jn(n),get defaultValue(){return Cc(t)},get hasCustomDefaultValue(){return Jt(t)!==void 0},reader:Tc[i],writer:Ho[i]||Ho.default}}var Wo={get array(){return[]},boolean:!1,number:0,get object(){return{}},string:""},Tc={array(r){let e=JSON.parse(r);if(!Array.isArray(e))throw new TypeError(`expected value of type "array" but instead got value "${r}" of type "${Jt(e)}"`);return e},boolean(r){return!(r=="0"||String(r).toLowerCase()=="false")},number(r){return Number(r.replace(/_/g,""))},object(r){let e=JSON.parse(r);if(e===null||typeof e!="object"||Array.isArray(e))throw new TypeError(`expected value of type "object" but instead got value "${r}" of type "${Jt(e)}"`);return e},string(r){return r}},Ho={default:Mc,array:Go,object:Go};function Go(r){return JSON.stringify(r)}function Mc(r){return`${r}`}var Ie=class{constructor(e){this.context=e}static get shouldLoad(){return!0}static afterLoad(e,t){}get application(){return this.context.application}get scope(){return this.context.scope}get element(){return this.scope.element}get identifier(){return this.scope.identifier}get targets(){return this.scope.targets}get outlets(){return this.scope.outlets}get classes(){return this.scope.classes}get data(){return this.scope.data}initialize(){}connect(){}disconnect(){}dispatch(e,{target:t=this.element,detail:n={},prefix:i=this.identifier,bubbles:s=!0,cancelable:c=!0}={}){let l=i?`${i}:${e}`:e,u=new CustomEvent(l,{detail:n,bubbles:s,cancelable:c});return t.dispatchEvent(u),u}};Ie.blessings=[vc,wc,Ac,bc];Ie.targets=[];Ie.outlets=[];Ie.values={};var Pn=Lr.start();Pn.register("navigation",class extends Ie{static get targets(){return["button"]}connect(){this.element.addEventListener("keydown",this.trapEscape.bind(this))}trapEscape(r){r.key==="Escape"&&this.close()}switch(){this.buttonTarget.getAttribute("aria-expanded")==="true"?this.buttonTarget.setAttribute("aria-expanded","false"):this.buttonTarget.setAttribute("aria-expanded","true")}close(){this.buttonTarget.setAttribute("aria-expanded","false"),this.buttonTarget.focus()}});Pn.register("profile",class extends Ie{static get targets(){return["sectionNatural","sectionLegal","firstName","lastName","legalName","controlAddress"]}initialize(){this.switchAddressForNode(this.controlAddressTarget);let r=document.querySelector('input[name="entity_type"][checked]');this.switchEntityTypeForNode(r)}switchAddress(r){this.switchAddressForNode(r.target)}switchAddressForNode(r){let e=document.querySelector("#address");e.hidden=!r.checked}switchEntityType(r){this.switchEntityTypeForNode(r.target)}switchEntityTypeForNode(r){r.value==="natural"?(this.sectionNaturalTarget.hidden=!1,this.sectionLegalTarget.hidden=!0,this.firstNameTarget.required=!0,this.lastNameTarget.required=!0,this.legalNameTarget.required=!1,this.controlAddressTarget.checked=this.controlAddressTarget.defaultChecked,this.controlAddressTarget.hidden=!1):(this.sectionNaturalTarget.hidden=!0,this.sectionLegalTarget.hidden=!1,this.firstNameTarget.required=!1,this.lastNameTarget.required=!1,this.legalNameTarget.required=!0,this.controlAddressTarget.checked=!0,this.controlAddressTarget.hidden=!0),this.switchAddressForNode(this.controlAddressTarget)}});Pn.register("amount-selector",class extends Ie{static get targets(){return["amount","radio","totalAmount"]}initialize(){let r=this.data.get("initialAmount");this.setAmount(r)}setAmount(r){let e=this.amountTarget;e.value=r,this.refreshTotalAmount()}select(r){let e=r.target;this.setAmount(e.dataset.value)}change(r){this.radioTargets.forEach(function(e){e.checked=!1}),this.refreshTotalAmount()}refreshTotalAmount(){if(this.totalAmountTarget){let r=parseInt(this.amountTarget.value,10),e=parseInt(this.data.get("countAccounts"),10);this.totalAmountTarget.innerHTML=r*e}}});})();
//# sourceMappingURL=application.js.map
